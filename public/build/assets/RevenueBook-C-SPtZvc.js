import{r as b,c as n,a as k,b as a,h as F,i as w,d as t,t as e,f,v as C,o as c,F as x,j as u,x as V,g as _,e as p,p as $}from"./app-CCfNw5_2.js";import{_ as A}from"./AppLayout-C5Yc7w9R.js";import{u as L}from"./useTranslations-CUaV1VvB.js";import"./ApplicationLogo-D_NVnA7Z.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-CMdmUlDG.js";const R={class:"flex items-center justify-between"},S={class:"text-xl font-semibold text-gray-900 dark:text-white"},N={class:"space-y-6"},P={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},T={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},U={class:"text-lg font-medium text-gray-900 dark:text-white"},E={class:"px-6 py-4"},O={class:"flex flex-wrap gap-4 items-end"},I={for:"start_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Y={for:"end_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},q={class:"flex flex-wrap gap-2"},G=["onClick"],J={class:"mt-4 flex items-center gap-2"},K={class:"text-sm text-gray-500 dark:text-gray-400"},Q=["onClick"],W={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},X={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},Z={class:"p-5"},tt={class:"flex items-center"},et={class:"ml-5 w-0 flex-1"},st={class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},at={class:"text-lg font-semibold text-gray-900 dark:text-white"},rt={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},ot={class:"p-5"},dt={class:"flex items-center"},it={class:"ml-5 w-0 flex-1"},lt={class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},nt={class:"text-lg font-semibold text-gray-900 dark:text-white"},ct={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},gt={class:"p-5"},ht={class:"flex items-center"},xt={class:"ml-5 w-0 flex-1"},yt={class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},mt={class:"text-lg font-semibold text-gray-900 dark:text-white"},ut={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},_t={class:"p-5"},pt={class:"flex items-center"},vt={class:"ml-5 w-0 flex-1"},bt={class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},kt={class:"text-lg font-semibold text-green-600 dark:text-green-400"},wt={key:0,class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},ft={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Ct={class:"text-lg font-medium text-gray-900 dark:text-white"},Vt={class:"overflow-x-auto"},zt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Bt={class:"bg-gray-50 dark:bg-gray-700"},Mt={class:"py-3.5 pl-6 pr-3 text-left text-sm font-semibold text-gray-900 dark:text-white"},Dt={class:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"},Ht={class:"py-3.5 pl-3 pr-6 text-right text-sm font-semibold text-gray-900 dark:text-white"},jt={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800"},Ft={class:"whitespace-nowrap py-4 pl-6 pr-3 text-sm text-gray-900 dark:text-white"},$t={class:"whitespace-nowrap px-3 py-4 text-right text-sm text-gray-500 dark:text-gray-400"},At={class:"whitespace-nowrap py-4 pl-3 pr-6 text-right text-sm font-medium text-gray-900 dark:text-white"},Lt={class:"bg-gray-50 dark:bg-gray-700"},Rt={class:"whitespace-nowrap py-3.5 pl-6 pr-3 text-sm font-semibold text-gray-900 dark:text-white"},St={class:"whitespace-nowrap px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"},Nt={class:"whitespace-nowrap py-3.5 pl-3 pr-6 text-right text-sm font-semibold text-gray-900 dark:text-white"},Pt={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},Tt={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Ut={class:"text-lg font-medium text-gray-900 dark:text-white"},Et={class:"text-sm font-normal text-gray-500 dark:text-gray-400"},Ot={class:"overflow-x-auto"},It={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Yt={class:"bg-gray-50 dark:bg-gray-700"},qt={class:"py-3.5 pl-6 pr-3 text-left text-sm font-semibold text-gray-900 dark:text-white"},Gt={class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white"},Jt={class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white"},Kt={class:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"},Qt={class:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"},Wt={class:"py-3.5 pl-3 pr-6 text-right text-sm font-semibold text-gray-900 dark:text-white"},Xt={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800"},Zt={key:0},te={colspan:"6",class:"py-10 text-center text-sm text-gray-500 dark:text-gray-400"},ee={class:"mt-2"},se={class:"whitespace-nowrap py-4 pl-6 pr-3 text-sm text-gray-500 dark:text-gray-400"},ae={class:"whitespace-nowrap px-3 py-4 text-sm"},re=["href"],oe={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-900 dark:text-white"},de={class:"whitespace-nowrap px-3 py-4 text-right text-sm text-gray-500 dark:text-gray-400"},ie={class:"whitespace-nowrap px-3 py-4 text-right text-sm text-gray-500 dark:text-gray-400"},le={class:"whitespace-nowrap py-4 pl-3 pr-6 text-right text-sm font-medium text-gray-900 dark:text-white"},ne={key:0,class:"bg-gray-50 dark:bg-gray-700"},ce={colspan:"3",class:"whitespace-nowrap py-3.5 pl-6 pr-3 text-sm font-semibold text-gray-900 dark:text-white"},ge={class:"whitespace-nowrap px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"},he={class:"whitespace-nowrap px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"},xe={class:"whitespace-nowrap py-3.5 pl-3 pr-6 text-right text-sm font-bold text-green-600 dark:text-green-400"},be={__name:"RevenueBook",props:{invoices:Array,totals:Object,vatBreakdown:Array,filters:Object,years:Array,periods:Array},setup(d){const{t:r}=L(),v=d,g=b(v.filters.start_date),h=b(v.filters.end_date),y=()=>{$.get(route("reports.revenue-book"),{start_date:g.value,end_date:h.value},{preserveState:!0,replace:!0})},z=i=>{g.value=i.start,h.value=i.end,y()},B=i=>{g.value=`${i}-01-01`,h.value=`${i}-12-31`,y()},l=(i,o="EUR")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:o}).format(i),M=i=>i?new Date(i).toLocaleDateString("fr-FR"):"-",D=()=>{const i=new Date(g.value),o=new Date(h.value);return`du ${i.toLocaleDateString("fr-FR")} au ${o.toLocaleDateString("fr-FR")}`},H=()=>{window.location.href=route("reports.revenue-book.pdf",{start_date:g.value,end_date:h.value})},j=()=>{window.location.href=route("reports.revenue-book.csv",{start_date:g.value,end_date:h.value})};return(i,o)=>(c(),n(x,null,[k(a(F),{title:a(r)("revenue_book_title")},null,8,["title"]),k(A,null,{header:w(()=>[t("div",R,[t("h1",S,e(a(r)("revenue_book_title")),1),t("div",{class:"flex items-center space-x-3"},[t("button",{type:"button",onClick:j,class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},[...o[2]||(o[2]=[t("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),p(" CSV ",-1)])]),t("button",{type:"button",onClick:H,class:"inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},[...o[3]||(o[3]=[t("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),p(" PDF ",-1)])])])])]),default:w(()=>[t("div",N,[t("div",P,[t("div",T,[t("h2",U,e(a(r)("period")),1)]),t("div",E,[t("div",O,[t("div",null,[t("label",I,e(a(r)("from_date")),1),f(t("input",{id:"start_date","onUpdate:modelValue":o[0]||(o[0]=s=>g.value=s),type:"date",onChange:y,class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,544),[[C,g.value]])]),t("div",null,[t("label",Y,e(a(r)("to_date")),1),f(t("input",{id:"end_date","onUpdate:modelValue":o[1]||(o[1]=s=>h.value=s),type:"date",onChange:y,class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,544),[[C,h.value]])]),t("div",q,[(c(!0),n(x,null,u(d.periods,s=>(c(),n("button",{key:s.label,type:"button",onClick:m=>z(s),class:V(["px-3 py-2 text-sm rounded-md border",g.value===s.start&&h.value===s.end?"bg-indigo-100 border-indigo-300 text-indigo-700 dark:bg-indigo-900 dark:border-indigo-700 dark:text-indigo-300":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600"])},e(s.label),11,G))),128))])]),t("div",J,[t("span",K,e(a(r)("year"))+" :",1),(c(!0),n(x,null,u(d.years,s=>(c(),n("button",{key:s,type:"button",onClick:m=>B(s),class:V(["px-3 py-1 text-sm rounded-md border",g.value===`${s}-01-01`&&h.value===`${s}-12-31`?"bg-indigo-100 border-indigo-300 text-indigo-700 dark:bg-indigo-900 dark:border-indigo-700 dark:text-indigo-300":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600"])},e(s),11,Q))),128))])])]),t("div",W,[t("div",X,[t("div",Z,[t("div",tt,[o[4]||(o[4]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})])],-1)),t("div",et,[t("dl",null,[t("dt",st,e(a(r)("paid_invoices")),1),t("dd",at,e(d.totals.count),1)])])])])]),t("div",rt,[t("div",ot,[t("div",dt,[o[5]||(o[5]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5zm-12 0h.008v.008H6V10.5z"})])],-1)),t("div",it,[t("dl",null,[t("dt",lt,e(a(r)("total_ht")),1),t("dd",nt,e(l(d.totals.ht)),1)])])])])]),t("div",ct,[t("div",gt,[t("div",ht,[o[6]||(o[6]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 14.25l6-6m4.5-3.493V21.75l-3.75-1.5-3.75 1.5-3.75-1.5-3.75 1.5V4.757c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0c1.1.128 1.907 1.077 1.907 2.185zM9.75 9h.008v.008H9.75V9zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm4.125 4.5h.008v.008h-.008V13.5zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})])],-1)),t("div",xt,[t("dl",null,[t("dt",yt,e(a(r)("total_vat")),1),t("dd",mt,e(l(d.totals.vat)),1)])])])])]),t("div",ut,[t("div",_t,[t("div",pt,[o[7]||(o[7]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",vt,[t("dl",null,[t("dt",bt,e(a(r)("total_ttc")),1),t("dd",kt,e(l(d.totals.ttc)),1)])])])])])]),d.vatBreakdown.length>0?(c(),n("div",wt,[t("div",ft,[t("h2",Ct,e(a(r)("vat_summary_title")),1)]),t("div",Vt,[t("table",zt,[t("thead",Bt,[t("tr",null,[t("th",Mt,e(a(r)("vat_rate_label")),1),t("th",Dt,e(a(r)("base_ht")),1),t("th",Ht,e(a(r)("vat_amount")),1)])]),t("tbody",jt,[(c(!0),n(x,null,u(d.vatBreakdown,s=>(c(),n("tr",{key:s.rate},[t("td",Ft,e(s.rate)+"% ",1),t("td",$t,e(l(s.base)),1),t("td",At,e(l(s.amount)),1)]))),128))]),t("tfoot",Lt,[t("tr",null,[t("td",Rt,e(a(r)("total")),1),t("td",St,e(l(d.totals.ht)),1),t("td",Nt,e(l(d.totals.vat)),1)])])])])])):_("",!0),t("div",Pt,[t("div",Tt,[t("h2",Ut,[p(e(a(r)("revenue_details"))+" ",1),t("span",Et," ("+e(D())+") ",1)])]),t("div",Ot,[t("table",It,[t("thead",Yt,[t("tr",null,[t("th",qt,e(a(r)("payment_date")),1),t("th",Gt,e(a(r)("invoice_number")),1),t("th",Jt,e(a(r)("client")),1),t("th",Kt,e(a(r)("total_ht")),1),t("th",Qt,e(a(r)("vat")),1),t("th",Wt,e(a(r)("total_ttc")),1)])]),t("tbody",Xt,[d.invoices.length===0?(c(),n("tr",Zt,[t("td",te,[o[8]||(o[8]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("p",ee,e(a(r)("no_revenue_this_period")),1)])])):_("",!0),(c(!0),n(x,null,u(d.invoices,s=>{var m;return c(),n("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",se,e(M(s.paid_at)),1),t("td",ae,[t("a",{href:i.route("invoices.show",s.id),class:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400"},e(s.number),9,re)]),t("td",oe,e((m=s.client)==null?void 0:m.name),1),t("td",de,e(l(s.total_ht,s.currency)),1),t("td",ie,e(l(s.total_vat,s.currency)),1),t("td",le,e(l(s.total_ttc,s.currency)),1)])}),128))]),d.invoices.length>0?(c(),n("tfoot",ne,[t("tr",null,[t("td",ce," Total ("+e(d.totals.count)+" facture"+e(d.totals.count>1?"s":"")+") ",1),t("td",ge,e(l(d.totals.ht)),1),t("td",he,e(l(d.totals.vat)),1),t("td",xe,e(l(d.totals.ttc)),1)])])):_("",!0)])])])])]),_:1})],64))}};export{be as default};
