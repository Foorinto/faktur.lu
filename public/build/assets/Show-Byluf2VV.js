import{c as a,a as r,b as N,h as E,i as d,d as t,t as u,o as l,g as m,F as k,j as B,x as O,m as g,e as o,l as U,r as S,p as w}from"./app-Ci_uaEa0.js";import{_ as I}from"./AdminLayout-Dq642xqg.js";import{_ as b}from"./PrimaryButton-gofNUAyH.js";import{_ as y}from"./DangerButton-BT85n1GR.js";import{_ as x}from"./SecondaryButton-xk4c7lis.js";const L={class:"flex items-center gap-4"},T={class:"text-xl font-semibold text-white"},V={class:"grid gap-6 lg:grid-cols-3"},_={class:"lg:col-span-2 space-y-6"},q={class:"rounded-xl bg-slate-800 p-6"},P={class:"grid gap-4 sm:grid-cols-2"},z={class:"mt-1 text-white"},M={class:"mt-1 text-white"},G={class:"mt-1 text-white"},H={class:"mt-1 text-white"},J={class:"mt-1 text-white"},K={class:"mt-1 text-white"},Q={class:"mt-6 flex flex-wrap gap-2"},W={key:0,class:"inline-flex rounded-full bg-green-500/20 px-3 py-1 text-sm font-medium text-green-400"},X={key:1,class:"inline-flex rounded-full bg-yellow-500/20 px-3 py-1 text-sm font-medium text-yellow-400"},Y={key:2,class:"inline-flex rounded-full bg-purple-500/20 px-3 py-1 text-sm font-medium text-purple-400"},Z={key:3,class:"inline-flex rounded-full bg-red-500/20 px-3 py-1 text-sm font-medium text-red-400"},h={key:4,class:"inline-flex rounded-full bg-slate-500/20 px-3 py-1 text-sm font-medium text-slate-400"},ee={class:"rounded-xl bg-slate-800 p-6"},te={key:0,class:"space-y-3"},se={class:"font-medium text-white"},le={class:"text-sm text-slate-400"},ie={class:"text-right"},ne={class:"font-medium text-white"},de={key:1,class:"py-4 text-center text-slate-500"},oe={class:"space-y-6"},ae={class:"rounded-xl bg-slate-800 p-6"},ue={class:"space-y-4"},re={class:"flex justify-between"},fe={class:"font-medium text-white"},me={class:"flex justify-between"},ve={class:"font-medium text-green-400"},xe={class:"flex justify-between"},ge={class:"font-medium text-yellow-400"},be={class:"flex justify-between"},ye={class:"font-medium text-white"},pe={class:"flex justify-between"},ce={class:"font-medium text-white"},ke={class:"rounded-xl bg-slate-800 p-6"},we={class:"space-y-3"},je={key:1,class:"rounded-lg bg-green-500/10 p-3"},Ce={class:"flex gap-2"},$e={key:3,class:"rounded-lg bg-red-500/10 p-3"},Ae={class:"flex gap-2"},Ne={key:1,class:"rounded-lg bg-purple-500/10 p-3"},Se={class:"flex gap-2"},Fe={key:3,class:"rounded-lg bg-yellow-500/10 p-3"},Re={class:"flex gap-2"},De={key:5,class:"rounded-lg bg-yellow-500/10 p-3"},Ee={class:"flex gap-2"},Be={key:8,class:"rounded-lg bg-red-500/10 p-3"},Oe={class:"mb-2 text-sm text-red-300"},Ue={class:"flex gap-2"},Ie={key:10,class:"rounded-lg bg-red-500/10 p-3"},Le={class:"flex gap-2"},ze={__name:"Show",props:{user:Object,stats:Object,recentInvoices:Array},setup(i){const p=i,f=S(!1),s=S(null),C=v=>new Intl.NumberFormat("fr-LU",{style:"currency",currency:"EUR"}).format(v||0),j=v=>new Date(v).toLocaleDateString("fr-LU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),c=(v,e)=>{f.value=!0,w.post(route(e,p.user.id),{},{onFinish:()=>{f.value=!1,s.value=null}})},F=()=>{f.value=!0,w.delete(route("admin.users.destroy",p.user.id),{onFinish:()=>{f.value=!1,s.value=null}})},R=()=>{f.value=!0,w.post(route("admin.users.restore",p.user.id),{},{onFinish:()=>{f.value=!1,s.value=null}})},D=()=>{f.value=!0,w.delete(route("admin.users.force-delete",p.user.id),{onFinish:()=>{f.value=!1,s.value=null}})},$=v=>({draft:{class:"bg-slate-500/20 text-slate-400",label:"Brouillon"},sent:{class:"bg-blue-500/20 text-blue-400",label:"Envoyée"},paid:{class:"bg-green-500/20 text-green-400",label:"Payée"},overdue:{class:"bg-red-500/20 text-red-400",label:"En retard"},cancelled:{class:"bg-slate-500/20 text-slate-400",label:"Annulée"}})[v]||{class:"bg-slate-500/20 text-slate-400",label:v};return(v,e)=>(l(),a(k,null,[r(N(E),{title:`Utilisateur: ${i.user.name}`},null,8,["title"]),r(I,null,{header:d(()=>[t("div",L,[r(N(U),{href:v.route("admin.users.index"),class:"text-slate-400 hover:text-white"},{default:d(()=>[...e[19]||(e[19]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1},8,["href"]),t("h1",T,u(i.user.name),1)])]),default:d(()=>{var A;return[t("div",V,[t("div",_,[t("div",q,[e[26]||(e[26]=t("h2",{class:"mb-4 text-lg font-semibold text-white"},"Informations",-1)),t("dl",P,[t("div",null,[e[20]||(e[20]=t("dt",{class:"text-sm text-slate-400"},"Nom",-1)),t("dd",z,u(i.user.name),1)]),t("div",null,[e[21]||(e[21]=t("dt",{class:"text-sm text-slate-400"},"Email",-1)),t("dd",M,u(i.user.email),1)]),t("div",null,[e[22]||(e[22]=t("dt",{class:"text-sm text-slate-400"},"Société",-1)),t("dd",G,u(i.user.company_name||"-"),1)]),t("div",null,[e[23]||(e[23]=t("dt",{class:"text-sm text-slate-400"},"N° TVA",-1)),t("dd",H,u(i.user.vat_number||"-"),1)]),t("div",null,[e[24]||(e[24]=t("dt",{class:"text-sm text-slate-400"},"Téléphone",-1)),t("dd",J,u(i.user.phone||"-"),1)]),t("div",null,[e[25]||(e[25]=t("dt",{class:"text-sm text-slate-400"},"Inscrit le",-1)),t("dd",K,u(j(i.user.created_at)),1)])]),t("div",Q,[i.user.email_verified_at?(l(),a("span",W," Email vérifié ")):(l(),a("span",X," Email non vérifié ")),i.user.two_factor_confirmed_at?(l(),a("span",Y," 2FA activé ")):m("",!0),i.user.is_active===!1?(l(),a("span",Z," Compte désactivé ")):m("",!0),i.user.deleted_at?(l(),a("span",h," Supprimé le "+u(j(i.user.deleted_at)),1)):m("",!0)])]),t("div",ee,[e[27]||(e[27]=t("h2",{class:"mb-4 text-lg font-semibold text-white"},"Dernières factures",-1)),(A=i.recentInvoices)!=null&&A.length?(l(),a("div",te,[(l(!0),a(k,null,B(i.recentInvoices,n=>(l(),a("div",{key:n.id,class:"flex items-center justify-between rounded-lg bg-slate-700/50 p-3"},[t("div",null,[t("p",se,u(n.invoice_number),1),t("p",le,u(j(n.created_at)),1)]),t("div",ie,[t("p",ne,u(C(n.total_ttc)),1),t("span",{class:O(["inline-flex rounded-full px-2 py-0.5 text-xs font-medium",$(n.status).class])},u($(n.status).label),3)])]))),128))])):(l(),a("div",de," Aucune facture "))])]),t("div",oe,[t("div",ae,[e[33]||(e[33]=t("h2",{class:"mb-4 text-lg font-semibold text-white"},"Statistiques",-1)),t("dl",ue,[t("div",re,[e[28]||(e[28]=t("dt",{class:"text-slate-400"},"Factures",-1)),t("dd",fe,u(i.stats.total_invoices),1)]),t("div",me,[e[29]||(e[29]=t("dt",{class:"text-slate-400"},"Payées",-1)),t("dd",ve,u(i.stats.paid_invoices),1)]),t("div",xe,[e[30]||(e[30]=t("dt",{class:"text-slate-400"},"En attente",-1)),t("dd",ge,u(i.stats.pending_invoices),1)]),t("div",be,[e[31]||(e[31]=t("dt",{class:"text-slate-400"},"CA Total",-1)),t("dd",ye,u(C(i.stats.total_revenue)),1)]),t("div",pe,[e[32]||(e[32]=t("dt",{class:"text-slate-400"},"Clients",-1)),t("dd",ce,u(i.stats.total_clients),1)])])]),t("div",ke,[e[62]||(e[62]=t("h2",{class:"mb-4 text-lg font-semibold text-white"},"Actions",-1)),t("div",we,[i.user.deleted_at?(l(),a(k,{key:0},[s.value!=="restore"?(l(),g(b,{key:0,class:"w-full justify-center bg-green-600 hover:bg-green-700",onClick:e[0]||(e[0]=n=>s.value="restore")},{default:d(()=>[...e[34]||(e[34]=[o(" Restaurer le compte ",-1)])]),_:1})):s.value==="restore"?(l(),a("div",je,[e[37]||(e[37]=t("p",{class:"mb-2 text-sm text-green-300"},"Restaurer cet utilisateur ?",-1)),t("div",Ce,[r(b,{class:"flex-1 justify-center bg-green-600",disabled:f.value,onClick:R},{default:d(()=>[...e[35]||(e[35]=[o(" Oui ",-1)])]),_:1},8,["disabled"]),r(x,{class:"flex-1 justify-center",onClick:e[1]||(e[1]=n=>s.value=null)},{default:d(()=>[...e[36]||(e[36]=[o(" Non ",-1)])]),_:1})])])):m("",!0),s.value!=="force-delete"?(l(),g(y,{key:2,class:"w-full justify-center",onClick:e[2]||(e[2]=n=>s.value="force-delete")},{default:d(()=>[...e[38]||(e[38]=[o(" Supprimer définitivement ",-1)])]),_:1})):s.value==="force-delete"?(l(),a("div",$e,[e[41]||(e[41]=t("p",{class:"mb-2 text-sm text-red-300"},[o(" Cette action est "),t("strong",null,"irréversible"),o(" ! Toutes les données seront perdues. ")],-1)),t("div",Ae,[r(y,{class:"flex-1 justify-center",disabled:f.value,onClick:D},{default:d(()=>[...e[39]||(e[39]=[o(" Supprimer ",-1)])]),_:1},8,["disabled"]),r(x,{class:"flex-1 justify-center",onClick:e[3]||(e[3]=n=>s.value=null)},{default:d(()=>[...e[40]||(e[40]=[o(" Annuler ",-1)])]),_:1})])])):m("",!0)],64)):(l(),a(k,{key:1},[s.value!=="impersonate"?(l(),g(b,{key:0,class:"w-full justify-center bg-purple-600 hover:bg-purple-700",onClick:e[4]||(e[4]=n=>s.value="impersonate")},{default:d(()=>[...e[42]||(e[42]=[o(" Se connecter en tant que ",-1)])]),_:1})):s.value==="impersonate"?(l(),a("div",Ne,[e[45]||(e[45]=t("p",{class:"mb-2 text-sm text-purple-300"},"Confirmer l'impersonation ?",-1)),t("div",Se,[r(b,{class:"flex-1 justify-center bg-purple-600",disabled:f.value,onClick:e[5]||(e[5]=n=>c("impersonate","admin.users.impersonate"))},{default:d(()=>[...e[43]||(e[43]=[o(" Oui ",-1)])]),_:1},8,["disabled"]),r(x,{class:"flex-1 justify-center",onClick:e[6]||(e[6]=n=>s.value=null)},{default:d(()=>[...e[44]||(e[44]=[o(" Non ",-1)])]),_:1})])])):m("",!0),s.value!=="reset-password"?(l(),g(x,{key:2,class:"w-full justify-center",onClick:e[7]||(e[7]=n=>s.value="reset-password")},{default:d(()=>[...e[46]||(e[46]=[o(" Réinitialiser mot de passe ",-1)])]),_:1})):s.value==="reset-password"?(l(),a("div",Fe,[e[49]||(e[49]=t("p",{class:"mb-2 text-sm text-yellow-300"},"Réinitialiser le mot de passe ?",-1)),t("div",Re,[r(b,{class:"flex-1 justify-center bg-yellow-600",disabled:f.value,onClick:e[8]||(e[8]=n=>c("reset-password","admin.users.reset-password"))},{default:d(()=>[...e[47]||(e[47]=[o(" Oui ",-1)])]),_:1},8,["disabled"]),r(x,{class:"flex-1 justify-center",onClick:e[9]||(e[9]=n=>s.value=null)},{default:d(()=>[...e[48]||(e[48]=[o(" Non ",-1)])]),_:1})])])):m("",!0),i.user.two_factor_confirmed_at&&s.value!=="reset-2fa"?(l(),g(x,{key:4,class:"w-full justify-center",onClick:e[10]||(e[10]=n=>s.value="reset-2fa")},{default:d(()=>[...e[50]||(e[50]=[o(" Réinitialiser 2FA ",-1)])]),_:1})):s.value==="reset-2fa"?(l(),a("div",De,[e[53]||(e[53]=t("p",{class:"mb-2 text-sm text-yellow-300"},"Réinitialiser le 2FA ?",-1)),t("div",Ee,[r(b,{class:"flex-1 justify-center bg-yellow-600",disabled:f.value,onClick:e[11]||(e[11]=n=>c("reset-2fa","admin.users.reset-2fa"))},{default:d(()=>[...e[51]||(e[51]=[o(" Oui ",-1)])]),_:1},8,["disabled"]),r(x,{class:"flex-1 justify-center",onClick:e[12]||(e[12]=n=>s.value=null)},{default:d(()=>[...e[52]||(e[52]=[o(" Non ",-1)])]),_:1})])])):m("",!0),i.user.is_active!==!1&&s.value!=="toggle-active"?(l(),g(y,{key:6,class:"w-full justify-center",onClick:e[13]||(e[13]=n=>s.value="toggle-active")},{default:d(()=>[...e[54]||(e[54]=[o(" Désactiver le compte ",-1)])]),_:1})):i.user.is_active===!1&&s.value!=="toggle-active"?(l(),g(b,{key:7,class:"w-full justify-center bg-green-600 hover:bg-green-700",onClick:e[14]||(e[14]=n=>s.value="toggle-active")},{default:d(()=>[...e[55]||(e[55]=[o(" Réactiver le compte ",-1)])]),_:1})):s.value==="toggle-active"?(l(),a("div",Be,[t("p",Oe,u(i.user.is_active===!1?"Réactiver":"Désactiver")+" le compte ? ",1),t("div",Ue,[r(y,{class:"flex-1 justify-center",disabled:f.value,onClick:e[15]||(e[15]=n=>c("toggle-active","admin.users.toggle-active"))},{default:d(()=>[...e[56]||(e[56]=[o(" Oui ",-1)])]),_:1},8,["disabled"]),r(x,{class:"flex-1 justify-center",onClick:e[16]||(e[16]=n=>s.value=null)},{default:d(()=>[...e[57]||(e[57]=[o(" Non ",-1)])]),_:1})])])):m("",!0),s.value!=="delete"?(l(),g(y,{key:9,class:"w-full justify-center",onClick:e[17]||(e[17]=n=>s.value="delete")},{default:d(()=>[...e[58]||(e[58]=[o(" Supprimer le compte ",-1)])]),_:1})):s.value==="delete"?(l(),a("div",Ie,[e[61]||(e[61]=t("p",{class:"mb-2 text-sm text-red-300"},"Le compte sera désactivé mais récupérable.",-1)),t("div",Le,[r(y,{class:"flex-1 justify-center",disabled:f.value,onClick:F},{default:d(()=>[...e[59]||(e[59]=[o(" Supprimer ",-1)])]),_:1},8,["disabled"]),r(x,{class:"flex-1 justify-center",onClick:e[18]||(e[18]=n=>s.value=null)},{default:d(()=>[...e[60]||(e[60]=[o(" Annuler ",-1)])]),_:1})])])):m("",!0)],64))])])])])]}),_:1})],64))}};export{ze as default};
