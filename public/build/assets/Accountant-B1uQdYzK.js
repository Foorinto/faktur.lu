import{u as I,c as a,a as c,b as o,h as j,i as x,d as e,l as y,e as l,o as s,F as p,j as v,t as i,g as m,m as E,O as S,w as $,f as h,v as k,r as D,p as b}from"./app-B97I2Oxk.js";import{_ as V}from"./AppLayout-BV7HVWRJ.js";import"./ApplicationLogo-DwcnZXn5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-C30LA8Zs.js";import"./useTranslations-C4Y-NByF.js";const B={class:"mb-6 border-b border-gray-200 dark:border-gray-700"},F={class:"flex space-x-8","aria-label":"Settings tabs"},M={class:"space-y-6"},N={class:"flex items-center justify-between"},z={class:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden"},T={key:0,class:"px-6 py-8 text-center text-gray-500 dark:text-gray-400"},q={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},R={class:"flex items-center justify-between"},H={class:"text-sm font-medium text-gray-900 dark:text-white"},P={class:"text-sm text-gray-500 dark:text-gray-400"},U={class:"mt-1 flex items-center space-x-4 text-xs text-gray-400"},J={key:0},L=["onClick"],O={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden"},G={class:"divide-y divide-gray-200 dark:divide-gray-700"},K={class:"flex items-center justify-between"},Q={class:"text-sm font-medium text-gray-900 dark:text-white"},W={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},X={class:"text-xs text-gray-400 mt-1"},Y={class:"flex items-center space-x-2"},Z=["onClick"],ee=["onClick"],te={key:1,class:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden"},re={class:"divide-y divide-gray-200 dark:divide-gray-700"},se={class:"flex items-center justify-between"},ae={class:"text-sm text-gray-900 dark:text-white"},oe={class:"font-medium"},ie={class:"font-medium"},de={class:"text-xs text-gray-500 dark:text-gray-400"},ne={class:"text-xs text-gray-400"},le={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},me={class:"flex min-h-full items-center justify-center p-4"},ue={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"},ce={key:0,class:"mt-1 text-sm text-red-600"},xe={class:"flex justify-end space-x-3 pt-4"},ge=["disabled"],ye={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},we={__name:"Accountant",props:{accountants:Array,pendingInvitations:Array,recentDownloads:Array},setup(u){const g=D(!1),d=I({email:"",name:""}),w=()=>{d.post(route("settings.accountant.invite"),{preserveScroll:!0,onSuccess:()=>{g.value=!1,d.reset()}})},_=n=>{b.post(route("settings.accountant.resend",n),{},{preserveScroll:!0})},C=n=>{confirm("Annuler cette invitation ?")&&b.delete(route("settings.accountant.cancel",n),{preserveScroll:!0})},A=(n,t)=>{confirm(`Révoquer l'accès de ${t} ? Cette action est irréversible.`)&&b.delete(route("settings.accountant.revoke",n),{preserveScroll:!0})};return(n,t)=>(s(),a(p,null,[c(o(j),{title:"Accès Comptable"}),c(V,null,{header:x(()=>[...t[5]||(t[5]=[e("h1",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Paramètres ",-1)])]),default:x(()=>[e("div",B,[e("nav",F,[c(o(y),{href:n.route("settings.business.edit"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"},{default:x(()=>[...t[6]||(t[6]=[l(" Entreprise ",-1)])]),_:1},8,["href"]),c(o(y),{href:n.route("settings.email"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"},{default:x(()=>[...t[7]||(t[7]=[l(" Email ",-1)])]),_:1},8,["href"]),c(o(y),{href:n.route("settings.email.provider"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"},{default:x(()=>[...t[8]||(t[8]=[l(" Fournisseur Email ",-1)])]),_:1},8,["href"]),c(o(y),{href:n.route("settings.accountant"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-indigo-500 text-indigo-600 dark:text-indigo-400"},{default:x(()=>[...t[9]||(t[9]=[l(" Accès Comptable ",-1)])]),_:1},8,["href"])])]),e("div",M,[e("div",N,[t[11]||(t[11]=e("div",null,[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Accès Comptable"),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Invitez votre comptable à accéder à vos exports comptables. ")],-1)),e("button",{onClick:t[0]||(t[0]=r=>g.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-500"},[...t[10]||(t[10]=[e("svg",{class:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),l(" Inviter un comptable ",-1)])])]),e("div",z,[t[12]||(t[12]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-base font-medium text-gray-900 dark:text-white"},"Comptables actifs")],-1)),u.accountants.length===0?(s(),a("div",T," Aucun comptable n'a accès à vos données. ")):(s(),a("ul",q,[(s(!0),a(p,null,v(u.accountants,r=>(s(),a("li",{key:r.id,class:"px-6 py-4"},[e("div",R,[e("div",null,[e("p",H,i(r.name),1),e("p",P,i(r.email),1),e("div",U,[e("span",null,"Accès depuis : "+i(r.granted_at),1),r.last_download?(s(),a("span",J,"Dernier téléchargement : "+i(r.last_download),1)):m("",!0)])]),e("button",{onClick:f=>A(r.id,r.name),class:"text-sm text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"}," Révoquer ",8,L)])]))),128))]))]),u.pendingInvitations.length>0?(s(),a("div",O,[t[13]||(t[13]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-base font-medium text-gray-900 dark:text-white"},"Invitations en attente")],-1)),e("ul",G,[(s(!0),a(p,null,v(u.pendingInvitations,r=>(s(),a("li",{key:r.id,class:"px-6 py-4"},[e("div",K,[e("div",null,[e("p",Q,i(r.email),1),r.name?(s(),a("p",W,i(r.name),1)):m("",!0),e("p",X," Envoyée le "+i(r.created_at)+" - Expire le "+i(r.expires_at),1)]),e("div",Y,[e("button",{onClick:f=>_(r.id),class:"text-sm text-indigo-600 hover:text-indigo-800 dark:text-indigo-400"}," Renvoyer ",8,Z),e("button",{onClick:f=>C(r.id),class:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400"}," Annuler ",8,ee)])])]))),128))])])):m("",!0),u.recentDownloads.length>0?(s(),a("div",te,[t[15]||(t[15]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-base font-medium text-gray-900 dark:text-white"},"Téléchargements récents")],-1)),e("ul",re,[(s(!0),a(p,null,v(u.recentDownloads,r=>(s(),a("li",{key:r.id,class:"px-6 py-4"},[e("div",se,[e("div",null,[e("p",ae,[e("span",oe,i(r.accountant_name),1),t[14]||(t[14]=l(" a téléchargé ",-1)),e("span",ie,i(r.export_type_label),1)]),e("p",de," Période : "+i(r.period),1)]),e("span",ne,i(r.downloaded_at),1)])]))),128))])])):m("",!0)]),(s(),E(S,{to:"body"},[g.value?(s(),a("div",le,[e("div",me,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[1]||(t[1]=r=>g.value=!1)}),e("div",ue,[t[20]||(t[20]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," Inviter un comptable ",-1)),e("form",{onSubmit:$(w,["prevent"]),class:"space-y-4"},[e("div",null,[t[16]||(t[16]=e("label",{for:"invite_email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Email du comptable * ",-1)),h(e("input",{id:"invite_email","onUpdate:modelValue":t[2]||(t[2]=r=>o(d).email=r),type:"email",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"comptable@fiduciaire.lu"},null,512),[[k,o(d).email]]),o(d).errors.email?(s(),a("p",ce,i(o(d).errors.email),1)):m("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{for:"invite_name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Nom (optionnel) ",-1)),h(e("input",{id:"invite_name","onUpdate:modelValue":t[3]||(t[3]=r=>o(d).name=r),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"Jean Dupont"},null,512),[[k,o(d).name]])]),e("div",xe,[e("button",{type:"button",onClick:t[4]||(t[4]=r=>g.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900"}," Annuler "),e("button",{type:"submit",disabled:o(d).processing,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50"},[o(d).processing?(s(),a("svg",ye,[...t[18]||(t[18]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):m("",!0),t[19]||(t[19]=l(" Envoyer l'invitation ",-1))],8,ge)])],32)])])])):m("",!0)]))]),_:1})],64))}};export{we as default};
