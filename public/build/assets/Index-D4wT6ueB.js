import{r as v,p as g,y as D,c as a,a as n,b as u,h as S,i as d,d as t,t as i,f as b,v as $,k as _,o,F as c,j as y,x as C,g as w,l as h,m as z,e as B}from"./app-C2labef_.js";import{_ as N}from"./AdminLayout-BvLzLQ2F.js";import{_ as P}from"./PrimaryButton-B6YOPed5.js";import{_ as F}from"./SecondaryButton---4l9unO.js";import{d as O}from"./debounce-DWmwm3YJ.js";const U={class:"flex items-center justify-between"},R={class:"flex gap-2"},q={class:"mb-6 grid gap-4 sm:grid-cols-3"},E={class:"rounded-xl bg-slate-800 p-4"},I={class:"text-2xl font-bold text-white"},G={class:"rounded-xl bg-slate-800 p-4"},J={class:"text-2xl font-bold text-green-400"},K={class:"rounded-xl bg-slate-800 p-4"},Q={class:"text-2xl font-bold text-yellow-400"},W={class:"mb-6 flex flex-wrap gap-4"},X=["value"],Y={class:"rounded-xl bg-slate-800 overflow-hidden"},Z={class:"w-full text-left text-sm"},tt={class:"divide-y divide-slate-700"},et={class:"px-6 py-4"},st={class:"font-medium text-white"},lt={class:"text-xs text-slate-400"},ot={class:"px-6 py-4 text-slate-300"},at={class:"px-6 py-4"},rt={class:"px-6 py-4 text-slate-300"},it={class:"px-6 py-4 text-slate-300"},nt={class:"px-6 py-4"},dt={class:"flex justify-end gap-2"},ut=["href"],ct=["onClick"],pt=["onClick"],xt={key:0},ft={key:0,class:"mt-4 flex justify-center gap-1"},ht=["innerHTML"],wt={__name:"Index",props:{posts:Object,categories:Array,filters:Object,stats:Object},setup(r){const m=r,p=v(m.filters.search),x=v(m.filters.status),f=v(m.filters.category),M=O(()=>{g.get(route("admin.blog.index"),{search:p.value||void 0,status:x.value||void 0,category:f.value||void 0},{preserveState:!0,replace:!0})},300);D([p,x,f],M);const j=l=>{confirm(`Supprimer l'article "${l.title}" ?`)&&g.delete(route("admin.blog.destroy",l.id))},V=l=>{g.post(route("admin.blog.duplicate",l.id))},T=l=>({draft:"Brouillon",published:"Publié",archived:"Archivé"})[l]||l,L=l=>({draft:"bg-yellow-500/20 text-yellow-400",published:"bg-green-500/20 text-green-400",archived:"bg-slate-500/20 text-slate-400"})[l]||"",H=l=>l?new Date(l).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}):"-";return(l,e)=>(o(),a(c,null,[n(u(S),{title:"Blog - Articles"}),n(N,null,{header:d(()=>[t("div",U,[e[5]||(e[5]=t("h1",{class:"text-xl font-semibold text-white"},"Blog",-1)),t("div",R,[n(u(h),{href:l.route("admin.blog-categories.index")},{default:d(()=>[n(F,null,{default:d(()=>[...e[3]||(e[3]=[B("Catégories",-1)])]),_:1})]),_:1},8,["href"]),n(u(h),{href:l.route("admin.blog.create")},{default:d(()=>[n(P,null,{default:d(()=>[...e[4]||(e[4]=[B("Nouvel article",-1)])]),_:1})]),_:1},8,["href"])])])]),default:d(()=>[t("div",q,[t("div",E,[e[6]||(e[6]=t("p",{class:"text-sm text-slate-400"},"Total",-1)),t("p",I,i(r.stats.total),1)]),t("div",G,[e[7]||(e[7]=t("p",{class:"text-sm text-slate-400"},"Publiés",-1)),t("p",J,i(r.stats.published),1)]),t("div",K,[e[8]||(e[8]=t("p",{class:"text-sm text-slate-400"},"Brouillons",-1)),t("p",Q,i(r.stats.draft),1)])]),t("div",W,[b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s),type:"text",placeholder:"Rechercher...",class:"rounded-lg border-slate-600 bg-slate-700 px-4 py-2 text-white placeholder-slate-400 focus:border-purple-500 focus:ring-purple-500"},null,512),[[$,p.value]]),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),class:"rounded-lg border-slate-600 bg-slate-700 px-4 py-2 text-white focus:border-purple-500 focus:ring-purple-500"},[...e[9]||(e[9]=[t("option",{value:""},"Tous les statuts",-1),t("option",{value:"draft"},"Brouillon",-1),t("option",{value:"published"},"Publié",-1),t("option",{value:"archived"},"Archivé",-1)])],512),[[_,x.value]]),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s),class:"rounded-lg border-slate-600 bg-slate-700 px-4 py-2 text-white focus:border-purple-500 focus:ring-purple-500"},[e[10]||(e[10]=t("option",{value:""},"Toutes les catégories",-1)),(o(!0),a(c,null,y(r.categories,s=>(o(),a("option",{key:s.id,value:s.id},i(s.name),9,X))),128))],512),[[_,f.value]])]),t("div",Y,[t("table",Z,[e[16]||(e[16]=t("thead",{class:"border-b border-slate-700 text-slate-400"},[t("tr",null,[t("th",{class:"px-6 py-4 font-medium"},"Titre"),t("th",{class:"px-6 py-4 font-medium"},"Catégorie"),t("th",{class:"px-6 py-4 font-medium"},"Statut"),t("th",{class:"px-6 py-4 font-medium"},"Date"),t("th",{class:"px-6 py-4 font-medium"},"Vues"),t("th",{class:"px-6 py-4 font-medium text-right"},"Actions")])],-1)),t("tbody",tt,[(o(!0),a(c,null,y(r.posts.data,s=>{var k;return o(),a("tr",{key:s.id,class:"hover:bg-slate-700/50"},[t("td",et,[t("div",st,i(s.title),1),t("div",lt,"/blog/"+i(s.slug),1)]),t("td",ot,i(((k=s.category)==null?void 0:k.name)||"-"),1),t("td",at,[t("span",{class:C(["rounded-full px-2 py-1 text-xs font-medium",L(s.status)])},i(T(s.status)),3)]),t("td",rt,i(H(s.published_at||s.created_at)),1),t("td",it,i(s.views_count),1),t("td",nt,[t("div",dt,[s.status==="published"?(o(),a("a",{key:0,href:l.route("blog.show",s.slug),target:"_blank",class:"text-slate-400 hover:text-white",title:"Voir"},[...e[11]||(e[11]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,ut)):w("",!0),n(u(h),{href:l.route("admin.blog.edit",s.id),class:"text-slate-400 hover:text-white",title:"Modifier"},{default:d(()=>[...e[12]||(e[12]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["href"]),t("button",{onClick:A=>V(s),class:"text-slate-400 hover:text-white",title:"Dupliquer"},[...e[13]||(e[13]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])],8,ct),t("button",{onClick:A=>j(s),class:"text-red-400 hover:text-red-300",title:"Supprimer"},[...e[14]||(e[14]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,pt)])])])}),128)),r.posts.data.length===0?(o(),a("tr",xt,[...e[15]||(e[15]=[t("td",{colspan:"6",class:"px-6 py-12 text-center text-slate-400"}," Aucun article trouvé ",-1)])])):w("",!0)])])]),r.posts.links&&r.posts.links.length>3?(o(),a("div",ft,[(o(!0),a(c,null,y(r.posts.links,s=>(o(),a(c,{key:s.label},[s.url?(o(),z(u(h),{key:0,href:s.url,class:C(["px-3 py-2 rounded text-sm",s.active?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(o(),a("span",{key:1,class:"px-3 py-2 text-sm text-slate-500",innerHTML:s.label},null,8,ht))],64))),128))])):w("",!0)]),_:1})],64))}};export{wt as default};
