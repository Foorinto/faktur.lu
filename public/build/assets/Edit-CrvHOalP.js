import{u as T,r as S,c as d,a as o,b as l,h as j,i as f,d as t,w as D,f as p,v as x,k as w,e as k,t as v,o as u,g as h,F as _,j as y,x as L,s as $,l as A}from"./app-DMgr7XNs.js";import{_ as B}from"./AdminLayout-CSfri0ct.js";import{_ as E}from"./PrimaryButton-IXQw16mD.js";import{_ as n}from"./InputLabel-4l6zK3iC.js";import{_ as b}from"./TextInput-yqxvOxA3.js";import{_ as i}from"./InputError-BwWBTtZB.js";const F={class:"flex items-center gap-4"},I={class:"lg:col-span-2 space-y-6"},N={class:"rounded-xl bg-slate-800 p-6"},P={class:"mb-4"},O={class:"rounded-xl bg-slate-800 p-6"},R={class:"rounded-xl bg-slate-800 p-6"},q={class:"rounded-xl bg-slate-800 p-6"},z={class:"mb-4"},H={class:"space-y-6"},G={class:"rounded-xl bg-slate-800 p-6"},J={class:"mb-4"},K={class:"mb-4"},Q={class:"flex gap-2"},W=["href"],X={class:"rounded-xl bg-slate-800 p-6"},Y=["value"],Z={class:"rounded-xl bg-slate-800 p-6"},ee={class:"flex flex-wrap gap-2"},te=["value"],se={key:0,class:"text-sm text-slate-400"},le={class:"rounded-xl bg-slate-800 p-6"},oe={key:0,class:"mb-4"},ae=["src"],pe={__name:"Edit",props:{post:Object,categories:Array,tags:Array},setup(m){const r=m,s=T({title:r.post.title,slug:r.post.slug,excerpt:r.post.excerpt||"",content:r.post.content,category_id:r.post.category_id||"",cover_image:null,remove_cover:!1,meta_title:r.post.meta_title||"",meta_description:r.post.meta_description||"",status:r.post.status,published_at:r.post.published_at||"",tags:r.post.tags||[]}),c=S(r.post.cover_image_url),V=g=>{const e=g.target.files[0];e&&(s.cover_image=e,s.remove_cover=!1,c.value=URL.createObjectURL(e))},U=()=>{s.cover_image=null,s.remove_cover=!0,c.value=null},M=()=>{s.post(route("admin.blog.update",r.post.id),{forceFormData:!0,_method:"PUT"})};return(g,e)=>(u(),d(_,null,[o(l(j),{title:`Modifier - ${m.post.title}`},null,8,["title"]),o(B,null,{header:f(()=>[t("div",F,[o(l(A),{href:g.route("admin.blog.index"),class:"text-slate-400 hover:text-white"},{default:f(()=>[...e[10]||(e[10]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1},8,["href"]),e[11]||(e[11]=t("h1",{class:"text-xl font-semibold text-white"},"Modifier l'article",-1))])]),default:f(()=>[t("form",{onSubmit:D(M,["prevent"]),class:"grid gap-6 lg:grid-cols-3"},[t("div",I,[t("div",N,[t("div",P,[o(n,{for:"title",value:"Titre",class:"text-white"}),o(b,{id:"title",modelValue:l(s).title,"onUpdate:modelValue":e[0]||(e[0]=a=>l(s).title=a),type:"text",class:"mt-1 block w-full bg-slate-700 border-slate-600 text-white",required:""},null,8,["modelValue"]),o(i,{message:l(s).errors.title,class:"mt-2"},null,8,["message"])]),t("div",null,[o(n,{for:"slug",value:"Slug URL",class:"text-white"}),o(b,{id:"slug",modelValue:l(s).slug,"onUpdate:modelValue":e[1]||(e[1]=a=>l(s).slug=a),type:"text",class:"mt-1 block w-full bg-slate-700 border-slate-600 text-white"},null,8,["modelValue"]),o(i,{message:l(s).errors.slug,class:"mt-2"},null,8,["message"])])]),t("div",O,[o(n,{for:"excerpt",value:"Extrait (résumé)",class:"text-white"}),p(t("textarea",{id:"excerpt","onUpdate:modelValue":e[2]||(e[2]=a=>l(s).excerpt=a),rows:"3",class:"mt-1 block w-full rounded-lg border-slate-600 bg-slate-700 text-white placeholder-slate-400 focus:border-purple-500 focus:ring-purple-500",placeholder:"Court résumé pour la liste des articles..."},null,512),[[x,l(s).excerpt]]),o(i,{message:l(s).errors.excerpt,class:"mt-2"},null,8,["message"])]),t("div",R,[o(n,{for:"content",value:"Contenu (HTML)",class:"text-white"}),p(t("textarea",{id:"content","onUpdate:modelValue":e[3]||(e[3]=a=>l(s).content=a),rows:"20",class:"mt-1 block w-full rounded-lg border-slate-600 bg-slate-700 font-mono text-sm text-white placeholder-slate-400 focus:border-purple-500 focus:ring-purple-500",required:""},null,512),[[x,l(s).content]]),o(i,{message:l(s).errors.content,class:"mt-2"},null,8,["message"]),e[12]||(e[12]=t("p",{class:"mt-2 text-sm text-slate-400"}," Vous pouvez utiliser du HTML pour formater votre article. ",-1))]),t("div",q,[e[13]||(e[13]=t("h3",{class:"mb-4 text-lg font-semibold text-white"},"SEO",-1)),t("div",z,[o(n,{for:"meta_title",value:"Meta Title",class:"text-white"}),o(b,{id:"meta_title",modelValue:l(s).meta_title,"onUpdate:modelValue":e[4]||(e[4]=a=>l(s).meta_title=a),type:"text",class:"mt-1 block w-full bg-slate-700 border-slate-600 text-white",placeholder:"Titre pour les moteurs de recherche"},null,8,["modelValue"]),o(i,{message:l(s).errors.meta_title,class:"mt-2"},null,8,["message"])]),t("div",null,[o(n,{for:"meta_description",value:"Meta Description",class:"text-white"}),p(t("textarea",{id:"meta_description","onUpdate:modelValue":e[5]||(e[5]=a=>l(s).meta_description=a),rows:"2",class:"mt-1 block w-full rounded-lg border-slate-600 bg-slate-700 text-white placeholder-slate-400 focus:border-purple-500 focus:ring-purple-500",placeholder:"Description pour les moteurs de recherche (160 caractères max)"},null,512),[[x,l(s).meta_description]]),o(i,{message:l(s).errors.meta_description,class:"mt-2"},null,8,["message"])])])]),t("div",H,[t("div",G,[e[15]||(e[15]=t("h3",{class:"mb-4 text-lg font-semibold text-white"},"Publication",-1)),t("div",J,[o(n,{for:"status",value:"Statut",class:"text-white"}),p(t("select",{id:"status","onUpdate:modelValue":e[6]||(e[6]=a=>l(s).status=a),class:"mt-1 block w-full rounded-lg border-slate-600 bg-slate-700 text-white focus:border-purple-500 focus:ring-purple-500"},[...e[14]||(e[14]=[t("option",{value:"draft"},"Brouillon",-1),t("option",{value:"published"},"Publié",-1),t("option",{value:"archived"},"Archivé",-1)])],512),[[w,l(s).status]]),o(i,{message:l(s).errors.status,class:"mt-2"},null,8,["message"])]),t("div",K,[o(n,{for:"published_at",value:"Date de publication",class:"text-white"}),o(b,{id:"published_at",modelValue:l(s).published_at,"onUpdate:modelValue":e[7]||(e[7]=a=>l(s).published_at=a),type:"datetime-local",class:"mt-1 block w-full bg-slate-700 border-slate-600 text-white"},null,8,["modelValue"]),o(i,{message:l(s).errors.published_at,class:"mt-2"},null,8,["message"])]),t("div",Q,[o(E,{disabled:l(s).processing,class:"flex-1 justify-center"},{default:f(()=>[k(v(l(s).processing?"Enregistrement...":"Mettre à jour"),1)]),_:1},8,["disabled"])]),m.post.status==="published"?(u(),d("a",{key:0,href:g.route("blog.show",m.post.slug),target:"_blank",class:"mt-3 block text-center text-sm text-purple-400 hover:text-purple-300"}," Voir l'article ",8,W)):h("",!0)]),t("div",X,[e[17]||(e[17]=t("h3",{class:"mb-4 text-lg font-semibold text-white"},"Catégorie",-1)),p(t("select",{"onUpdate:modelValue":e[8]||(e[8]=a=>l(s).category_id=a),class:"block w-full rounded-lg border-slate-600 bg-slate-700 text-white focus:border-purple-500 focus:ring-purple-500"},[e[16]||(e[16]=t("option",{value:""},"Aucune catégorie",-1)),(u(!0),d(_,null,y(m.categories,a=>(u(),d("option",{key:a.id,value:a.id},v(a.name),9,Y))),128))],512),[[w,l(s).category_id]]),o(i,{message:l(s).errors.category_id,class:"mt-2"},null,8,["message"])]),t("div",Z,[e[18]||(e[18]=t("h3",{class:"mb-4 text-lg font-semibold text-white"},"Tags",-1)),t("div",ee,[(u(!0),d(_,null,y(m.tags,a=>(u(),d("label",{key:a.id,class:L(["cursor-pointer rounded-full px-3 py-1 text-sm transition-colors",l(s).tags.includes(a.id)?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"])},[p(t("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":e[9]||(e[9]=C=>l(s).tags=C),class:"sr-only"},null,8,te),[[$,l(s).tags]]),k(" "+v(a.name),1)],2))),128))]),m.tags.length===0?(u(),d("p",se," Aucun tag disponible ")):h("",!0),o(i,{message:l(s).errors.tags,class:"mt-2"},null,8,["message"])]),t("div",le,[e[19]||(e[19]=t("h3",{class:"mb-4 text-lg font-semibold text-white"},"Image de couverture",-1)),c.value?(u(),d("div",oe,[t("img",{src:c.value,alt:"Preview",class:"w-full rounded-lg"},null,8,ae),t("button",{type:"button",onClick:U,class:"mt-2 text-sm text-red-400 hover:text-red-300"}," Supprimer l'image ")])):h("",!0),t("input",{type:"file",accept:"image/*",onChange:V,class:"block w-full text-sm text-slate-400 file:mr-4 file:rounded-lg file:border-0 file:bg-purple-600 file:px-4 file:py-2 file:text-sm file:font-medium file:text-white hover:file:bg-purple-700"},null,32),o(i,{message:l(s).errors.cover_image,class:"mt-2"},null,8,["message"])])])],32)]),_:1})],64))}};export{pe as default};
