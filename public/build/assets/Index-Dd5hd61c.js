import{r as f,u as $,y as pe,K as he,z as X,c as d,a as q,b as t,h as be,i as H,d as e,o as i,t as o,e as z,w as L,f as m,F as g,j as V,k,v as y,g as h,x as Y,m as ve,l as G,s as _e,p as J,B as Z}from"./app-DeMmr3dH.js";import{_ as fe}from"./AppLayout-YeWmh-Qe.js";import{u as ge}from"./useTranslations-gT2Sr0D3.js";import"./DropdownLink-DQy6jH4Z.js";const ke={class:"flex items-center justify-between"},ye={class:"text-xl font-semibold text-slate-900 dark:text-white"},we={class:"mb-6 overflow-hidden rounded-2xl bg-gradient-to-r from-primary-500 to-purple-600 shadow-lg"},je={class:"px-6 py-5"},Ve={key:0,class:"flex items-center justify-between"},Se={class:"text-sm font-medium text-primary-100"},Ce={class:"mt-1 text-3xl font-bold text-white"},Me={class:"mt-1 text-sm text-primary-200"},Te=["disabled"],ze={key:0,class:"mr-2 h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none"},Ae={key:1,class:"mr-2 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},Ue={key:1},Fe={class:"mb-4 text-sm font-medium text-primary-100"},Ie={value:"",class:"text-slate-900"},Ee=["value"],Be=["placeholder"],De=["placeholder"],Re=["disabled"],$e={class:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-3"},qe={class:"overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800 px-4 py-5"},He={class:"truncate text-sm font-medium text-slate-500 dark:text-slate-400"},Le={class:"mt-1 text-2xl font-semibold text-slate-900 dark:text-white"},Oe={class:"overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800 px-4 py-5"},Ne={class:"truncate text-sm font-medium text-slate-500 dark:text-slate-400"},Ke={class:"mt-1 text-2xl font-semibold text-amber-600 dark:text-amber-400"},Ge={class:"overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800 px-4 py-5"},Je={class:"truncate text-sm font-medium text-slate-500 dark:text-slate-400"},Pe={class:"mt-1 text-2xl font-semibold text-primary-600 dark:text-primary-400"},Qe={class:"mb-6 overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800"},We={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},Xe={class:"text-sm font-medium text-slate-900 dark:text-white"},Ye={class:"grid grid-cols-1 gap-4 sm:grid-cols-6"},Ze={class:"sm:col-span-1"},et={class:"block text-xs font-medium text-slate-700 dark:text-slate-300"},tt={class:"sm:col-span-1"},st={class:"block text-xs font-medium text-slate-700 dark:text-slate-300"},lt={value:""},ot=["value"],at={class:"sm:col-span-1"},rt={class:"block text-xs font-medium text-slate-700 dark:text-slate-300"},it=["placeholder"],dt={class:"sm:col-span-1"},nt={class:"block text-xs font-medium text-slate-700 dark:text-slate-300"},ct={class:"sm:col-span-1"},ut={class:"block text-xs font-medium text-slate-700 dark:text-slate-300"},mt=["placeholder"],xt={class:"sm:col-span-1 flex items-end"},pt=["disabled"],ht={class:"mb-6 flex flex-wrap items-center justify-between gap-4"},bt={class:"flex flex-wrap gap-4"},vt={value:""},_t=["value"],ft={value:""},gt={value:"0"},kt={value:"1"},yt={value:""},wt=["value"],jt={class:"overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800"},Vt={class:"min-w-full divide-y divide-slate-200 dark:divide-slate-700"},St={class:"bg-slate-50 dark:bg-slate-700"},Ct={class:"py-3.5 pl-4 pr-3 sm:pl-6"},Mt=["checked"],Tt={class:"py-3.5 px-3 text-left text-sm font-semibold text-slate-900 dark:text-white"},zt={class:"px-3 py-3.5 text-left text-sm font-semibold text-slate-900 dark:text-white"},At={class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-slate-900 dark:text-white md:table-cell"},Ut={class:"px-3 py-3.5 text-right text-sm font-semibold text-slate-900 dark:text-white"},Ft={class:"hidden px-3 py-3.5 text-right text-sm font-semibold text-slate-900 dark:text-white lg:table-cell"},It={class:"px-3 py-3.5 text-center text-sm font-semibold text-slate-900 dark:text-white"},Et={class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},Bt={class:"sr-only"},Dt={class:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800"},Rt={key:0},$t={colspan:"8",class:"py-10 text-center text-sm text-slate-500 dark:text-slate-400"},qt={class:"mt-2"},Ht={class:"mt-1 text-xs"},Lt={class:"py-4 pl-4 pr-3 sm:pl-6"},Ot=["checked","onChange"],Nt={class:"whitespace-nowrap py-4 px-3 text-sm text-slate-500 dark:text-slate-400"},Kt={class:"text-xs"},Gt={class:"whitespace-nowrap px-3 py-4"},Jt={class:"font-medium text-slate-900 dark:text-white"},Pt={class:"text-sm text-slate-500 dark:text-slate-400"},Qt={class:"hidden px-3 py-4 text-sm text-slate-500 dark:text-slate-400 md:table-cell"},Wt={class:"truncate max-w-xs block"},Xt={class:"whitespace-nowrap px-3 py-4 text-right text-sm font-mono font-medium text-slate-900 dark:text-white"},Yt={class:"hidden whitespace-nowrap px-3 py-4 text-right text-sm text-slate-500 dark:text-slate-400 lg:table-cell"},Zt={class:"whitespace-nowrap px-3 py-4 text-center text-sm"},es={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},ts={key:0,class:"flex items-center justify-end gap-2"},ss=["onClick","title"],ls=["onClick","title"],os={key:0,class:"mt-6 flex items-center justify-between"},as={class:"text-sm text-slate-700 dark:text-slate-400"},rs={class:"isolate inline-flex -space-x-px rounded-xl shadow-sm"},is={key:1,class:"relative z-50"},ds={class:"fixed inset-0 z-50 overflow-y-auto"},ns={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},cs={class:"relative transform overflow-hidden rounded-2xl bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all dark:bg-slate-800 sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},us={class:"text-lg font-semibold text-slate-900 dark:text-white"},ms={class:"mt-2 text-sm text-slate-500 dark:text-slate-400"},xs={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},ps={class:"mt-1 relative rounded-xl shadow-sm"},hs={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},bs={key:1,class:"mt-1 block w-full rounded-xl border border-slate-300 bg-slate-100 px-3 py-2 text-slate-500 dark:border-slate-600 dark:bg-slate-600 dark:text-slate-400 sm:text-sm"},vs={class:"flex items-center"},_s={for:"group_by_project",class:"ml-2 block text-sm text-slate-700 dark:text-slate-300"},fs={class:"mt-6 flex justify-end space-x-3"},gs=["disabled"],ks={key:2,class:"relative z-50"},ys={class:"fixed inset-0 z-50 overflow-y-auto"},ws={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},js={class:"relative transform overflow-hidden rounded-2xl bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all dark:bg-slate-800 sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},Vs={class:"text-lg font-semibold text-slate-900 dark:text-white"},Ss={key:0,class:"mt-2 text-sm text-slate-500 dark:text-slate-400"},Cs={key:0,class:"rounded-xl bg-amber-50 p-4 dark:bg-amber-900/20"},Ms={class:"text-sm text-amber-800 dark:text-amber-200"},Ts={key:1},zs={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},As={value:""},Us=["value"],Fs={key:2,class:"grid grid-cols-2 gap-4"},Is={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},Es={class:"mt-1 relative rounded-xl shadow-sm"},Bs={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},Ds={key:1,class:"mt-1 block w-full rounded-xl border border-slate-300 bg-slate-100 px-3 py-2 text-slate-500 dark:border-slate-600 dark:bg-slate-600 dark:text-slate-400 sm:text-sm"},Rs={class:"mt-6 flex justify-end space-x-3"},$s=["disabled"],Ks={__name:"Index",props:{entries:Object,runningTimer:Object,summary:Object,filters:Object,clients:Array,periods:Array,draftInvoices:Array,defaultHourlyRate:[Number,String],isVatExempt:Boolean},setup(n){const{t:a}=ge(),c=n,O=c.isVatExempt?0:17,A=f(c.filters.client_id||""),U=f(c.filters.billed||""),F=f(c.filters.period||""),u=f([]),I=f(!1),E=f(!1),v=f(null),b=$({client_id:"",project_name:"",description:""}),x=$({client_id:"",project_name:"",description:"",date:new Date().toISOString().split("T")[0],duration:""}),_=$({time_entry_ids:[],hourly_rate:100,vat_rate:O,group_by_project:!0}),p=$({invoice_id:"",hourly_rate:"",vat_rate:O}),S=f(0),C=f(!1),ee=f(null);let w=null,B=null;const te=r=>{const s=r.target;s.style.height="auto",s.style.height=Math.min(s.scrollHeight,128)+"px"},P=()=>B?Math.floor((Date.now()-B)/1e3):0,N=()=>{w&&(clearInterval(w),w=null),c.runningTimer&&c.runningTimer.started_at&&(B=new Date(c.runningTimer.started_at).getTime(),S.value=P(),w=setInterval(()=>{S.value=P()},1e3))},K=()=>{w&&(clearInterval(w),w=null),B=null,S.value=0};pe(()=>{c.runningTimer&&N()}),he(()=>{K()}),X(()=>c.runningTimer,(r,s)=>{r&&!s?N():!r&&s?K():r&&s&&r.id!==s.id&&N()},{deep:!0});const se=Z(()=>{const r=Math.floor(S.value/3600),s=Math.floor(S.value%3600/60),j=S.value%60;return`${r}:${String(s).padStart(2,"0")}:${String(j).padStart(2,"0")}`});X([A,U,F],()=>{J.get(route("time-entries.index"),{client_id:A.value||void 0,billed:U.value||void 0,period:F.value||void 0},{preserveState:!0,replace:!0})});const le=()=>{b.processing||b.post(route("time-entries.start"),{preserveScroll:!0,onSuccess:()=>{b.reset()}})},oe=()=>{!c.runningTimer||C.value||(C.value=!0,J.post(route("time-entries.stop",c.runningTimer.id),{},{preserveScroll:!0,onSuccess:()=>{K()},onFinish:()=>{C.value=!1}}))},ae=()=>{x.post(route("time-entries.store"),{preserveScroll:!0,onSuccess:()=>{x.reset(),x.date=new Date().toISOString().split("T")[0]}})},re=r=>{confirm(a("delete_time_entry"))&&J.delete(route("time-entries.destroy",r.id),{preserveScroll:!0})},ie=r=>{const s=u.value.indexOf(r);s===-1?u.value.push(r):u.value.splice(s,1)},de=()=>{const r=c.entries.data.filter(s=>!s.is_billed);u.value.length===r.length?u.value=[]:u.value=r.map(s=>s.id)},ne=()=>{if(u.value.length===0){alert(a("select_at_least_one"));return}const r=c.entries.data.find(s=>s.id===u.value[0]);r&&r.client&&(_.hourly_rate=r.client.default_hourly_rate||100),I.value=!0},ce=()=>{_.time_entry_ids=u.value,_.post(route("time-entries.to-invoice"),{onSuccess:()=>{I.value=!1,u.value=[]}})},D=Z(()=>v.value?c.draftInvoices.filter(r=>r.client_id===v.value.client_id):[]),ue=r=>{v.value=r,p.reset(),p.vat_rate=O;const s=c.clients.find(M=>M.id===r.client_id);p.hourly_rate=r.hourly_rate||(s==null?void 0:s.default_hourly_rate)||c.defaultHourlyRate||0;const j=c.draftInvoices.filter(M=>M.client_id===r.client_id);j.length>0&&(p.invoice_id=j[0].id),E.value=!0},me=()=>{v.value&&p.post(route("time-entries.add-to-invoice",v.value.id),{onSuccess:()=>{E.value=!1,v.value=null}})},Q=r=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(r),xe=r=>r?new Date(r).toLocaleDateString("fr-FR"):"-",W=r=>r?new Date(r).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"-";return(r,s)=>(i(),d(g,null,[q(t(be),{title:t(a)("time_tracking")},null,8,["title"]),q(fe,null,{header:H(()=>[e("div",ke,[e("h1",ye,o(t(a)("time_tracking")),1),q(t(G),{href:r.route("time-entries.summary"),class:"inline-flex items-center rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},{default:H(()=>[s[19]||(s[19]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M15.5 2A1.5 1.5 0 0014 3.5v13a1.5 1.5 0 001.5 1.5h1a1.5 1.5 0 001.5-1.5v-13A1.5 1.5 0 0016.5 2h-1zM9.5 6A1.5 1.5 0 008 7.5v9A1.5 1.5 0 009.5 18h1a1.5 1.5 0 001.5-1.5v-9A1.5 1.5 0 0010.5 6h-1zM3.5 10A1.5 1.5 0 002 11.5v5A1.5 1.5 0 003.5 18h1A1.5 1.5 0 006 16.5v-5A1.5 1.5 0 004.5 10h-1z"})],-1)),z(" "+o(t(a)("reports")),1)]),_:1},8,["href"])])]),default:H(()=>{var j,M;return[e("div",we,[e("div",je,[n.runningTimer?(i(),d("div",Ve,[e("div",null,[e("p",Se,o(t(a)("running_timer")),1),e("p",Ce,o(se.value),1),e("p",Me,o((j=n.runningTimer.client)==null?void 0:j.name)+" - "+o(n.runningTimer.project_name||t(a)("no_project")),1)]),e("button",{onClick:oe,disabled:C.value,class:"inline-flex items-center rounded-full bg-white/20 px-6 py-3 text-sm font-semibold text-white backdrop-blur hover:bg-white/30 focus:outline-none focus:ring-2 focus:ring-white disabled:opacity-50 disabled:cursor-not-allowed"},[C.value?(i(),d("svg",ze,[...s[20]||(s[20]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(i(),d("svg",Ae,[...s[21]||(s[21]=[e("path",{"fill-rule":"evenodd",d:"M5.5 3.5A1.5 1.5 0 017 5v10a1.5 1.5 0 01-3 0V5a1.5 1.5 0 011.5-1.5zm8 0A1.5 1.5 0 0115 5v10a1.5 1.5 0 01-3 0V5a1.5 1.5 0 011.5-1.5z","clip-rule":"evenodd"},null,-1)])])),z(" "+o(C.value?t(a)("stopping"):t(a)("stop")),1)],8,Te)])):(i(),d("div",Ue,[e("p",Fe,o(t(a)("start_new_timer")),1),e("form",{onSubmit:L(le,["prevent"]),class:"flex flex-wrap gap-3"},[m(e("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>t(b).client_id=l),required:"",class:"rounded-xl border-0 bg-white/10 py-2 pl-3 pr-10 text-white placeholder-primary-200 backdrop-blur focus:ring-2 focus:ring-white sm:text-sm"},[e("option",Ie,o(t(a)("select_client")),1),(i(!0),d(g,null,V(n.clients,l=>(i(),d("option",{key:l.id,value:l.id,class:"text-slate-900"},o(l.name),9,Ee))),128))],512),[[k,t(b).client_id]]),m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>t(b).project_name=l),type:"text",placeholder:t(a)("project_name"),class:"rounded-xl border-0 bg-white/10 py-2 px-3 text-white placeholder-primary-200 backdrop-blur focus:ring-2 focus:ring-white sm:text-sm"},null,8,Be),[[y,t(b).project_name]]),m(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=l=>t(b).description=l),placeholder:`${t(a)("description")} (${t(a)("optional")})`,rows:"1",onInput:te,ref_key:"timerDescriptionRef",ref:ee,class:"flex-1 rounded-xl border-0 bg-white/10 py-2 px-3 text-white placeholder-primary-200 backdrop-blur focus:ring-2 focus:ring-white sm:text-sm resize-y min-h-[38px] max-h-32"},null,40,De),[[y,t(b).description]]),e("button",{type:"submit",disabled:t(b).processing||!t(b).client_id,class:"inline-flex items-center rounded-full bg-white px-6 py-2 text-sm font-semibold text-primary-600 shadow-sm hover:bg-primary-50 disabled:opacity-50"},[s[22]||(s[22]=e("svg",{class:"mr-2 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"})],-1)),z(" "+o(t(a)("start")),1)],8,Re)],32)]))])]),e("div",$e,[e("div",qe,[e("dt",He,o(t(a)("total_time")),1),e("dd",Le,o(n.summary.total_formatted),1)]),e("div",Oe,[e("dt",Ne,o(t(a)("unbilled")),1),e("dd",Ke,o(n.summary.unbilled_formatted),1)]),e("div",Ge,[e("dt",Je,o(t(a)("selected")),1),e("dd",Pe,o(u.value.length),1)])]),e("div",Qe,[e("div",We,[e("h3",Xe,o(t(a)("add_manual_entry")),1)]),e("form",{onSubmit:L(ae,["prevent"]),class:"px-6 py-4"},[e("div",Ye,[e("div",Ze,[e("label",et,o(t(a)("date")),1),m(e("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>t(x).date=l),type:"date",required:"",class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},null,512),[[y,t(x).date]])]),e("div",tt,[e("label",st,o(t(a)("client")),1),m(e("select",{"onUpdate:modelValue":s[4]||(s[4]=l=>t(x).client_id=l),required:"",class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},[e("option",lt,o(t(a)("select")),1),(i(!0),d(g,null,V(n.clients,l=>(i(),d("option",{key:l.id,value:l.id},o(l.name),9,ot))),128))],512),[[k,t(x).client_id]])]),e("div",at,[e("label",rt,o(t(a)("project")),1),m(e("input",{"onUpdate:modelValue":s[5]||(s[5]=l=>t(x).project_name=l),type:"text",placeholder:t(a)("project_name"),class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},null,8,it),[[y,t(x).project_name]])]),e("div",dt,[e("label",nt,o(t(a)("duration_hhmm")),1),m(e("input",{"onUpdate:modelValue":s[6]||(s[6]=l=>t(x).duration=l),type:"text",required:"",placeholder:"1:30",pattern:"\\d+:\\d{2}",class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},null,512),[[y,t(x).duration]])]),e("div",ct,[e("label",ut,o(t(a)("description")),1),m(e("input",{"onUpdate:modelValue":s[7]||(s[7]=l=>t(x).description=l),type:"text",placeholder:t(a)("description"),class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},null,8,mt),[[y,t(x).description]])]),e("div",xt,[e("button",{type:"submit",disabled:t(x).processing,class:"w-full inline-flex justify-center items-center rounded-xl bg-primary-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-500 disabled:opacity-50"},o(t(a)("add")),9,pt)])])],32)]),e("div",ht,[e("div",bt,[m(e("select",{"onUpdate:modelValue":s[8]||(s[8]=l=>A.value=l),class:"rounded-xl border-0 py-1.5 pl-3 pr-10 text-slate-900 ring-1 ring-inset ring-slate-300 focus:ring-2 focus:ring-primary-600 dark:bg-slate-800 dark:text-white dark:ring-slate-600 sm:text-sm"},[e("option",vt,o(t(a)("all_clients")),1),(i(!0),d(g,null,V(n.clients,l=>(i(),d("option",{key:l.id,value:l.id},o(l.name),9,_t))),128))],512),[[k,A.value]]),m(e("select",{"onUpdate:modelValue":s[9]||(s[9]=l=>U.value=l),class:"rounded-xl border-0 py-1.5 pl-3 pr-10 text-slate-900 ring-1 ring-inset ring-slate-300 focus:ring-2 focus:ring-primary-600 dark:bg-slate-800 dark:text-white dark:ring-slate-600 sm:text-sm"},[e("option",ft,o(t(a)("all_statuses")),1),e("option",gt,o(t(a)("unbilled")),1),e("option",kt,o(t(a)("billed")),1)],512),[[k,U.value]]),m(e("select",{"onUpdate:modelValue":s[10]||(s[10]=l=>F.value=l),class:"rounded-xl border-0 py-1.5 pl-3 pr-10 text-slate-900 ring-1 ring-inset ring-slate-300 focus:ring-2 focus:ring-primary-600 dark:bg-slate-800 dark:text-white dark:ring-slate-600 sm:text-sm"},[e("option",yt,o(t(a)("all_periods")),1),(i(!0),d(g,null,V(n.periods,l=>(i(),d("option",{key:l.value,value:l.value},o(l.label),9,wt))),128))],512),[[k,F.value]])]),u.value.length>0?(i(),d("button",{key:0,onClick:ne,class:"inline-flex items-center rounded-xl bg-green-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500"},[s[23]||(s[23]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm4.75 6.75a.75.75 0 011.5 0v2.546l.943-1.048a.75.75 0 011.114 1.004l-2.25 2.5a.75.75 0 01-1.114 0l-2.25-2.5a.75.75 0 111.114-1.004l.943 1.048V8.75z","clip-rule":"evenodd"})],-1)),z(" "+o(t(a)("convert_to_invoice"))+" ("+o(u.value.length)+") ",1)])):h("",!0)]),e("div",jt,[e("table",Vt,[e("thead",St,[e("tr",null,[e("th",Ct,[e("input",{type:"checkbox",checked:u.value.length>0&&u.value.length===n.entries.data.filter(l=>!l.is_billed).length,onChange:de,class:"h-4 w-4 rounded border-slate-300 text-primary-600 focus:ring-primary-500"},null,40,Mt)]),e("th",Tt,o(t(a)("date")),1),e("th",zt,o(t(a)("client_project")),1),e("th",At,o(t(a)("description")),1),e("th",Ut,o(t(a)("duration")),1),e("th",Ft,o(t(a)("amount")),1),e("th",It,o(t(a)("status")),1),e("th",Et,[e("span",Bt,o(t(a)("actions")),1)])])]),e("tbody",Dt,[n.entries.data.length===0?(i(),d("tr",Rt,[e("td",$t,[s[24]||(s[24]=e("svg",{class:"mx-auto h-12 w-12 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",qt,o(t(a)("no_time_entries")),1),e("p",Ht,o(t(a)("start_new_timer")),1)])])):h("",!0),(i(!0),d(g,null,V(n.entries.data,l=>{var T;return i(),d("tr",{key:l.id,class:"hover:bg-slate-50 dark:hover:bg-slate-700"},[e("td",Lt,[l.is_billed?h("",!0):(i(),d("input",{key:0,type:"checkbox",checked:u.value.includes(l.id),onChange:R=>ie(l.id),class:"h-4 w-4 rounded border-slate-300 text-primary-600 focus:ring-primary-500"},null,40,Ot))]),e("td",Nt,[e("div",null,o(xe(l.started_at)),1),e("div",Kt,o(W(l.started_at))+" - "+o(W(l.stopped_at)),1)]),e("td",Gt,[e("div",Jt,o(((T=l.client)==null?void 0:T.name)||t(a)("unknown_client")),1),e("div",Pt,o(l.project_name||t(a)("no_project")),1)]),e("td",Qt,[e("span",Wt,o(l.description||"-"),1)]),e("td",Xt,o(l.duration_formatted),1),e("td",Yt,o(l.amount?Q(l.amount):"-"),1),e("td",Zt,[e("span",{class:Y(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",l.is_billed?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"])},o(l.is_billed?t(a)("billed"):t(a)("unbilled")),3)]),e("td",es,[l.is_billed?h("",!0):(i(),d("div",ts,[n.draftInvoices.some(R=>R.client_id===l.client_id)?(i(),d("button",{key:0,onClick:R=>ue(l),class:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300",title:t(a)("add_to_invoice")},[...s[25]||(s[25]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1)])],8,ss)):h("",!0),e("button",{onClick:R=>re(l),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:t(a)("delete")},[...s[26]||(s[26]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.519.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z","clip-rule":"evenodd"})],-1)])],8,ls)]))])])}),128))])])]),n.entries.links&&n.entries.links.length>3?(i(),d("div",os,[e("div",as,o(t(a)("showing"))+" "+o(n.entries.from)+" "+o(t(a)("to"))+" "+o(n.entries.to)+" "+o(t(a)("of"))+" "+o(n.entries.total)+" "+o(t(a)("results")),1),e("nav",rs,[(i(!0),d(g,null,V(n.entries.links,(l,T)=>(i(),d(g,{key:T},[l.url?(i(),ve(t(G),{key:0,href:l.url,class:Y([l.active?"z-10 bg-primary-600 text-white":"text-slate-900 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 dark:text-slate-300 dark:ring-slate-600 dark:hover:bg-slate-700","relative inline-flex items-center px-4 py-2 text-sm font-semibold focus:z-20",T===0?"rounded-l-md":"",T===n.entries.links.length-1?"rounded-r-md":""]),innerHTML:l.label,"preserve-scroll":""},null,8,["href","class","innerHTML"])):h("",!0)],64))),128))])])):h("",!0),I.value?(i(),d("div",is,[s[29]||(s[29]=e("div",{class:"fixed inset-0 bg-slate-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",ds,[e("div",ns,[e("div",cs,[e("div",null,[e("h3",us,o(t(a)("convert_to_invoice")),1),e("p",ms,o(u.value.length)+" "+o(t(a)("selected")),1)]),e("form",{onSubmit:L(ce,["prevent"]),class:"mt-6 space-y-4"},[e("div",null,[e("label",xs,o(t(a)("hourly_rate")),1),e("div",ps,[m(e("input",{"onUpdate:modelValue":s[11]||(s[11]=l=>t(_).hourly_rate=l),type:"number",step:"0.01",min:"0",required:"",class:"block w-full rounded-xl border-slate-300 pr-12 focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},null,512),[[y,t(_).hourly_rate]]),s[27]||(s[27]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[e("span",{class:"text-slate-500 dark:text-slate-400 sm:text-sm"},"EUR/h")],-1))])]),e("div",null,[e("label",hs,o(t(a)("vat_rate")),1),n.isVatExempt?(i(),d("div",bs," 0% ")):m((i(),d("select",{key:0,"onUpdate:modelValue":s[12]||(s[12]=l=>t(_).vat_rate=l),class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},[...s[28]||(s[28]=[e("option",{value:0},"0%",-1),e("option",{value:3},"3%",-1),e("option",{value:8},"8%",-1),e("option",{value:14},"14%",-1),e("option",{value:17},"17%",-1)])],512)),[[k,t(_).vat_rate]])]),e("div",vs,[m(e("input",{"onUpdate:modelValue":s[13]||(s[13]=l=>t(_).group_by_project=l),type:"checkbox",id:"group_by_project",class:"h-4 w-4 rounded border-slate-300 text-primary-600 focus:ring-primary-500"},null,512),[[_e,t(_).group_by_project]]),e("label",_s,o(t(a)("group_by_project")),1)]),e("div",fs,[e("button",{type:"button",onClick:s[14]||(s[14]=l=>I.value=!1),class:"rounded-xl border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},o(t(a)("cancel")),1),e("button",{type:"submit",disabled:t(_).processing,class:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-500 disabled:opacity-50"},o(t(a)("create_invoice")),9,gs)])],32)])])])])):h("",!0),E.value?(i(),d("div",ks,[s[32]||(s[32]=e("div",{class:"fixed inset-0 bg-slate-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",ys,[e("div",ws,[e("div",js,[e("div",null,[e("h3",Vs,o(t(a)("add_to_invoice")),1),v.value?(i(),d("p",Ss,o((M=v.value.client)==null?void 0:M.name)+" - "+o(v.value.duration_formatted),1)):h("",!0)]),e("form",{onSubmit:L(me,["prevent"]),class:"mt-6 space-y-4"},[D.value.length===0?(i(),d("div",Cs,[e("p",Ms,o(t(a)("no_draft_invoice")),1),q(t(G),{href:r.route("invoices.create"),class:"mt-2 inline-flex text-sm font-medium text-amber-800 hover:text-amber-700 dark:text-amber-200"},{default:H(()=>[z(o(t(a)("create_new_invoice")),1)]),_:1},8,["href"])])):(i(),d("div",Ts,[e("label",zs,o(t(a)("invoice")),1),m(e("select",{"onUpdate:modelValue":s[15]||(s[15]=l=>t(p).invoice_id=l),required:"",class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},[e("option",As,o(t(a)("select")),1),(i(!0),d(g,null,V(D.value,l=>(i(),d("option",{key:l.id,value:l.id},o(l.title||l.display_number)+" - "+o(l.created_at)+" ("+o(Q(l.total_ht))+" "+o(t(a)("ht"))+") ",9,Us))),128))],512),[[k,t(p).invoice_id]])])),D.value.length>0?(i(),d("div",Fs,[e("div",null,[e("label",Is,o(t(a)("hourly_rate")),1),e("div",Es,[m(e("input",{"onUpdate:modelValue":s[16]||(s[16]=l=>t(p).hourly_rate=l),type:"number",step:"0.01",min:"0",required:"",class:"block w-full rounded-xl border-slate-300 pr-12 focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},null,512),[[y,t(p).hourly_rate]]),s[30]||(s[30]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[e("span",{class:"text-slate-500 dark:text-slate-400 sm:text-sm"},"â‚¬/h")],-1))])]),e("div",null,[e("label",Bs,o(t(a)("vat_rate")),1),n.isVatExempt?(i(),d("div",Ds," 0% ")):m((i(),d("select",{key:0,"onUpdate:modelValue":s[17]||(s[17]=l=>t(p).vat_rate=l),class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},[...s[31]||(s[31]=[e("option",{value:0},"0%",-1),e("option",{value:3},"3%",-1),e("option",{value:8},"8%",-1),e("option",{value:14},"14%",-1),e("option",{value:17},"17%",-1)])],512)),[[k,t(p).vat_rate]])])])):h("",!0),e("div",Rs,[e("button",{type:"button",onClick:s[18]||(s[18]=l=>{E.value=!1,v.value=null}),class:"rounded-xl border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},o(t(a)("cancel")),1),D.value.length>0?(i(),d("button",{key:0,type:"submit",disabled:t(p).processing||!t(p).invoice_id,class:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-500 disabled:opacity-50"},o(t(a)("add")),9,$s)):h("",!0)])],32)])])])])):h("",!0)]}),_:1})],64))}};export{Ks as default};
