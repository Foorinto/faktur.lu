import{u as U,c,a as n,b as t,h as C,i as m,d as e,l as h,e as p,t as l,w as S,f as o,v as b,s as k,o as x,F as g,j as z,x as y,g as w}from"./app-CEFOLa1I.js";import{_ as M}from"./AppLayout-B2flebT2.js";import{u as N}from"./useTranslations-D1Z83VQy.js";import"./DropdownLink-rVEdhqNI.js";const B={class:"text-xl font-semibold text-slate-900 dark:text-white"},F={class:"mb-6 border-b border-slate-200 dark:border-slate-700"},A={class:"flex space-x-8","aria-label":"Settings tabs"},E={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},L={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},R={class:"text-lg font-medium text-slate-900 dark:text-white"},T={class:"px-6 py-4 space-y-4"},D={for:"default_message",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},q={for:"signature",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},H={class:"flex items-center"},O={class:"ml-2 text-sm text-slate-700 dark:text-slate-300"},$={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},G={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},I={class:"flex items-center justify-between"},J={class:"flex items-center"},K={class:"ml-2 text-sm font-medium text-slate-700 dark:text-slate-300"},P={class:"px-6 py-4"},Q={class:"space-y-6"},W={class:"flex items-center justify-between mb-4"},X={class:"flex items-center space-x-3"},Y={class:"font-medium text-slate-900 dark:text-white"},Z={class:"flex items-center"},ee=["onUpdate:modelValue"],te={key:0,class:"space-y-4"},se={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},ae={class:"mt-1 flex items-center space-x-2"},re=["onUpdate:modelValue"],le={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},de=["onUpdate:modelValue"],oe={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},ie=["onUpdate:modelValue"],ne={class:"flex justify-end"},me=["disabled"],ue={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},fe={__name:"EmailSettings",props:{settings:Object},setup(v){const{t:r}=N(),u=v,d=U({default_message:u.settings.default_message||"",signature:u.settings.signature||"",send_copy_to_self:u.settings.send_copy_to_self||!1,reminders_enabled:u.settings.reminders_enabled||!1,reminder_levels:u.settings.reminder_levels||{}}),V=()=>{d.put(route("settings.email.update"),{preserveScroll:!0})},j={1:"Rappel",2:"Relance",3:"Mise en demeure"};return(f,s)=>(x(),c(g,null,[n(t(C),{title:t(r)("email_settings")},null,8,["title"]),n(M,null,{header:m(()=>[e("h1",B,l(t(r)("settings")),1)]),default:m(()=>[e("div",F,[e("nav",A,[n(t(h),{href:f.route("settings.business.edit"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:m(()=>[p(l(t(r)("business_settings")),1)]),_:1},8,["href"]),n(t(h),{href:f.route("settings.email"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-primary-500 text-primary-600 dark:text-primary-400"},{default:m(()=>[p(l(t(r)("email_settings")),1)]),_:1},8,["href"]),n(t(h),{href:f.route("settings.email.provider"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:m(()=>[...s[4]||(s[4]=[p(" Fournisseur Email ",-1)])]),_:1},8,["href"]),n(t(h),{href:f.route("settings.accountant"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:m(()=>[...s[5]||(s[5]=[p(" Accès Comptable ",-1)])]),_:1},8,["href"])])]),e("form",{onSubmit:S(V,["prevent"]),class:"space-y-6"},[e("div",E,[e("div",L,[e("h2",R,l(t(r)("default_email_message")),1),s[6]||(s[6]=e("p",{class:"mt-1 text-sm text-slate-500 dark:text-slate-400"}," Ce message sera utilisé par défaut lors de l'envoi de factures par email. ",-1))]),e("div",T,[e("div",null,[e("label",D,l(t(r)("message")),1),o(e("textarea",{id:"default_message","onUpdate:modelValue":s[0]||(s[0]=a=>t(d).default_message=a),rows:"4",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Laissez vide pour utiliser le message par défaut du système..."},null,512),[[b,t(d).default_message]])]),e("div",null,[e("label",q,l(t(r)("email_signature")),1),o(e("textarea",{id:"signature","onUpdate:modelValue":s[1]||(s[1]=a=>t(d).signature=a),rows:"3",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Signature qui sera ajoutée à vos emails..."},null,512),[[b,t(d).signature]])]),e("div",null,[e("label",H,[o(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=a=>t(d).send_copy_to_self=a),class:"h-4 w-4 text-primary-600 border-slate-300 rounded focus:ring-primary-500"},null,512),[[k,t(d).send_copy_to_self]]),e("span",O,l(t(r)("send_copy_to_self"))+" (par défaut) ",1)])])])]),e("div",$,[e("div",G,[e("div",I,[s[7]||(s[7]=e("div",null,[e("h2",{class:"text-lg font-medium text-slate-900 dark:text-white"},"Relances de paiement"),e("p",{class:"mt-1 text-sm text-slate-500 dark:text-slate-400"}," Configurez les modèles de relance pour les factures impayées. ")],-1)),e("label",J,[o(e("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=a=>t(d).reminders_enabled=a),class:"h-4 w-4 text-primary-600 border-slate-300 rounded focus:ring-primary-500"},null,512),[[k,t(d).reminders_enabled]]),e("span",K,l(t(r)("reminders_enabled")),1)])])]),e("div",P,[e("div",Q,[(x(!0),c(g,null,z(t(d).reminder_levels,(a,_)=>(x(),c("div",{key:_,class:y(["border rounded-xl p-4 dark:border-slate-600",a.enabled?"border-primary-200 bg-primary-50/50 dark:border-primary-700 dark:bg-primary-900/20":"border-slate-200"])},[e("div",W,[e("div",X,[e("span",{class:y(["flex items-center justify-center w-8 h-8 rounded-xl text-sm font-bold",_==3?"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300":"bg-amber-100 text-amber-700 dark:bg-amber-900 dark:text-amber-300"])},l(_),3),e("h3",Y,l(j[_]),1)]),e("label",Z,[o(e("input",{type:"checkbox","onUpdate:modelValue":i=>a.enabled=i,class:"h-4 w-4 text-primary-600 border-slate-300 rounded focus:ring-primary-500"},null,8,ee),[[k,a.enabled]]),s[8]||(s[8]=e("span",{class:"ml-2 text-sm text-slate-700 dark:text-slate-300"},"Activé",-1))])]),a.enabled?(x(),c("div",te,[e("div",null,[e("label",se,l(t(r)("reminder_days_after_due")),1),e("div",ae,[o(e("input",{type:"number","onUpdate:modelValue":i=>a.days_after_due=i,min:"1",max:"365",class:"w-20 rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},null,8,re),[[b,a.days_after_due,void 0,{number:!0}]]),s[9]||(s[9]=e("span",{class:"text-sm text-slate-500 dark:text-slate-400"},"jours",-1))])]),e("div",null,[e("label",le,l(t(r)("subject")),1),o(e("input",{type:"text","onUpdate:modelValue":i=>a.subject=i,class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},null,8,de),[[b,a.subject]]),s[10]||(s[10]=e("p",{class:"mt-1 text-xs text-slate-500 dark:text-slate-400"}," Variables: {numero}, {client_nom}, {montant}, {date_echeance} ",-1))]),e("div",null,[e("label",oe,l(t(r)("message")),1),o(e("textarea",{"onUpdate:modelValue":i=>a.body=i,rows:"4",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},null,8,ie),[[b,a.body]]),s[11]||(s[11]=e("p",{class:"mt-1 text-xs text-slate-500 dark:text-slate-400"}," Variables: {numero}, {client_nom}, {montant}, {date_echeance}, {jours_retard}, {entreprise} ",-1))])])):w("",!0)],2))),128))])])]),e("div",ne,[e("button",{type:"submit",disabled:t(d).processing,class:"inline-flex items-center rounded-xl bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-500 disabled:opacity-50"},[t(d).processing?(x(),c("svg",ue,[...s[12]||(s[12]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):w("",!0),p(" "+l(t(d).processing?t(r)("saving"):t(r)("save")),1)],8,me)])],32)]),_:1})],64))}};export{fe as default};
