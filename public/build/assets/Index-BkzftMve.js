import{r as g,p as j,B as _,c as a,a as h,b as y,h as F,i as w,d as e,t as o,f as b,v as O,o as i,F as n,j as u,k,g as C,x as v,l as z,m as D}from"./app-BKH9vAec.js";import{_ as q}from"./AdminLayout-BuRDr_iO.js";import{d as L}from"./debounce-2jWIa8I3.js";const U={class:"mb-6 grid grid-cols-2 gap-4 md:grid-cols-4"},H={class:"rounded-xl bg-slate-800 p-4 border border-slate-700"},N={class:"text-2xl font-bold text-purple-400"},R={class:"rounded-xl bg-slate-800 p-4 border border-slate-700"},$={class:"text-2xl font-bold text-blue-400"},E={class:"rounded-xl bg-slate-800 p-4 border border-slate-700"},I={class:"text-2xl font-bold text-orange-400"},P={class:"rounded-xl bg-slate-800 p-4 border border-slate-700"},G={class:"text-2xl font-bold text-emerald-400"},J={class:"mb-6 flex flex-wrap gap-4"},K={class:"relative flex-1 min-w-[200px]"},Q=["value"],W=["value"],X=["value"],Y={class:"overflow-hidden rounded-xl bg-slate-800 border border-slate-700"},Z={class:"min-w-full divide-y divide-slate-700"},ee={class:"divide-y divide-slate-700"},te={key:0},se={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-white sm:pl-6"},le={class:"whitespace-nowrap px-3 py-4 text-sm"},oe={class:"text-white"},re={class:"text-slate-400 text-xs"},ie={class:"px-3 py-4 text-sm text-white max-w-[200px] truncate"},ae={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-slate-300 md:table-cell"},de={class:"whitespace-nowrap px-3 py-4 text-sm"},ne={class:"whitespace-nowrap px-3 py-4 text-sm"},ue={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-slate-300 lg:table-cell"},ce={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},pe={class:"flex items-center justify-end gap-2"},xe=["onClick"],me={key:0,class:"mt-6 flex items-center justify-between"},fe={class:"text-sm text-slate-400"},ge={class:"isolate inline-flex -space-x-px rounded-lg shadow-sm"},be=["innerHTML"],ke={__name:"Index",props:{tickets:{type:Object,required:!0},stats:{type:Object,required:!0},filters:{type:Object,default:()=>({})},categories:{type:Object,required:!0},statuses:{type:Object,required:!0},priorities:{type:Object,required:!0}},setup(l){const c=l,p=g(c.filters.search||""),x=g(c.filters.status||""),m=g(c.filters.category||""),f=g(c.filters.priority||""),A=L(()=>{j.get(route("admin.support.index"),{search:p.value||void 0,status:x.value||void 0,category:m.value||void 0,priority:f.value||void 0},{preserveState:!0,replace:!0})},300);_([p,x,m,f],A);const B=d=>{const t={new:"bg-purple-100 text-purple-700",open:"bg-blue-100 text-blue-700",in_progress:"bg-yellow-100 text-yellow-700",waiting:"bg-orange-100 text-orange-700",resolved:"bg-emerald-100 text-emerald-700",closed:"bg-slate-100 text-slate-700"};return t[d]||t.closed},T=d=>{const t={urgent:"bg-red-100 text-red-700",high:"bg-orange-100 text-orange-700",normal:"bg-blue-100 text-blue-700",low:"bg-slate-100 text-slate-700"};return t[d]||t.normal},V=d=>{const t=new Date(d);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)},S=d=>{confirm(`Êtes-vous sûr de vouloir supprimer le ticket ${d.reference} ? Cette action est irréversible.`)&&j.delete(route("admin.support.destroy",d.id))};return(d,t)=>(i(),a(n,null,[h(y(F),{title:"Support - Admin"}),h(q,null,{header:w(()=>[...t[4]||(t[4]=[e("h1",{class:"text-xl font-semibold text-white"},"Support",-1)])]),default:w(()=>[e("div",U,[e("div",H,[e("div",N,o(l.stats.new),1),t[5]||(t[5]=e("div",{class:"text-sm text-slate-400"},"Nouveaux",-1))]),e("div",R,[e("div",$,o(l.stats.open),1),t[6]||(t[6]=e("div",{class:"text-sm text-slate-400"},"Ouverts",-1))]),e("div",E,[e("div",I,o(l.stats.waiting),1),t[7]||(t[7]=e("div",{class:"text-sm text-slate-400"},"En attente",-1))]),e("div",P,[e("div",G,o(l.stats.resolved_today),1),t[8]||(t[8]=e("div",{class:"text-sm text-slate-400"},"Résolus aujourd'hui",-1))])]),e("div",J,[e("div",K,[t[9]||(t[9]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"h-5 w-5 text-slate-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})])],-1)),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),type:"text",placeholder:"Rechercher (réf., sujet, email)...",class:"block w-full rounded-lg border-0 bg-slate-700 py-2 pl-10 pr-3 text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-500 sm:text-sm"},null,512),[[O,p.value]])]),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),class:"rounded-lg border-0 bg-slate-700 py-2 pl-3 pr-10 text-white focus:ring-2 focus:ring-purple-500 sm:text-sm"},[t[10]||(t[10]=e("option",{value:""},"Tous les statuts",-1)),(i(!0),a(n,null,u(l.statuses,(s,r)=>(i(),a("option",{key:r,value:r},o(s),9,Q))),128))],512),[[k,x.value]]),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),class:"rounded-lg border-0 bg-slate-700 py-2 pl-3 pr-10 text-white focus:ring-2 focus:ring-purple-500 sm:text-sm"},[t[11]||(t[11]=e("option",{value:""},"Toutes catégories",-1)),(i(!0),a(n,null,u(l.categories,(s,r)=>(i(),a("option",{key:r,value:r},o(s),9,W))),128))],512),[[k,m.value]]),b(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),class:"rounded-lg border-0 bg-slate-700 py-2 pl-3 pr-10 text-white focus:ring-2 focus:ring-purple-500 sm:text-sm"},[t[12]||(t[12]=e("option",{value:""},"Toutes priorités",-1)),(i(!0),a(n,null,u(l.priorities,(s,r)=>(i(),a("option",{key:r,value:r},o(s),9,X))),128))],512),[[k,f.value]])]),e("div",Y,[e("table",Z,[t[16]||(t[16]=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-white sm:pl-6"}," Réf. "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-white"}," Utilisateur "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-white"}," Sujet "),e("th",{scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-white md:table-cell"}," Catégorie "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-white"}," Priorité "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-white"}," Statut "),e("th",{scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-white lg:table-cell"}," Date "),e("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",ee,[l.tickets.data.length===0?(i(),a("tr",te,[...t[13]||(t[13]=[e("td",{colspan:"8",class:"py-10 text-center text-sm text-slate-400"}," Aucun ticket trouvé. ",-1)])])):C("",!0),(i(!0),a(n,null,u(l.tickets.data,s=>{var r,M;return i(),a("tr",{key:s.id,class:"hover:bg-slate-700/50"},[e("td",se,o(s.reference),1),e("td",le,[e("div",oe,o(((r=s.user)==null?void 0:r.name)||"-"),1),e("div",re,o((M=s.user)==null?void 0:M.email),1)]),e("td",ie,o(s.subject),1),e("td",ae,o(l.categories[s.category]),1),e("td",de,[e("span",{class:v([T(s.priority),"inline-flex items-center rounded-lg px-2 py-0.5 text-xs font-medium"])},o(l.priorities[s.priority]),3)]),e("td",ne,[e("span",{class:v([B(s.status),"inline-flex items-center rounded-lg px-2 py-0.5 text-xs font-medium"])},o(l.statuses[s.status]),3)]),e("td",ue,o(V(s.created_at)),1),e("td",ce,[e("div",pe,[h(y(z),{href:d.route("admin.support.show",s.id),class:"rounded-lg p-1.5 text-purple-400 hover:bg-slate-700 hover:text-purple-300",title:"Voir le ticket"},{default:w(()=>[...t[14]||(t[14]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"}),e("path",{"fill-rule":"evenodd",d:"M.664 10.59a1.651 1.651 0 010-1.186A10.004 10.004 0 0110 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0110 17c-4.257 0-7.893-2.66-9.336-6.41zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"]),e("button",{type:"button",onClick:ve=>S(s),class:"rounded-lg p-1.5 text-red-400 hover:bg-slate-700 hover:text-red-300",title:"Supprimer le ticket"},[...t[15]||(t[15]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.519.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z","clip-rule":"evenodd"})],-1)])],8,xe)])])])}),128))])])]),l.tickets.links&&l.tickets.links.length>3?(i(),a("div",me,[e("div",fe," Affichage "+o(l.tickets.from)+" à "+o(l.tickets.to)+" sur "+o(l.tickets.total)+" tickets ",1),e("nav",ge,[(i(!0),a(n,null,u(l.tickets.links,(s,r)=>(i(),a(n,{key:r},[s.url?(i(),D(y(z),{key:0,href:s.url,class:v([s.active?"z-10 bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600","relative inline-flex items-center px-4 py-2 text-sm font-semibold border border-slate-600 focus:z-20",r===0?"rounded-l-lg":"",r===l.tickets.links.length-1?"rounded-r-lg":""]),innerHTML:s.label,"preserve-scroll":""},null,8,["href","class","innerHTML"])):(i(),a("span",{key:1,class:v(["relative inline-flex items-center px-4 py-2 text-sm font-semibold text-slate-500 bg-slate-800 border border-slate-600",r===0?"rounded-l-lg":"",r===l.tickets.links.length-1?"rounded-r-lg":""]),innerHTML:s.label},null,10,be))],64))),128))])])):C("",!0)]),_:1})],64))}};export{ke as default};
