import{e as q,c as l,a,u as s,h as A,w as y,b as e,f as B,q as u,o as n,F as p,r as v,t as f,v as h,B as m,d as N,g as w,s as V}from"./app-B2KrZOCa.js";import{_ as E}from"./AppLayout-CMhKAyAT.js";import{_ as g,a as k}from"./InputError-CsSOzQ1V.js";import{P as M}from"./PrimaryButton-DZCmMAEy.js";import"./ApplicationLogo-CBvPJGvQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-Dw9Qk6Ag.js";const T={class:"flex items-center space-x-4"},S={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},j={class:"px-6 py-4"},D={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},I=["value"],P={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},R={class:"px-6 py-4"},z={class:"space-y-4"},F={class:"space-y-3"},H={class:"flex-1"},L=["id","onUpdate:modelValue"],Q={class:"flex-1"},G=["id","onUpdate:modelValue"],J={class:"flex flex-wrap gap-4 items-end"},K={class:"w-24"},O=["id","onUpdate:modelValue"],W={class:"w-32"},X=["id","onUpdate:modelValue"],Y=["value"],Z={class:"w-32"},ee=["id","onUpdate:modelValue"],te={class:"w-32"},re=["id","onUpdate:modelValue"],oe=["value"],de={key:1,class:"mt-1 block w-full rounded-md border border-gray-300 bg-gray-100 px-3 py-2 text-gray-500 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400"},ae=["onClick"],se={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},ie={class:"px-6 py-4"},le={class:"flex justify-end space-x-3"},ne={key:0},ue={key:1},fe={__name:"Create",props:{clients:Array,vatRates:Array,units:Array,defaultClientId:[String,Number],isVatExempt:Boolean},setup(c){const _=c,U=_.isVatExempt?0:17,d=q({client_id:_.defaultClientId||"",valid_until:"",notes:"",currency:"EUR",items:[]}),x=()=>{d.items.push({title:"",description:"",quantity:1,unit:"hour",unit_price:0,vat_rate:U})},C=b=>{d.items.splice(b,1)},$=()=>{d.post(route("quotes.store"))};return d.items.length===0&&x(),(b,t)=>(n(),l(p,null,[a(s(A),{title:"Nouveau devis"}),a(E,null,{header:y(()=>[e("div",T,[a(s(V),{href:b.route("quotes.index"),class:"text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400"},{default:y(()=>[...t[3]||(t[3]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"]),t[4]||(t[4]=e("h1",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Nouveau devis ",-1))])]),default:y(()=>[e("form",{onSubmit:B($,["prevent"]),class:"space-y-6"},[e("div",S,[t[7]||(t[7]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Client")],-1)),e("div",j,[e("div",D,[e("div",null,[a(g,{for:"client_id",value:"Client"}),u(e("select",{id:"client_id","onUpdate:modelValue":t[0]||(t[0]=r=>s(d).client_id=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[t[5]||(t[5]=e("option",{value:""},"Sélectionner un client",-1)),(n(!0),l(p,null,v(c.clients,r=>(n(),l("option",{key:r.id,value:r.id},f(r.name),9,I))),128))],512),[[h,s(d).client_id]]),a(k,{message:s(d).errors.client_id,class:"mt-2"},null,8,["message"])]),e("div",null,[a(g,{for:"valid_until",value:"Valide jusqu'au (optionnel)"}),u(e("input",{id:"valid_until","onUpdate:modelValue":t[1]||(t[1]=r=>s(d).valid_until=r),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,512),[[m,s(d).valid_until]]),t[6]||(t[6]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Par défaut: 30 jours ",-1)),a(k,{message:s(d).errors.valid_until,class:"mt-2"},null,8,["message"])])])])]),e("div",P,[t[11]||(t[11]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Lignes du devis")],-1)),e("div",R,[e("div",z,[(n(!0),l(p,null,v(s(d).items,(r,i)=>(n(),l("div",{key:i,class:"p-4 rounded-lg border border-gray-200 dark:border-gray-700"},[e("div",F,[e("div",H,[a(g,{for:`item-${i}-title`,value:"Titre"},null,8,["for"]),u(e("input",{id:`item-${i}-title`,"onUpdate:modelValue":o=>r.title=o,type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"Titre de la prestation",required:""},null,8,L),[[m,r.title]])]),e("div",Q,[a(g,{for:`item-${i}-description`,value:"Description (optionnel)"},null,8,["for"]),u(e("textarea",{id:`item-${i}-description`,"onUpdate:modelValue":o=>r.description=o,rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"Description détaillée de la prestation..."},null,8,G),[[m,r.description]])]),e("div",J,[e("div",K,[a(g,{for:`item-${i}-quantity`,value:"Qté"},null,8,["for"]),u(e("input",{id:`item-${i}-quantity`,"onUpdate:modelValue":o=>r.quantity=o,type:"number",step:"0.01",min:"0.01",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},null,8,O),[[m,r.quantity,void 0,{number:!0}]])]),e("div",W,[a(g,{for:`item-${i}-unit`,value:"Unité"},null,8,["for"]),u(e("select",{id:`item-${i}-unit`,"onUpdate:modelValue":o=>r.unit=o,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},[t[8]||(t[8]=e("option",{value:""},"-",-1)),(n(!0),l(p,null,v(c.units,o=>(n(),l("option",{key:o.value,value:o.value},f(o.label),9,Y))),128))],8,X),[[h,r.unit]])]),e("div",Z,[a(g,{for:`item-${i}-unit_price`,value:"Prix HT"},null,8,["for"]),u(e("input",{id:`item-${i}-unit_price`,"onUpdate:modelValue":o=>r.unit_price=o,type:"number",step:"0.01",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},null,8,ee),[[m,r.unit_price,void 0,{number:!0}]])]),e("div",te,[a(g,{for:`item-${i}-vat_rate`,value:"TVA"},null,8,["for"]),c.isVatExempt?(n(),l("div",de," 0% (Exonéré) ")):u((n(),l("select",{key:0,id:`item-${i}-vat_rate`,"onUpdate:modelValue":o=>r.vat_rate=o,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[(n(!0),l(p,null,v(c.vatRates,o=>(n(),l("option",{key:o.value,value:o.value},f(o.label),9,oe))),128))],8,re)),[[h,r.vat_rate,void 0,{number:!0}]])]),s(d).items.length>1?(n(),l("button",{key:0,type:"button",onClick:o=>C(i),class:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"},[...t[9]||(t[9]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.519.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5z","clip-rule":"evenodd"})],-1)])],8,ae)):N("",!0)])])]))),128)),e("button",{type:"button",onClick:x,class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},[...t[10]||(t[10]=[e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1),w(" Ajouter une ligne ",-1)])])])])]),e("div",se,[t[12]||(t[12]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Notes (optionnel)")],-1)),e("div",ie,[u(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=r=>s(d).notes=r),rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"Conditions particulières ou notes..."},null,512),[[m,s(d).notes]]),a(k,{message:s(d).errors.notes,class:"mt-2"},null,8,["message"])])]),e("div",le,[a(s(V),{href:b.route("quotes.index"),class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},{default:y(()=>[...t[13]||(t[13]=[w(" Annuler ",-1)])]),_:1},8,["href"]),a(M,{disabled:s(d).processing},{default:y(()=>[s(d).processing?(n(),l("span",ne,"Création...")):(n(),l("span",ue,"Créer le devis"))]),_:1},8,["disabled"])])],32)]),_:1})],64))}};export{fe as default};
