import{y as N,c as n,F as M,j as S,d as e,x as k,t as l,a as V,i as j,o as d,C as D,g as w,b as i,l as L,e as z,r as T,z as Y,B as q,p as E,h as K,f as R,v as J,k as P,s as Q,m as U}from"./app-rTfYLjgK.js";import{_ as X}from"./AppLayout-CRca6faH.js";import{u as G}from"./useTranslations-DP15yfu4.js";import{d as Z}from"./debounce-CPLMtCL2.js";import{d as ee}from"./vuedraggable.umd-D_5cyIl7.js";import"./DropdownLink-4Hcin3gK.js";const te={class:"flex gap-4 overflow-x-auto pb-4"},se={class:"flex items-center justify-between"},le={class:"rounded-full bg-white/50 px-2 py-0.5 text-xs font-medium text-slate-600 dark:bg-slate-800/50 dark:text-slate-400"},ae={class:"rounded-xl bg-white p-4 shadow-sm cursor-move border border-slate-200 hover:shadow-md transition-shadow dark:bg-slate-800 dark:border-slate-700"},re={class:"flex items-start gap-3"},oe={class:"flex-1 min-w-0"},de={key:0,class:"mt-1 text-sm text-slate-500 dark:text-slate-400 truncate"},ne={class:"mt-3 flex flex-wrap items-center gap-2 text-xs"},ie={key:1,class:"inline-flex items-center gap-1 rounded-lg bg-slate-100 px-2 py-0.5 text-slate-600 dark:bg-slate-700 dark:text-slate-400"},ue={key:1,class:"mt-3"},ce={class:"flex items-center gap-2"},xe={class:"h-1.5 flex-1 overflow-hidden rounded-full bg-slate-200 dark:bg-slate-600"},he={class:"text-xs text-slate-500 dark:text-slate-400"},ve={__name:"KanbanBoard",props:{items:{type:Array,required:!0},statuses:{type:Object,required:!0},itemType:{type:String,default:"project"}},emits:["reorder"],setup(m,{emit:c}){const x=m,g=c,f=T({});N(()=>x.items,()=>{const p={};Object.keys(x.statuses).forEach(h=>{p[h]=x.items.filter(_=>_.status===h)}),f.value=p},{immediate:!0,deep:!0});const A=p=>{const h={backlog:"bg-slate-100 dark:bg-slate-700",next:"bg-blue-50 dark:bg-blue-900/20",in_progress:"bg-yellow-50 dark:bg-yellow-900/20",waiting_for:"bg-orange-50 dark:bg-orange-900/20",done:"bg-emerald-50 dark:bg-emerald-900/20"};return h[p]||h.backlog},B=p=>{const h={backlog:"text-slate-600 dark:text-slate-400",next:"text-blue-600 dark:text-blue-400",in_progress:"text-yellow-600 dark:text-yellow-400",waiting_for:"text-orange-600 dark:text-orange-400",done:"text-emerald-600 dark:text-emerald-400"};return h[p]||h.backlog},y=p=>{if(!p)return"0h";const h=Math.floor(p/3600),_=Math.floor(p%3600/60);return _===0?`${h}h`:`${h}h${_.toString().padStart(2,"0")}`},O=()=>{const p=[];let h=0;Object.keys(f.value).forEach(_=>{f.value[_].forEach(b=>{p.push({id:b.id,sort_order:h++,status:_})})}),g("reorder",p)};return(p,h)=>(d(),n("div",te,[(d(!0),n(M,null,S(m.statuses,(_,b)=>{var I;return d(),n("div",{key:b,class:"flex-shrink-0 w-72"},[e("div",{class:k(["rounded-t-xl p-3",A(b)])},[e("div",se,[e("h3",{class:k(["text-sm font-semibold",B(b)])},l(_),3),e("span",le,l(((I=f.value[b])==null?void 0:I.length)||0),1)])],2),V(i(ee),{modelValue:f.value[b],"onUpdate:modelValue":o=>f.value[b]=o,group:"kanban","item-key":"id",onEnd:O,class:k(["min-h-[200px] space-y-3 rounded-b-xl p-3",A(b)])},{item:j(({element:o})=>[e("div",ae,[e("div",re,[o.color?(d(),n("div",{key:0,class:"mt-1 h-3 w-3 shrink-0 rounded-full",style:D({backgroundColor:o.color})},null,4)):w("",!0),e("div",oe,[V(i(L),{href:p.route(m.itemType==="project"?"projects.show":"tasks.show",o.id),class:"font-medium text-slate-900 hover:text-primary-600 dark:text-white dark:hover:text-primary-400 line-clamp-2"},{default:j(()=>[z(l(o.title),1)]),_:2},1032,["href"]),o.client?(d(),n("p",de,l(o.client.name),1)):w("",!0),e("div",ne,[o.due_date?(d(),n("span",{key:0,class:k(["inline-flex items-center gap-1 rounded-lg px-2 py-0.5",o.is_overdue?"bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-400":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400"])},[h[0]||(h[0]=e("svg",{class:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.75 2a.75.75 0 01.75.75V4h7V2.75a.75.75 0 011.5 0V4h.25A2.75 2.75 0 0118 6.75v8.5A2.75 2.75 0 0115.25 18H4.75A2.75 2.75 0 012 15.25v-8.5A2.75 2.75 0 014.75 4H5V2.75A.75.75 0 015.75 2zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75z","clip-rule":"evenodd"})],-1)),z(" "+l(new Date(o.due_date).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})),1)],2)):w("",!0),o.time_entries_sum_duration_seconds?(d(),n("span",ie,[h[1]||(h[1]=e("svg",{class:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.75-13a.75.75 0 00-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 000-1.5h-3.25V5z","clip-rule":"evenodd"})],-1)),z(" "+l(y(o.time_entries_sum_duration_seconds)),1)])):w("",!0)]),o.tasks_count>0?(d(),n("div",ue,[e("div",ce,[e("div",xe,[e("div",{class:"h-full rounded-full bg-primary-500",style:D({width:`${o.completed_tasks_count/o.tasks_count*100}%`})},null,4)]),e("span",he,l(o.completed_tasks_count)+"/"+l(o.tasks_count),1)])])):w("",!0)])])])]),_:1},8,["modelValue","onUpdate:modelValue","class"])])}),128))]))}},pe={class:"overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800"},me={class:"flex items-center justify-between border-b border-slate-200 px-4 py-3 dark:border-slate-700"},ge={class:"flex items-center gap-2"},fe={class:"flex"},be={class:"flex-shrink-0 w-48 border-r border-slate-200 dark:border-slate-700"},ke={class:"flex items-center gap-2 min-w-0"},we={class:"h-10 flex border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700"},ye={class:"relative"},_e={class:"absolute -top-3 left-1/2 -translate-x-1/2 rounded bg-pink-500 px-1.5 py-0.5 text-[10px] font-medium text-white"},De={class:"truncate text-xs font-medium text-white drop-shadow-sm"},Me={key:0,class:"absolute bottom-0.5 left-1 right-1 h-1 rounded-full bg-white/30"},$e={key:0,class:"py-12 text-center"},Ce={class:"mt-2 text-sm text-slate-500 dark:text-slate-400"},Ve={__name:"TimelineView",props:{projects:{type:Array,required:!0}},setup(m){const{t:c}=G(),x=m,g=T("month"),f=T(null),v=q(()=>{const o=new Date;let a=new Date(o),r=new Date(o);x.projects.forEach(H=>{const u=new Date(H.created_at),t=H.due_date?new Date(H.due_date):null;u<a&&(a=u),t&&t>r&&(r=t)});const $=g.value==="week"?7:g.value==="month"?30:90;return a.setDate(a.getDate()-$),r.setDate(r.getDate()+$),{start:a,end:r}}),A=q(()=>{const o=v.value.end-v.value.start;return Math.ceil(o/(1e3*60*60*24))}),B=q(()=>{switch(g.value){case"week":return 40;case"month":return 12;case"quarter":return 4;default:return 12}}),y=q(()=>A.value*B.value),O=q(()=>{const o=[],a=new Date(v.value.start);if(g.value==="week")for(;a<=v.value.end;)o.push({date:new Date(a),label:a.getDate().toString(),isToday:_(a,new Date),isWeekend:a.getDay()===0||a.getDay()===6}),a.setDate(a.getDate()+1);else for(;a<=v.value.end;){const r=new Date(a.getFullYear(),a.getMonth(),1),$=new Date(a.getFullYear(),a.getMonth()+1,0);o.push({date:r,label:r.toLocaleDateString("fr-FR",{month:"short",year:"numeric"}),width:b(r,$,v.value.start,v.value.end)*B.value}),a.setMonth(a.getMonth()+1)}return o}),p=q(()=>{const o=new Date;if(o<v.value.start||o>v.value.end)return null;const a=o-v.value.start;return Math.floor(a/(1e3*60*60*24))*B.value}),h=o=>{const a=new Date(o.created_at),r=o.due_date?new Date(o.due_date):new Date,$=a<v.value.start?v.value.start:a,H=r>v.value.end?v.value.end:r,u=$-v.value.start,t=Math.floor(u/(1e3*60*60*24)),s=H-v.value.start,F=Math.floor(s/(1e3*60*60*24))-t;return{left:t*B.value,width:Math.max(F*B.value,20)}},_=(o,a)=>o.getDate()===a.getDate()&&o.getMonth()===a.getMonth()&&o.getFullYear()===a.getFullYear(),b=(o,a,r,$)=>{const H=o<r?r:o,t=(a>$?$:a)-H;return Math.max(Math.ceil(t/(1e3*60*60*24)),0)+1},I=()=>{if(f.value&&p.value!==null){const o=f.value.clientWidth;f.value.scrollLeft=p.value-o/2}};return Y(()=>{I()}),(o,a)=>(d(),n("div",pe,[e("div",me,[e("div",ge,[e("button",{onClick:a[0]||(a[0]=r=>g.value="week"),class:k(["rounded-lg px-3 py-1.5 text-sm font-medium transition-colors",g.value==="week"?"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700"])},l(i(c)("this_week")),3),e("button",{onClick:a[1]||(a[1]=r=>g.value="month"),class:k(["rounded-lg px-3 py-1.5 text-sm font-medium transition-colors",g.value==="month"?"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700"])},l(i(c)("this_month")),3),e("button",{onClick:a[2]||(a[2]=r=>g.value="quarter"),class:k(["rounded-lg px-3 py-1.5 text-sm font-medium transition-colors",g.value==="quarter"?"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400":"text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700"])}," Trimestre ",2)]),e("button",{onClick:I,class:"inline-flex items-center gap-1 rounded-lg px-3 py-1.5 text-sm font-medium text-primary-600 hover:bg-primary-50 dark:text-primary-400 dark:hover:bg-primary-900/20"},[a[3]||(a[3]=e("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.75 2a.75.75 0 01.75.75V4h7V2.75a.75.75 0 011.5 0V4h.25A2.75 2.75 0 0118 6.75v8.5A2.75 2.75 0 0115.25 18H4.75A2.75 2.75 0 012 15.25v-8.5A2.75 2.75 0 014.75 4H5V2.75A.75.75 0 015.75 2z","clip-rule":"evenodd"})],-1)),z(" "+l(i(c)("today")),1)])]),e("div",fe,[e("div",be,[a[4]||(a[4]=e("div",{class:"h-10 border-b border-slate-200 dark:border-slate-700"},null,-1)),(d(!0),n(M,null,S(m.projects,r=>(d(),n("div",{key:r.id,class:"h-12 flex items-center px-3 border-b border-slate-100 dark:border-slate-700"},[e("div",ke,[e("span",{class:"h-2.5 w-2.5 flex-shrink-0 rounded-full",style:D({backgroundColor:r.color||"#9b5de5"})},null,4),V(i(L),{href:o.route("projects.show",r.id),class:"truncate text-sm font-medium text-slate-900 hover:text-primary-600 dark:text-white dark:hover:text-primary-400"},{default:j(()=>[z(l(r.title),1)]),_:2},1032,["href"])])]))),128))]),e("div",{ref_key:"scrollContainer",ref:f,class:"flex-1 overflow-x-auto"},[e("div",{style:D({width:y.value+"px"})},[e("div",we,[g.value==="week"?(d(!0),n(M,{key:0},S(O.value,r=>(d(),n("div",{key:r.date.toISOString(),class:k(["flex-shrink-0 flex items-center justify-center text-xs border-r border-slate-200 dark:border-slate-600",r.isToday?"bg-primary-100 font-bold text-primary-700 dark:bg-primary-900/30 dark:text-primary-400":"",r.isWeekend?"bg-slate-100 dark:bg-slate-600":""]),style:D({width:B.value+"px"})},l(r.label),7))),128)):(d(!0),n(M,{key:1},S(O.value,r=>(d(),n("div",{key:r.date.toISOString(),class:"flex-shrink-0 flex items-center justify-center text-xs font-medium text-slate-600 dark:text-slate-300 border-r border-slate-200 dark:border-slate-600",style:D({width:r.width+"px"})},l(r.label),5))),128))]),e("div",ye,[p.value!==null?(d(),n("div",{key:0,class:"absolute top-0 bottom-0 w-0.5 bg-pink-500 z-10",style:D({left:p.value+"px"})},[e("div",_e,l(i(c)("today")),1)],4)):w("",!0),(d(!0),n(M,null,S(m.projects,r=>(d(),n("div",{key:r.id,class:"relative h-12 border-b border-slate-100 dark:border-slate-700"},[e("div",{class:"absolute top-2 h-8 rounded-lg flex items-center px-2 cursor-pointer transition-opacity hover:opacity-90",style:D({left:h(r).left+"px",width:h(r).width+"px",backgroundColor:r.color||"#9b5de5"})},[e("span",De,l(r.title),1),r.tasks_count>0?(d(),n("div",Me,[e("div",{class:"h-full rounded-full bg-white",style:D({width:`${r.completed_tasks_count/r.tasks_count*100}%`})},null,4)])):w("",!0)],4),r.due_date&&r.is_overdue?(d(),n("div",{key:0,class:"absolute top-2 h-8 w-1 rounded bg-pink-500",style:D({left:h(r).left+h(r).width-4+"px"})},null,4)):w("",!0)]))),128))])],4)],512)]),m.projects.length===0?(d(),n("div",$e,[a[5]||(a[5]=e("svg",{class:"mx-auto h-12 w-12 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("p",Ce,l(i(c)("no_projects")),1)])):w("",!0)]))}},je={class:"flex items-center justify-between"},Se={class:"text-xl font-semibold text-slate-900 dark:text-white"},ze={class:"mb-6 grid grid-cols-2 gap-4 md:grid-cols-4"},Ae={class:"rounded-2xl bg-white p-4 border border-slate-200 dark:bg-slate-800 dark:border-slate-700"},Be={class:"text-2xl font-bold text-slate-900 dark:text-white"},He={class:"text-sm text-slate-500 dark:text-slate-400"},Te={class:"rounded-2xl bg-white p-4 border border-slate-200 dark:bg-slate-800 dark:border-slate-700"},Fe={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},Le={class:"text-sm text-slate-500 dark:text-slate-400"},qe={class:"rounded-2xl bg-white p-4 border border-slate-200 dark:bg-slate-800 dark:border-slate-700"},Oe={class:"text-2xl font-bold text-pink-600 dark:text-pink-400"},Ie={class:"text-sm text-slate-500 dark:text-slate-400"},Ee={class:"rounded-2xl bg-white p-4 border border-slate-200 dark:bg-slate-800 dark:border-slate-700"},Re={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400"},Ue={class:"text-sm text-slate-500 dark:text-slate-400"},We={class:"mb-6 flex flex-wrap items-center justify-between gap-4"},Pe={class:"flex items-center gap-2"},Ne={class:"inline-flex rounded-xl bg-slate-100 p-1 dark:bg-slate-800"},Ye=["title"],Ge={class:"flex flex-wrap items-center gap-3"},Ke={class:"relative"},Je=["placeholder"],Qe={value:""},Xe=["value"],Ze={value:""},et=["value"],tt={class:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400"},st={key:0,class:"overflow-hidden rounded-2xl bg-white border border-slate-200 dark:bg-slate-800 dark:border-slate-700"},lt={class:"min-w-full divide-y divide-slate-200 dark:divide-slate-700"},at={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-slate-900 dark:text-white sm:pl-6"},rt={scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-slate-900 dark:text-white lg:table-cell"},ot={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-slate-900 dark:text-white"},dt={scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-slate-900 dark:text-white lg:table-cell"},nt={class:"divide-y divide-slate-200 dark:divide-slate-700"},it={key:0},ut={colspan:"7",class:"py-12 text-center"},ct={class:"mt-4 text-sm text-slate-500 dark:text-slate-400"},xt={class:"py-4 pl-4 pr-3 sm:pl-6"},ht={class:"flex items-center gap-3"},vt={key:0,class:"ml-2 text-xs text-slate-400"},pt={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-slate-500 dark:text-slate-400 md:table-cell"},mt={class:"hidden whitespace-nowrap px-3 py-4 text-sm lg:table-cell"},gt={key:1,class:"text-slate-400"},ft={class:"whitespace-nowrap px-3 py-4 text-sm"},bt={class:"flex items-center gap-2"},kt={class:"h-2 w-24 overflow-hidden rounded-full bg-slate-200 dark:bg-slate-600"},wt={class:"text-slate-600 dark:text-slate-400"},yt={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-slate-500 dark:text-slate-400 lg:table-cell"},_t={key:0,class:"text-slate-400"},Dt={class:"whitespace-nowrap px-3 py-4 text-sm"},Mt=["value","onChange"],$t=["value"],Ct={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},Vt={class:"flex items-center justify-end gap-2"},jt=["onClick"],St=["onClick"],zt=["onClick"],At={key:0,class:"border-t border-slate-200 px-4 py-3 dark:border-slate-700"},Bt={class:"flex items-center justify-between"},Ht={class:"text-sm text-slate-700 dark:text-slate-400"},Tt={class:"isolate inline-flex -space-x-px rounded-xl shadow-sm"},Rt={__name:"Index",props:{projects:{type:[Object,Array],required:!0},stats:{type:Object,required:!0},view:{type:String,default:"list"},filters:{type:Object,default:()=>({})},clients:{type:Array,required:!0},statuses:{type:Object,required:!0},colors:{type:Object,required:!0}},setup(m){const{t:c}=G(),x=m,g=T(x.filters.search||""),f=T(x.filters.status||""),v=T(x.filters.client_id||""),A=T(x.filters.show_archived||!1),y=T(localStorage.getItem("projectsDefaultView")||x.view),O=T(localStorage.getItem("projectsDefaultView")||""),p=()=>{localStorage.setItem("projectsDefaultView",y.value),O.value=y.value},h=q(()=>O.value===y.value);Y(()=>{const u=localStorage.getItem("projectsDefaultView");u&&u!==x.view&&!x.filters.search&&!x.filters.status&&!x.filters.client_id&&b(u)});const _=Z(()=>{E.get(route("projects.index"),{search:g.value||void 0,status:f.value||void 0,client_id:v.value||void 0,show_archived:A.value||void 0,view:y.value},{preserveState:!0,replace:!0})},300);N([g,f,v,A],_);const b=u=>{y.value=u,E.get(route("projects.index"),{...x.filters,view:u},{preserveState:!0,replace:!0})},I=u=>{const t={backlog:"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300",next:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",in_progress:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",waiting_for:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",done:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400"};return t[u]||t.backlog},o=u=>{if(!u)return"0h";const t=Math.floor(u/3600),s=Math.floor(u%3600/60);return s===0?`${t}h`:`${t}h${s.toString().padStart(2,"0")}`},a=q(()=>Array.isArray(x.projects)?x.projects:x.projects.data),r=(u,t)=>{E.post(route("projects.archive",u.id),{action:t},{preserveScroll:!0})},$=u=>{confirm("Êtes-vous sûr de vouloir supprimer ce projet ? Cette action est irréversible.")&&E.delete(route("projects.destroy",u.id))},H=(u,t)=>{E.post(route("projects.status",u.id),{status:t},{preserveScroll:!0})};return(u,t)=>(d(),n(M,null,[V(i(K),{title:i(c)("projects")},null,8,["title"]),V(X,null,{header:j(()=>[e("div",je,[e("h1",Se,l(i(c)("projects")),1),V(i(L),{href:u.route("projects.create"),class:"inline-flex items-center rounded-xl bg-primary-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500"},{default:j(()=>[t[8]||(t[8]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1)),z(" "+l(i(c)("new_project")),1)]),_:1},8,["href"])])]),default:j(()=>[e("div",ze,[e("div",Ae,[e("div",Be,l(m.stats.total),1),e("div",He,l(i(c)("projects")),1)]),e("div",Te,[e("div",Fe,l(m.stats.in_progress),1),e("div",Le,l(i(c)("project_status.in_progress")),1)]),e("div",qe,[e("div",Oe,l(m.stats.overdue),1),e("div",Ie,l(i(c)("overdue")),1)]),e("div",Ee,[e("div",Re,l(m.stats.done_this_week),1),e("div",Ue,l(i(c)("project_status.done"))+" (semaine)",1)])]),e("div",We,[e("div",Pe,[e("div",Ne,[e("button",{onClick:t[0]||(t[0]=s=>b("list")),class:k(["rounded-lg px-4 py-2 text-sm font-medium transition-colors",y.value==="list"?"bg-white text-slate-900 shadow dark:bg-slate-700 dark:text-white":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white"])},l(i(c)("project_view_list")),3),e("button",{onClick:t[1]||(t[1]=s=>b("kanban")),class:k(["rounded-lg px-4 py-2 text-sm font-medium transition-colors",y.value==="kanban"?"bg-white text-slate-900 shadow dark:bg-slate-700 dark:text-white":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white"])},l(i(c)("project_view_kanban")),3),e("button",{onClick:t[2]||(t[2]=s=>b("timeline")),class:k(["rounded-lg px-4 py-2 text-sm font-medium transition-colors",y.value==="timeline"?"bg-white text-slate-900 shadow dark:bg-slate-700 dark:text-white":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white"])},l(i(c)("project_view_timeline")),3)]),e("button",{onClick:p,class:k(["rounded-lg p-2 transition-colors",h.value?"text-primary-500":"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300"]),title:h.value?"Vue par défaut":"Définir comme vue par défaut"},[...t[9]||(t[9]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z","clip-rule":"evenodd"})],-1)])],10,Ye)]),e("div",Ge,[e("div",Ke,[t[10]||(t[10]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"h-4 w-4 text-slate-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})])],-1)),R(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>g.value=s),type:"text",placeholder:i(c)("search")+"...",class:"block w-48 rounded-xl border-0 py-2 pl-9 pr-3 text-slate-900 ring-1 ring-inset ring-slate-200 placeholder:text-slate-400 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-700 sm:text-sm"},null,8,Je),[[J,g.value]])]),R(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>f.value=s),class:"rounded-xl border-0 py-2 pl-3 pr-10 text-slate-900 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-700 sm:text-sm"},[e("option",Qe,l(i(c)("all_statuses")),1),(d(!0),n(M,null,S(m.statuses,(s,C)=>(d(),n("option",{key:C,value:C},l(s),9,Xe))),128))],512),[[P,f.value]]),R(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>v.value=s),class:"rounded-xl border-0 py-2 pl-3 pr-10 text-slate-900 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-700 sm:text-sm"},[e("option",Ze,l(i(c)("all_clients")),1),(d(!0),n(M,null,S(m.clients,s=>(d(),n("option",{key:s.id,value:s.id},l(s.name),9,et))),128))],512),[[P,v.value]]),e("label",tt,[R(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>A.value=s),class:"rounded border-slate-300 text-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-800"},null,512),[[Q,A.value]]),z(" "+l(i(c)("show_archived")),1)])])]),y.value==="list"?(d(),n("div",st,[e("table",lt,[e("thead",null,[e("tr",null,[e("th",at,l(i(c)("project")),1),t[11]||(t[11]=e("th",{scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-slate-900 dark:text-white md:table-cell"}," Client ",-1)),e("th",rt,l(i(c)("due_date")),1),e("th",ot,l(i(c)("completion")),1),e("th",dt,l(i(c)("time_spent")),1),t[12]||(t[12]=e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-slate-900 dark:text-white"}," Statut ",-1)),t[13]||(t[13]=e("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Actions")],-1))])]),e("tbody",nt,[a.value.length===0?(d(),n("tr",it,[e("td",ut,[t[14]||(t[14]=e("svg",{class:"mx-auto h-12 w-12 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 00-1.883 2.542l.857 6a2.25 2.25 0 002.227 1.932H19.05a2.25 2.25 0 002.227-1.932l.857-6a2.25 2.25 0 00-1.883-2.542m-16.5 0V6A2.25 2.25 0 016 3.75h3.879a1.5 1.5 0 011.06.44l2.122 2.12a1.5 1.5 0 001.06.44H18A2.25 2.25 0 0120.25 9v.776"})],-1)),e("p",ct,l(i(c)("no_projects")),1),V(i(L),{href:u.route("projects.create"),class:"mt-4 inline-flex items-center text-primary-600 hover:text-primary-500 dark:text-primary-400"},{default:j(()=>[z(l(i(c)("create_first_project")),1)]),_:1},8,["href"])])])):w("",!0),(d(!0),n(M,null,S(a.value,s=>{var C;return d(),n("tr",{key:s.id,class:k(["hover:bg-slate-50 dark:hover:bg-slate-700/50",s.is_archived?"opacity-60":""])},[e("td",xt,[e("div",ht,[s.color?(d(),n("div",{key:0,class:"h-3 w-3 rounded-full",style:D({backgroundColor:s.color})},null,4)):w("",!0),e("div",null,[V(i(L),{href:u.route("projects.show",s.id),class:"font-medium text-slate-900 hover:text-primary-600 dark:text-white dark:hover:text-primary-400"},{default:j(()=>[z(l(s.title),1)]),_:2},1032,["href"]),s.is_archived?(d(),n("span",vt,"("+l(i(c)("archived"))+")",1)):w("",!0)])])]),e("td",pt,l(((C=s.client)==null?void 0:C.name)||"-"),1),e("td",mt,[s.due_date?(d(),n("span",{key:0,class:k([s.is_overdue?"text-pink-600 dark:text-pink-400":"text-slate-500 dark:text-slate-400"])},l(new Date(s.due_date).toLocaleDateString("fr-FR")),3)):(d(),n("span",gt,"-"))]),e("td",ft,[e("div",bt,[e("div",kt,[e("div",{class:"h-full rounded-full bg-primary-500",style:D({width:`${s.completion_percentage||0}%`})},null,4)]),e("span",wt,l(s.completed_tasks_count||0)+"/"+l(s.tasks_count||0),1)])]),e("td",yt,[z(l(o(s.time_entries_sum_duration_seconds))+" ",1),s.budget_hours?(d(),n("span",_t," / "+l(s.budget_hours)+"h ",1)):w("",!0)]),e("td",Dt,[e("select",{value:s.status,onChange:F=>H(s,F.target.value),class:k([I(s.status),"cursor-pointer rounded-xl border-0 py-0.5 pl-2.5 pr-7 text-xs font-medium focus:ring-2 focus:ring-primary-500"])},[(d(!0),n(M,null,S(m.statuses,(F,W)=>(d(),n("option",{key:W,value:W},l(F),9,$t))),128))],42,Mt)]),e("td",Ct,[e("div",Vt,[V(i(L),{href:u.route("projects.show",s.id),class:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-700 dark:hover:text-slate-300",title:"Voir"},{default:j(()=>[...t[15]||(t[15]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"}),e("path",{"fill-rule":"evenodd",d:"M.664 10.59a1.651 1.651 0 010-1.186A10.004 10.004 0 0110 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0110 17c-4.257 0-7.893-2.66-9.336-6.41zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"]),V(i(L),{href:u.route("projects.edit",s.id),class:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-700 dark:hover:text-slate-300",title:"Modifier"},{default:j(()=>[...t[16]||(t[16]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"})],-1)])]),_:1},8,["href"]),s.is_archived?(d(),n("button",{key:1,onClick:F=>r(s,"unarchive"),class:"rounded-lg p-1.5 text-emerald-400 hover:bg-slate-100 hover:text-emerald-600 dark:hover:bg-slate-700",title:"Désarchiver"},[...t[18]||(t[18]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.606 12.97a.75.75 0 01-.134 1.051 2.494 2.494 0 00-.93 2.437 2.494 2.494 0 002.437-.93.75.75 0 111.186.918 3.995 3.995 0 01-4.482 1.332.75.75 0 01-.461-.461 3.994 3.994 0 011.332-4.482.75.75 0 011.052.134z","clip-rule":"evenodd"}),e("path",{"fill-rule":"evenodd",d:"M5.752 12A13.07 13.07 0 008 14.248v4.002c0 .414.336.75.75.75a5 5 0 004.797-6.414 12.984 12.984 0 005.45-10.848.75.75 0 00-.735-.735 12.984 12.984 0 00-10.849 5.45A5 5 0 001 11.25c.001.414.337.75.751.75h4.002zM13 9a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)])],8,St)):(d(),n("button",{key:0,onClick:F=>r(s,"archive"),class:"rounded-lg p-1.5 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-700 dark:hover:text-slate-300",title:"Archiver"},[...t[17]||(t[17]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M2 3a1 1 0 00-1 1v1a1 1 0 001 1h16a1 1 0 001-1V4a1 1 0 00-1-1H2z"}),e("path",{"fill-rule":"evenodd",d:"M2 7.5h16l-.811 7.71a2 2 0 01-1.99 1.79H4.802a2 2 0 01-1.99-1.79L2 7.5zM7 11a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])],8,jt)),e("button",{onClick:F=>$(s),class:"rounded-lg p-1.5 text-red-400 hover:bg-slate-100 hover:text-red-600 dark:hover:bg-slate-700",title:"Supprimer"},[...t[19]||(t[19]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.519.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z","clip-rule":"evenodd"})],-1)])],8,zt)])])],2)}),128))])]),x.projects.links&&x.projects.links.length>3?(d(),n("div",At,[e("div",Bt,[e("div",Ht,l(x.projects.from)+" - "+l(x.projects.to)+" sur "+l(x.projects.total),1),e("nav",Tt,[(d(!0),n(M,null,S(x.projects.links,(s,C)=>(d(),n(M,{key:C},[s.url?(d(),U(i(L),{key:0,href:s.url,class:k([s.active?"z-10 bg-primary-500 text-white":"bg-white text-slate-900 ring-1 ring-inset ring-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:ring-slate-600 dark:hover:bg-slate-700","relative inline-flex items-center px-4 py-2 text-sm font-semibold focus:z-20",C===0?"rounded-l-xl":"",C===x.projects.links.length-1?"rounded-r-xl":""]),innerHTML:s.label,"preserve-scroll":""},null,8,["href","class","innerHTML"])):w("",!0)],64))),128))])])])):w("",!0)])):y.value==="kanban"?(d(),U(ve,{key:1,items:a.value,statuses:m.statuses,"item-type":"project",onReorder:t[7]||(t[7]=s=>i(E).post(u.route("projects.reorder"),{projects:s},{preserveScroll:!0}))},null,8,["items","statuses"])):y.value==="timeline"?(d(),U(Ve,{key:2,projects:a.value},null,8,["projects"])):w("",!0)]),_:1})],64))}};export{Rt as default};
