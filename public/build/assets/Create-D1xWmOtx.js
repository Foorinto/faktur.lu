import{u as N,c as n,a as d,b as t,h as z,i as b,d as e,w as E,f as p,t as c,o as u,F as v,j as k,k as g,g as $,v as h,e as U,l as C,B as q}from"./app-D_LDRm1B.js";import{_ as I}from"./AppLayout-BC_wZ4HX.js";import{_ as x}from"./InputError-BmY03fSZ.js";import{_}from"./InputLabel-CYEDeD5p.js";import{_ as R}from"./PrimaryButton-DKh2QOcq.js";import{_ as j}from"./VatScenarioIndicator-yL_h5R1V.js";import{u as F}from"./useTranslations-B3pYzZx2.js";import"./DropdownLink-AqUa-DAr.js";const T={class:"flex items-center space-x-4"},D={class:"text-xl font-semibold text-slate-900 dark:text-white"},H={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},L={class:"px-6 py-4"},O={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},G={value:""},J=["value"],K={key:0,class:"mt-2"},P=["placeholder"],Q={class:"mt-4"},W={class:"mt-1 text-xs text-slate-500 dark:text-slate-400"},X={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},Y={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},Z={class:"text-lg font-medium text-slate-900 dark:text-white"},ee={class:"px-6 py-4"},te={class:"space-y-4"},se={class:"flex flex-wrap gap-4 items-end"},le={class:"flex-1 min-w-[200px]"},ae=["id","onUpdate:modelValue","placeholder"],re={class:"flex flex-wrap gap-4 items-end"},oe={class:"flex-1 min-w-[200px]"},de=["id","onUpdate:modelValue","placeholder"],ie={class:"w-24"},ne=["id","onUpdate:modelValue"],ue={class:"w-32"},ce=["id","onUpdate:modelValue"],me=["value"],pe={class:"w-32"},_e=["id","onUpdate:modelValue"],he={class:"w-32"},be=["id","onUpdate:modelValue"],ve=["value"],fe=["onClick"],ke={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},xe={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},we={class:"text-lg font-medium text-slate-900 dark:text-white"},ge={class:"px-6 py-4"},ye=["placeholder"],Ve={class:"flex justify-end space-x-3"},$e={key:0},Ue={key:1},Ee={__name:"Create",props:{clients:Array,vatRates:Array,units:Array,defaultClientId:[String,Number],isVatExempt:Boolean,vatScenarios:Object},setup(f){const{t:l}=F(),w=f,A=w.isVatExempt?0:17,B=q(()=>{var m;return(m=w.clients)==null?void 0:m.find(r=>r.id===a.client_id)}),y=q(()=>{var m;return((m=B.value)==null?void 0:m.vat_scenario)||null}),a=N({client_id:w.defaultClientId||"",title:"",due_at:"",notes:"",currency:"EUR",items:[]}),V=()=>{a.items.push({title:"",description:"",quantity:1,unit:"hour",unit_price:0,vat_rate:A})},M=m=>{a.items.splice(m,1)},S=()=>{a.post(route("invoices.store"))};return a.items.length===0&&V(),(m,r)=>(u(),n(v,null,[d(t(z),{title:t(l)("new_invoice")},null,8,["title"]),d(I,null,{header:b(()=>[e("div",T,[d(t(C),{href:m.route("invoices.index"),class:"text-slate-400 hover:text-slate-500 dark:text-slate-500 dark:hover:text-slate-400"},{default:b(()=>[...r[4]||(r[4]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"]),e("h1",D,c(t(l)("new_invoice")),1)])]),default:b(()=>[e("form",{onSubmit:E(S,["prevent"]),class:"space-y-6"},[e("div",H,[r[5]||(r[5]=e("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},[e("h2",{class:"text-lg font-medium text-slate-900 dark:text-white"},"Client")],-1)),e("div",L,[e("div",O,[e("div",null,[d(_,{for:"client_id",value:"Client"}),p(e("select",{id:"client_id","onUpdate:modelValue":r[0]||(r[0]=s=>t(a).client_id=s),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:""},[e("option",G,c(t(l)("select_client")),1),(u(!0),n(v,null,k(f.clients,s=>(u(),n("option",{key:s.id,value:s.id},c(s.name),9,J))),128))],512),[[g,t(a).client_id]]),d(x,{message:t(a).errors.client_id,class:"mt-2"},null,8,["message"]),y.value?(u(),n("div",K,[d(j,{scenario:y.value,size:"sm"},null,8,["scenario"])])):$("",!0)]),e("div",null,[d(_,{for:"title",value:t(l)("title_optional")},null,8,["value"]),p(e("input",{id:"title","onUpdate:modelValue":r[1]||(r[1]=s=>t(a).title=s),type:"text",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:t(l)("example_placeholder")},null,8,P),[[h,t(a).title]]),d(x,{message:t(a).errors.title,class:"mt-2"},null,8,["message"])])]),e("div",Q,[d(_,{for:"due_at",value:t(l)("due_date_optional")},null,8,["value"]),p(e("input",{id:"due_at","onUpdate:modelValue":r[2]||(r[2]=s=>t(a).due_at=s),type:"date",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:max-w-xs"},null,512),[[h,t(a).due_at]]),e("p",W,c(t(l)("default_30_days_after")),1),d(x,{message:t(a).errors.due_at,class:"mt-2"},null,8,["message"])])])]),e("div",X,[e("div",Y,[e("h2",Z,c(t(l)("invoice_lines")),1)]),e("div",ee,[e("div",te,[(u(!0),n(v,null,k(t(a).items,(s,i)=>(u(),n("div",{key:i,class:"p-4 rounded-xl border border-slate-200 dark:border-slate-700 space-y-3"},[e("div",se,[e("div",le,[d(_,{for:`item-${i}-title`,value:t(l)("title_required")},null,8,["for","value"]),p(e("input",{id:`item-${i}-title`,"onUpdate:modelValue":o=>s.title=o,type:"text",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:t(l)("service_title_placeholder"),required:""},null,8,ae),[[h,s.title]])])]),e("div",re,[e("div",oe,[d(_,{for:`item-${i}-description`,value:t(l)("description_optional")},null,8,["for","value"]),p(e("input",{id:`item-${i}-description`,"onUpdate:modelValue":o=>s.description=o,type:"text",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:t(l)("additional_details")},null,8,de),[[h,s.description]])]),e("div",ie,[d(_,{for:`item-${i}-quantity`,value:t(l)("qty")},null,8,["for","value"]),p(e("input",{id:`item-${i}-quantity`,"onUpdate:modelValue":o=>s.quantity=o,type:"number",step:"0.01",min:"0.01",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:""},null,8,ne),[[h,s.quantity,void 0,{number:!0}]])]),e("div",ue,[d(_,{for:`item-${i}-unit`,value:t(l)("unit")},null,8,["for","value"]),p(e("select",{id:`item-${i}-unit`,"onUpdate:modelValue":o=>s.unit=o,class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},[r[6]||(r[6]=e("option",{value:""},"-",-1)),(u(!0),n(v,null,k(f.units,o=>(u(),n("option",{key:o.value,value:o.value},c(o.label),9,me))),128))],8,ce),[[g,s.unit]])]),e("div",pe,[d(_,{for:`item-${i}-unit_price`,value:t(l)("price_ht")},null,8,["for","value"]),p(e("input",{id:`item-${i}-unit_price`,"onUpdate:modelValue":o=>s.unit_price=o,type:"number",step:"0.01",min:"0",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:""},null,8,_e),[[h,s.unit_price,void 0,{number:!0}]])]),e("div",he,[d(_,{for:`item-${i}-vat_rate`,value:t(l)("vat")},null,8,["for","value"]),p(e("select",{id:`item-${i}-vat_rate`,"onUpdate:modelValue":o=>s.vat_rate=o,class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:""},[(u(!0),n(v,null,k(f.vatRates,o=>(u(),n("option",{key:o.value,value:o.value},c(o.label),9,ve))),128))],8,be),[[g,s.vat_rate,void 0,{number:!0}]])]),t(a).items.length>1?(u(),n("button",{key:0,type:"button",onClick:o=>M(i),class:"p-2 text-pink-600 hover:text-pink-800 dark:text-pink-400 dark:hover:text-pink-300"},[...r[7]||(r[7]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.519.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5z","clip-rule":"evenodd"})],-1)])],8,fe)):$("",!0)])]))),128)),e("button",{type:"button",onClick:V,class:"inline-flex items-center rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},[r[8]||(r[8]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1)),U(" "+c(t(l)("add_line")),1)])])])]),e("div",ke,[e("div",xe,[e("h2",we,c(t(l)("notes_optional")),1)]),e("div",ge,[p(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=s=>t(a).notes=s),rows:"3",class:"block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:t(l)("notes_placeholder")},null,8,ye),[[h,t(a).notes]]),d(x,{message:t(a).errors.notes,class:"mt-2"},null,8,["message"])])]),e("div",Ve,[d(t(C),{href:m.route("invoices.index"),class:"inline-flex items-center rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},{default:b(()=>[U(c(t(l)("cancel")),1)]),_:1},8,["href"]),d(R,{disabled:t(a).processing},{default:b(()=>[t(a).processing?(u(),n("span",$e,c(t(l)("creating")),1)):(u(),n("span",Ue,c(t(l)("create_draft")),1))]),_:1},8,["disabled"])])],32)]),_:1})],64))}};export{Ee as default};
