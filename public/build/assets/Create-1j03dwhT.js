import{u as N,c as n,a as l,b as t,h as z,i as h,d as e,w as E,f as m,t as c,o as u,F as v,j as f,k as w,g as U,v as p,e as $,l as C,B as q}from"./app-B97I2Oxk.js";import{_ as I}from"./AppLayout-BV7HVWRJ.js";import{_,a as b}from"./InputError-DyOQpCKT.js";import{P as R}from"./PrimaryButton-DB5fqt7U.js";import{_ as j}from"./VatScenarioIndicator-Dk3ga8mc.js";import{u as F}from"./useTranslations-C4Y-NByF.js";import"./ApplicationLogo-DwcnZXn5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-C30LA8Zs.js";const T={class:"flex items-center space-x-4"},D={class:"text-xl font-semibold text-gray-900 dark:text-white"},H={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},L={class:"px-6 py-4"},P={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},O={value:""},G=["value"],J={key:0,class:"mt-2"},K=["placeholder"],Q={class:"mt-4"},W={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},X={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},Y={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Z={class:"text-lg font-medium text-gray-900 dark:text-white"},ee={class:"px-6 py-4"},te={class:"space-y-4"},re={class:"flex flex-wrap gap-4 items-end"},oe={class:"flex-1 min-w-[200px]"},ae=["id","onUpdate:modelValue","placeholder"],de={class:"flex flex-wrap gap-4 items-end"},se={class:"flex-1 min-w-[200px]"},le=["id","onUpdate:modelValue","placeholder"],ie={class:"w-24"},ne=["id","onUpdate:modelValue"],ue={class:"w-32"},ce=["id","onUpdate:modelValue"],ge=["value"],me={class:"w-32"},_e=["id","onUpdate:modelValue"],pe={class:"w-32"},he=["id","onUpdate:modelValue"],ve=["value"],ye=["onClick"],fe={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},be={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},ke={class:"text-lg font-medium text-gray-900 dark:text-white"},we={class:"px-6 py-4"},xe=["placeholder"],Ve={class:"flex justify-end space-x-3"},Ue={key:0},$e={key:1},Ie={__name:"Create",props:{clients:Array,vatRates:Array,units:Array,defaultClientId:[String,Number],isVatExempt:Boolean,vatScenarios:Object},setup(y){const{t:o}=F(),k=y,B=k.isVatExempt?0:17,A=q(()=>{var g;return(g=k.clients)==null?void 0:g.find(d=>d.id===a.client_id)}),x=q(()=>{var g;return((g=A.value)==null?void 0:g.vat_scenario)||null}),a=N({client_id:k.defaultClientId||"",title:"",due_at:"",notes:"",currency:"EUR",items:[]}),V=()=>{a.items.push({title:"",description:"",quantity:1,unit:"hour",unit_price:0,vat_rate:B})},M=g=>{a.items.splice(g,1)},S=()=>{a.post(route("invoices.store"))};return a.items.length===0&&V(),(g,d)=>(u(),n(v,null,[l(t(z),{title:t(o)("new_invoice")},null,8,["title"]),l(I,null,{header:h(()=>[e("div",T,[l(t(C),{href:g.route("invoices.index"),class:"text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400"},{default:h(()=>[...d[4]||(d[4]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"]),e("h1",D,c(t(o)("new_invoice")),1)])]),default:h(()=>[e("form",{onSubmit:E(S,["prevent"]),class:"space-y-6"},[e("div",H,[d[5]||(d[5]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Client")],-1)),e("div",L,[e("div",P,[e("div",null,[l(_,{for:"client_id",value:"Client"}),m(e("select",{id:"client_id","onUpdate:modelValue":d[0]||(d[0]=r=>t(a).client_id=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[e("option",O,c(t(o)("select_client")),1),(u(!0),n(v,null,f(y.clients,r=>(u(),n("option",{key:r.id,value:r.id},c(r.name),9,G))),128))],512),[[w,t(a).client_id]]),l(b,{message:t(a).errors.client_id,class:"mt-2"},null,8,["message"]),x.value?(u(),n("div",J,[l(j,{scenario:x.value,size:"sm"},null,8,["scenario"])])):U("",!0)]),e("div",null,[l(_,{for:"title",value:t(o)("title_optional")},null,8,["value"]),m(e("input",{id:"title","onUpdate:modelValue":d[1]||(d[1]=r=>t(a).title=r),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:t(o)("example_placeholder")},null,8,K),[[p,t(a).title]]),l(b,{message:t(a).errors.title,class:"mt-2"},null,8,["message"])])]),e("div",Q,[l(_,{for:"due_at",value:t(o)("due_date_optional")},null,8,["value"]),m(e("input",{id:"due_at","onUpdate:modelValue":d[2]||(d[2]=r=>t(a).due_at=r),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:max-w-xs"},null,512),[[p,t(a).due_at]]),e("p",W,c(t(o)("default_30_days_after")),1),l(b,{message:t(a).errors.due_at,class:"mt-2"},null,8,["message"])])])]),e("div",X,[e("div",Y,[e("h2",Z,c(t(o)("invoice_lines")),1)]),e("div",ee,[e("div",te,[(u(!0),n(v,null,f(t(a).items,(r,i)=>(u(),n("div",{key:i,class:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 space-y-3"},[e("div",re,[e("div",oe,[l(_,{for:`item-${i}-title`,value:t(o)("title_required")},null,8,["for","value"]),m(e("input",{id:`item-${i}-title`,"onUpdate:modelValue":s=>r.title=s,type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:t(o)("service_title_placeholder"),required:""},null,8,ae),[[p,r.title]])])]),e("div",de,[e("div",se,[l(_,{for:`item-${i}-description`,value:t(o)("description_optional")},null,8,["for","value"]),m(e("input",{id:`item-${i}-description`,"onUpdate:modelValue":s=>r.description=s,type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:t(o)("additional_details")},null,8,le),[[p,r.description]])]),e("div",ie,[l(_,{for:`item-${i}-quantity`,value:t(o)("qty")},null,8,["for","value"]),m(e("input",{id:`item-${i}-quantity`,"onUpdate:modelValue":s=>r.quantity=s,type:"number",step:"0.01",min:"0.01",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},null,8,ne),[[p,r.quantity,void 0,{number:!0}]])]),e("div",ue,[l(_,{for:`item-${i}-unit`,value:t(o)("unit")},null,8,["for","value"]),m(e("select",{id:`item-${i}-unit`,"onUpdate:modelValue":s=>r.unit=s,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},[d[6]||(d[6]=e("option",{value:""},"-",-1)),(u(!0),n(v,null,f(y.units,s=>(u(),n("option",{key:s.value,value:s.value},c(s.label),9,ge))),128))],8,ce),[[w,r.unit]])]),e("div",me,[l(_,{for:`item-${i}-unit_price`,value:t(o)("price_ht")},null,8,["for","value"]),m(e("input",{id:`item-${i}-unit_price`,"onUpdate:modelValue":s=>r.unit_price=s,type:"number",step:"0.01",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},null,8,_e),[[p,r.unit_price,void 0,{number:!0}]])]),e("div",pe,[l(_,{for:`item-${i}-vat_rate`,value:t(o)("vat")},null,8,["for","value"]),m(e("select",{id:`item-${i}-vat_rate`,"onUpdate:modelValue":s=>r.vat_rate=s,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[(u(!0),n(v,null,f(y.vatRates,s=>(u(),n("option",{key:s.value,value:s.value},c(s.label),9,ve))),128))],8,he),[[w,r.vat_rate,void 0,{number:!0}]])]),t(a).items.length>1?(u(),n("button",{key:0,type:"button",onClick:s=>M(i),class:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"},[...d[7]||(d[7]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.519.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5z","clip-rule":"evenodd"})],-1)])],8,ye)):U("",!0)])]))),128)),e("button",{type:"button",onClick:V,class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},[d[8]||(d[8]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1)),$(" "+c(t(o)("add_line")),1)])])])]),e("div",fe,[e("div",be,[e("h2",ke,c(t(o)("notes_optional")),1)]),e("div",we,[m(e("textarea",{"onUpdate:modelValue":d[3]||(d[3]=r=>t(a).notes=r),rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:t(o)("notes_placeholder")},null,8,xe),[[p,t(a).notes]]),l(b,{message:t(a).errors.notes,class:"mt-2"},null,8,["message"])])]),e("div",Ve,[l(t(C),{href:g.route("invoices.index"),class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},{default:h(()=>[$(c(t(o)("cancel")),1)]),_:1},8,["href"]),l(R,{disabled:t(a).processing},{default:h(()=>[t(a).processing?(u(),n("span",Ue,c(t(o)("creating")),1)):(u(),n("span",$e,c(t(o)("create_draft")),1))]),_:1},8,["disabled"])])],32)]),_:1})],64))}};export{Ie as default};
