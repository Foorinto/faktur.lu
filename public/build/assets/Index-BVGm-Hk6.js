import{r as k,u as H,y as z,z as ge,A as ke,c as i,a as L,b as t,h as ye,i as O,d as e,o as a,t as o,e as S,g as h,w as N,f as p,F as _,j as y,k as v,v as w,C as we,x as re,m as je,l as K,s as Ve,p as Q,B as U}from"./app-BXBDbs8N.js";import{_ as Se}from"./AppLayout-C5uGK1xv.js";import{u as Te}from"./useTranslations-ByQu4tzF.js";import"./DropdownLink-cAVc7B1O.js";const Ce={class:"flex items-center justify-between"},Ae={class:"text-xl font-semibold text-slate-900 dark:text-white"},Me={class:"mb-6 overflow-hidden rounded-2xl bg-gradient-to-r from-primary-500 to-purple-600 shadow-lg"},ze={class:"px-6 py-5"},Ue={key:0,class:"flex items-center justify-between"},Fe={class:"text-sm font-medium text-primary-100"},Ie={class:"mt-1 text-3xl font-bold text-white"},Ee={class:"mt-1 text-sm text-primary-200"},Be={key:0,class:"text-primary-300"},De=["disabled"],Re={key:0,class:"mr-2 h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none"},$e={key:1,class:"mr-2 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},qe={key:1},He={class:"mb-4 text-sm font-medium text-primary-100"},Le={value:"",class:"text-slate-900"},Oe=["value"],Ne={value:"",class:"text-slate-900"},Pe=["value"],Ge=["placeholder"],Je={value:"",class:"text-slate-900"},Ke=["value"],Qe=["placeholder"],We=["disabled"],Xe={class:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-3"},Ye={class:"overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800 px-4 py-5"},Ze={class:"truncate text-sm font-medium text-slate-500 dark:text-slate-400"},et={class:"mt-1 text-2xl font-semibold text-slate-900 dark:text-white"},tt={class:"overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800 px-4 py-5"},st={class:"truncate text-sm font-medium text-slate-500 dark:text-slate-400"},lt={class:"mt-1 text-2xl font-semibold text-amber-600 dark:text-amber-400"},ot={class:"overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800 px-4 py-5"},rt={class:"truncate text-sm font-medium text-slate-500 dark:text-slate-400"},at={class:"mt-1 text-2xl font-semibold text-primary-600 dark:text-primary-400"},it={class:"mb-6 overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800"},dt={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},nt={class:"text-sm font-medium text-slate-900 dark:text-white"},ct={class:"grid grid-cols-1 gap-4 sm:grid-cols-6"},ut={class:"sm:col-span-1"},mt={class:"block text-xs font-medium text-slate-700 dark:text-slate-300"},pt={class:"sm:col-span-1"},xt={class:"block text-xs font-medium text-slate-700 dark:text-slate-300"},ht={value:""},bt=["value"],_t={class:"sm:col-span-1"},vt={class:"block text-xs font-medium text-slate-700 dark:text-slate-300"},ft={value:""},gt=["value"],kt=["placeholder"],yt={class:"sm:col-span-1"},wt={class:"block text-xs font-medium text-slate-700 dark:text-slate-300"},jt={class:"sm:col-span-1"},Vt={class:"block text-xs font-medium text-slate-700 dark:text-slate-300"},St=["placeholder"],Tt={class:"sm:col-span-1 flex items-end"},Ct=["disabled"],At={class:"mb-6 flex flex-wrap items-center justify-between gap-4"},Mt={class:"flex flex-wrap gap-4"},zt={value:""},Ut=["value"],Ft={value:""},It={value:"0"},Et={value:"1"},Bt={value:""},Dt=["value"],Rt={class:"overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800"},$t={class:"min-w-full divide-y divide-slate-200 dark:divide-slate-700"},qt={class:"bg-slate-50 dark:bg-slate-700"},Ht={class:"py-3.5 pl-4 pr-3 sm:pl-6"},Lt=["checked"],Ot={class:"py-3.5 px-3 text-left text-sm font-semibold text-slate-900 dark:text-white"},Nt={class:"px-3 py-3.5 text-left text-sm font-semibold text-slate-900 dark:text-white"},Pt={class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-slate-900 dark:text-white md:table-cell"},Gt={class:"px-3 py-3.5 text-right text-sm font-semibold text-slate-900 dark:text-white"},Jt={class:"hidden px-3 py-3.5 text-right text-sm font-semibold text-slate-900 dark:text-white lg:table-cell"},Kt={class:"px-3 py-3.5 text-center text-sm font-semibold text-slate-900 dark:text-white"},Qt={class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},Wt={class:"sr-only"},Xt={class:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800"},Yt={key:0},Zt={colspan:"8",class:"py-10 text-center text-sm text-slate-500 dark:text-slate-400"},es={class:"mt-2"},ts={class:"mt-1 text-xs"},ss={class:"py-4 pl-4 pr-3 sm:pl-6"},ls=["checked","onChange"],os={class:"whitespace-nowrap py-4 px-3 text-sm text-slate-500 dark:text-slate-400"},rs={class:"text-xs"},as={class:"whitespace-nowrap px-3 py-4"},is={class:"font-medium text-slate-900 dark:text-white"},ds={class:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-1"},ns={key:1,class:"text-slate-400 dark:text-slate-500"},cs={class:"hidden px-3 py-4 text-sm text-slate-500 dark:text-slate-400 md:table-cell"},us={class:"truncate max-w-xs block"},ms={class:"whitespace-nowrap px-3 py-4 text-right text-sm font-mono font-medium text-slate-900 dark:text-white"},ps={class:"hidden whitespace-nowrap px-3 py-4 text-right text-sm text-slate-500 dark:text-slate-400 lg:table-cell"},xs={class:"whitespace-nowrap px-3 py-4 text-center text-sm"},hs={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},bs={key:0,class:"flex items-center justify-end gap-2"},_s=["onClick","title"],vs=["onClick","title"],fs={key:0,class:"mt-6 flex items-center justify-between"},gs={class:"text-sm text-slate-700 dark:text-slate-400"},ks={class:"isolate inline-flex -space-x-px rounded-xl shadow-sm"},ys={key:1,class:"relative z-50"},ws={class:"fixed inset-0 z-50 overflow-y-auto"},js={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},Vs={class:"relative transform overflow-hidden rounded-2xl bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all dark:bg-slate-800 sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},Ss={class:"text-lg font-semibold text-slate-900 dark:text-white"},Ts={class:"mt-2 text-sm text-slate-500 dark:text-slate-400"},Cs={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},As={class:"mt-1 relative rounded-xl shadow-sm"},Ms={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},zs={key:1,class:"mt-1 block w-full rounded-xl border border-slate-300 bg-slate-100 px-3 py-2 text-slate-500 dark:border-slate-600 dark:bg-slate-600 dark:text-slate-400 sm:text-sm"},Us={class:"flex items-center"},Fs={for:"group_by_project",class:"ml-2 block text-sm text-slate-700 dark:text-slate-300"},Is={class:"mt-6 flex justify-end space-x-3"},Es=["disabled"],Bs={key:2,class:"relative z-50"},Ds={class:"fixed inset-0 z-50 overflow-y-auto"},Rs={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},$s={class:"relative transform overflow-hidden rounded-2xl bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all dark:bg-slate-800 sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},qs={class:"text-lg font-semibold text-slate-900 dark:text-white"},Hs={key:0,class:"mt-2 text-sm text-slate-500 dark:text-slate-400"},Ls={key:0,class:"rounded-xl bg-amber-50 p-4 dark:bg-amber-900/20"},Os={class:"text-sm text-amber-800 dark:text-amber-200"},Ns={key:1},Ps={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},Gs={value:""},Js=["value"],Ks={key:2,class:"grid grid-cols-2 gap-4"},Qs={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},Ws={class:"mt-1 relative rounded-xl shadow-sm"},Xs={class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},Ys={key:1,class:"mt-1 block w-full rounded-xl border border-slate-300 bg-slate-100 px-3 py-2 text-slate-500 dark:border-slate-600 dark:bg-slate-600 dark:text-slate-400 sm:text-sm"},Zs={class:"mt-6 flex justify-end space-x-3"},el=["disabled"],al={__name:"Index",props:{entries:Object,runningTimer:Object,summary:Object,filters:Object,clients:Array,projects:Array,periods:Array,draftInvoices:Array,defaultHourlyRate:[Number,String],isVatExempt:Boolean},setup(n){const{t:r}=Te(),m=n,P=m.isVatExempt?0:17,F=k(m.filters.client_id||""),I=k(m.filters.billed||""),E=k(m.filters.period||""),x=k([]),B=k(!1),D=k(!1),f=k(null),c=H({client_id:"",project_id:"",task_id:"",project_name:"",description:""}),u=H({client_id:"",project_id:"",task_id:"",project_name:"",description:"",date:new Date().toISOString().split("T")[0],duration:""}),W=U(()=>c.client_id?m.projects.filter(d=>d.client_id===c.client_id||!d.client_id):[]),X=U(()=>{if(!c.project_id)return[];const d=m.projects.find(l=>l.id===c.project_id);return(d==null?void 0:d.tasks)||[]}),Y=U(()=>u.client_id?m.projects.filter(d=>d.client_id===u.client_id||!d.client_id):[]);z(()=>c.client_id,()=>{c.project_id="",c.task_id=""}),z(()=>c.project_id,()=>{c.task_id=""}),z(()=>u.client_id,()=>{u.project_id="",u.task_id=""}),z(()=>u.project_id,()=>{u.task_id=""});const g=H({time_entry_ids:[],hourly_rate:100,vat_rate:P,group_by_project:!0}),b=H({invoice_id:"",hourly_rate:"",vat_rate:P}),T=k(0),C=k(!1),ae=k(null);let j=null,R=null;const ie=d=>{const l=d.target;l.style.height="auto",l.style.height=Math.min(l.scrollHeight,128)+"px"},Z=()=>R?Math.floor((Date.now()-R)/1e3):0,G=()=>{j&&(clearInterval(j),j=null),m.runningTimer&&m.runningTimer.started_at&&(R=new Date(m.runningTimer.started_at).getTime(),T.value=Z(),j=setInterval(()=>{T.value=Z()},1e3))},J=()=>{j&&(clearInterval(j),j=null),R=null,T.value=0};ge(()=>{m.runningTimer&&G()}),ke(()=>{J()}),z(()=>m.runningTimer,(d,l)=>{d&&!l?G():!d&&l?J():d&&l&&d.id!==l.id&&G()},{deep:!0});const de=U(()=>{const d=Math.floor(T.value/3600),l=Math.floor(T.value%3600/60),V=T.value%60;return`${d}:${String(l).padStart(2,"0")}:${String(V).padStart(2,"0")}`});z([F,I,E],()=>{Q.get(route("time-entries.index"),{client_id:F.value||void 0,billed:I.value||void 0,period:E.value||void 0},{preserveState:!0,replace:!0})});const ne=()=>{c.processing||c.post(route("time-entries.start"),{preserveScroll:!0,onSuccess:()=>{c.reset()}})},ce=()=>{!m.runningTimer||C.value||(C.value=!0,Q.post(route("time-entries.stop",m.runningTimer.id),{},{preserveScroll:!0,onSuccess:()=>{J()},onFinish:()=>{C.value=!1}}))},ue=()=>{u.post(route("time-entries.store"),{preserveScroll:!0,onSuccess:()=>{u.reset(),u.date=new Date().toISOString().split("T")[0]}})},me=d=>{confirm(r("delete_time_entry"))&&Q.delete(route("time-entries.destroy",d.id),{preserveScroll:!0})},pe=d=>{const l=x.value.indexOf(d);l===-1?x.value.push(d):x.value.splice(l,1)},xe=()=>{const d=m.entries.data.filter(l=>!l.is_billed);x.value.length===d.length?x.value=[]:x.value=d.map(l=>l.id)},he=()=>{if(x.value.length===0){alert(r("select_at_least_one"));return}const d=m.entries.data.find(l=>l.id===x.value[0]);d&&d.client&&(g.hourly_rate=d.client.default_hourly_rate||100),B.value=!0},be=()=>{g.time_entry_ids=x.value,g.post(route("time-entries.to-invoice"),{onSuccess:()=>{B.value=!1,x.value=[]}})},$=U(()=>f.value?m.draftInvoices.filter(d=>d.client_id===f.value.client_id):[]),_e=d=>{f.value=d,b.reset(),b.vat_rate=P;const l=m.clients.find(A=>A.id===d.client_id);b.hourly_rate=d.hourly_rate||(l==null?void 0:l.default_hourly_rate)||m.defaultHourlyRate||0;const V=m.draftInvoices.filter(A=>A.client_id===d.client_id);V.length>0&&(b.invoice_id=V[0].id),D.value=!0},ve=()=>{f.value&&b.post(route("time-entries.add-to-invoice",f.value.id),{onSuccess:()=>{D.value=!1,f.value=null}})},ee=d=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(d),fe=d=>d?new Date(d).toLocaleDateString("fr-FR"):"-",te=d=>d?new Date(d).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"-";return(d,l)=>(a(),i(_,null,[L(t(ye),{title:t(r)("time_tracking")},null,8,["title"]),L(Se,null,{header:O(()=>[e("div",Ce,[e("h1",Ae,o(t(r)("time_tracking")),1),L(t(K),{href:d.route("time-entries.summary"),class:"inline-flex items-center rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},{default:O(()=>[l[22]||(l[22]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M15.5 2A1.5 1.5 0 0014 3.5v13a1.5 1.5 0 001.5 1.5h1a1.5 1.5 0 001.5-1.5v-13A1.5 1.5 0 0016.5 2h-1zM9.5 6A1.5 1.5 0 008 7.5v9A1.5 1.5 0 009.5 18h1a1.5 1.5 0 001.5-1.5v-9A1.5 1.5 0 0010.5 6h-1zM3.5 10A1.5 1.5 0 002 11.5v5A1.5 1.5 0 003.5 18h1A1.5 1.5 0 006 16.5v-5A1.5 1.5 0 004.5 10h-1z"})],-1)),S(" "+o(t(r)("reports")),1)]),_:1},8,["href"])])]),default:O(()=>{var V,A,se;return[e("div",Me,[e("div",ze,[n.runningTimer?(a(),i("div",Ue,[e("div",null,[e("p",Fe,o(t(r)("running_timer")),1),e("p",Ie,o(de.value),1),e("p",Ee,[S(o((V=n.runningTimer.client)==null?void 0:V.name)+" - "+o(((A=n.runningTimer.project)==null?void 0:A.title)||n.runningTimer.project_name||t(r)("no_project"))+" ",1),n.runningTimer.task?(a(),i("span",Be,"/ "+o(n.runningTimer.task.title),1)):h("",!0)])]),e("button",{onClick:ce,disabled:C.value,class:"inline-flex items-center rounded-full bg-white/20 px-6 py-3 text-sm font-semibold text-white backdrop-blur hover:bg-white/30 focus:outline-none focus:ring-2 focus:ring-white disabled:opacity-50 disabled:cursor-not-allowed"},[C.value?(a(),i("svg",Re,[...l[23]||(l[23]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(a(),i("svg",$e,[...l[24]||(l[24]=[e("path",{"fill-rule":"evenodd",d:"M5.5 3.5A1.5 1.5 0 017 5v10a1.5 1.5 0 01-3 0V5a1.5 1.5 0 011.5-1.5zm8 0A1.5 1.5 0 0115 5v10a1.5 1.5 0 01-3 0V5a1.5 1.5 0 011.5-1.5z","clip-rule":"evenodd"},null,-1)])])),S(" "+o(C.value?t(r)("stopping"):t(r)("stop")),1)],8,De)])):(a(),i("div",qe,[e("p",He,o(t(r)("start_new_timer")),1),e("form",{onSubmit:N(ne,["prevent"]),class:"flex flex-wrap gap-3"},[p(e("select",{"onUpdate:modelValue":l[0]||(l[0]=s=>t(c).client_id=s),required:"",class:"rounded-xl border-0 bg-white/10 py-2 pl-3 pr-10 text-white placeholder-primary-200 backdrop-blur focus:ring-2 focus:ring-white sm:text-sm"},[e("option",Le,o(t(r)("select_client")),1),(a(!0),i(_,null,y(n.clients,s=>(a(),i("option",{key:s.id,value:s.id,class:"text-slate-900"},o(s.name),9,Oe))),128))],512),[[v,t(c).client_id]]),W.value.length>0?p((a(),i("select",{key:0,"onUpdate:modelValue":l[1]||(l[1]=s=>t(c).project_id=s),class:"rounded-xl border-0 bg-white/10 py-2 pl-3 pr-10 text-white placeholder-primary-200 backdrop-blur focus:ring-2 focus:ring-white sm:text-sm"},[e("option",Ne,o(t(r)("project"))+" ("+o(t(r)("optional"))+")",1),(a(!0),i(_,null,y(W.value,s=>(a(),i("option",{key:s.id,value:s.id,class:"text-slate-900"},o(s.title),9,Pe))),128))],512)),[[v,t(c).project_id]]):p((a(),i("input",{key:1,"onUpdate:modelValue":l[2]||(l[2]=s=>t(c).project_name=s),type:"text",placeholder:t(r)("project_name"),class:"rounded-xl border-0 bg-white/10 py-2 px-3 text-white placeholder-primary-200 backdrop-blur focus:ring-2 focus:ring-white sm:text-sm"},null,8,Ge)),[[w,t(c).project_name]]),X.value.length>0?p((a(),i("select",{key:2,"onUpdate:modelValue":l[3]||(l[3]=s=>t(c).task_id=s),class:"rounded-xl border-0 bg-white/10 py-2 pl-3 pr-10 text-white placeholder-primary-200 backdrop-blur focus:ring-2 focus:ring-white sm:text-sm"},[e("option",Je,o(t(r)("task"))+" ("+o(t(r)("optional"))+")",1),(a(!0),i(_,null,y(X.value,s=>(a(),i("option",{key:s.id,value:s.id,class:"text-slate-900"},o(s.title),9,Ke))),128))],512)),[[v,t(c).task_id]]):h("",!0),p(e("textarea",{"onUpdate:modelValue":l[4]||(l[4]=s=>t(c).description=s),placeholder:`${t(r)("description")} (${t(r)("optional")})`,rows:"1",onInput:ie,ref_key:"timerDescriptionRef",ref:ae,class:"flex-1 rounded-xl border-0 bg-white/10 py-2 px-3 text-white placeholder-primary-200 backdrop-blur focus:ring-2 focus:ring-white sm:text-sm resize-y min-h-[38px] max-h-32"},null,40,Qe),[[w,t(c).description]]),e("button",{type:"submit",disabled:t(c).processing||!t(c).client_id,class:"inline-flex items-center rounded-full bg-white px-6 py-2 text-sm font-semibold text-primary-600 shadow-sm hover:bg-primary-50 disabled:opacity-50"},[l[25]||(l[25]=e("svg",{class:"mr-2 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"})],-1)),S(" "+o(t(r)("start")),1)],8,We)],32)]))])]),e("div",Xe,[e("div",Ye,[e("dt",Ze,o(t(r)("total_time")),1),e("dd",et,o(n.summary.total_formatted),1)]),e("div",tt,[e("dt",st,o(t(r)("unbilled")),1),e("dd",lt,o(n.summary.unbilled_formatted),1)]),e("div",ot,[e("dt",rt,o(t(r)("selected")),1),e("dd",at,o(x.value.length),1)])]),e("div",it,[e("div",dt,[e("h3",nt,o(t(r)("add_manual_entry")),1)]),e("form",{onSubmit:N(ue,["prevent"]),class:"px-6 py-4"},[e("div",ct,[e("div",ut,[e("label",mt,o(t(r)("date")),1),p(e("input",{"onUpdate:modelValue":l[5]||(l[5]=s=>t(u).date=s),type:"date",required:"",class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},null,512),[[w,t(u).date]])]),e("div",pt,[e("label",xt,o(t(r)("client")),1),p(e("select",{"onUpdate:modelValue":l[6]||(l[6]=s=>t(u).client_id=s),required:"",class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},[e("option",ht,o(t(r)("select")),1),(a(!0),i(_,null,y(n.clients,s=>(a(),i("option",{key:s.id,value:s.id},o(s.name),9,bt))),128))],512),[[v,t(u).client_id]])]),e("div",_t,[e("label",vt,o(t(r)("project")),1),Y.value.length>0?p((a(),i("select",{key:0,"onUpdate:modelValue":l[7]||(l[7]=s=>t(u).project_id=s),class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},[e("option",ft,o(t(r)("select")),1),(a(!0),i(_,null,y(Y.value,s=>(a(),i("option",{key:s.id,value:s.id},o(s.title),9,gt))),128))],512)),[[v,t(u).project_id]]):p((a(),i("input",{key:1,"onUpdate:modelValue":l[8]||(l[8]=s=>t(u).project_name=s),type:"text",placeholder:t(r)("project_name"),class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},null,8,kt)),[[w,t(u).project_name]])]),e("div",yt,[e("label",wt,o(t(r)("duration_hhmm")),1),p(e("input",{"onUpdate:modelValue":l[9]||(l[9]=s=>t(u).duration=s),type:"text",required:"",placeholder:"1:30",pattern:"\\d+:\\d{2}",class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},null,512),[[w,t(u).duration]])]),e("div",jt,[e("label",Vt,o(t(r)("description")),1),p(e("input",{"onUpdate:modelValue":l[10]||(l[10]=s=>t(u).description=s),type:"text",placeholder:t(r)("description"),class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},null,8,St),[[w,t(u).description]])]),e("div",Tt,[e("button",{type:"submit",disabled:t(u).processing,class:"w-full inline-flex justify-center items-center rounded-xl bg-primary-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-500 disabled:opacity-50"},o(t(r)("add")),9,Ct)])])],32)]),e("div",At,[e("div",Mt,[p(e("select",{"onUpdate:modelValue":l[11]||(l[11]=s=>F.value=s),class:"rounded-xl border-0 py-1.5 pl-3 pr-10 text-slate-900 ring-1 ring-inset ring-slate-300 focus:ring-2 focus:ring-primary-600 dark:bg-slate-800 dark:text-white dark:ring-slate-600 sm:text-sm"},[e("option",zt,o(t(r)("all_clients")),1),(a(!0),i(_,null,y(n.clients,s=>(a(),i("option",{key:s.id,value:s.id},o(s.name),9,Ut))),128))],512),[[v,F.value]]),p(e("select",{"onUpdate:modelValue":l[12]||(l[12]=s=>I.value=s),class:"rounded-xl border-0 py-1.5 pl-3 pr-10 text-slate-900 ring-1 ring-inset ring-slate-300 focus:ring-2 focus:ring-primary-600 dark:bg-slate-800 dark:text-white dark:ring-slate-600 sm:text-sm"},[e("option",Ft,o(t(r)("all_statuses")),1),e("option",It,o(t(r)("unbilled")),1),e("option",Et,o(t(r)("billed")),1)],512),[[v,I.value]]),p(e("select",{"onUpdate:modelValue":l[13]||(l[13]=s=>E.value=s),class:"rounded-xl border-0 py-1.5 pl-3 pr-10 text-slate-900 ring-1 ring-inset ring-slate-300 focus:ring-2 focus:ring-primary-600 dark:bg-slate-800 dark:text-white dark:ring-slate-600 sm:text-sm"},[e("option",Bt,o(t(r)("all_periods")),1),(a(!0),i(_,null,y(n.periods,s=>(a(),i("option",{key:s.value,value:s.value},o(s.label),9,Dt))),128))],512),[[v,E.value]])]),x.value.length>0?(a(),i("button",{key:0,onClick:he,class:"inline-flex items-center rounded-xl bg-green-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500"},[l[26]||(l[26]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm4.75 6.75a.75.75 0 011.5 0v2.546l.943-1.048a.75.75 0 011.114 1.004l-2.25 2.5a.75.75 0 01-1.114 0l-2.25-2.5a.75.75 0 111.114-1.004l.943 1.048V8.75z","clip-rule":"evenodd"})],-1)),S(" "+o(t(r)("convert_to_invoice"))+" ("+o(x.value.length)+") ",1)])):h("",!0)]),e("div",Rt,[e("table",$t,[e("thead",qt,[e("tr",null,[e("th",Ht,[e("input",{type:"checkbox",checked:x.value.length>0&&x.value.length===n.entries.data.filter(s=>!s.is_billed).length,onChange:xe,class:"h-4 w-4 rounded border-slate-300 text-primary-600 focus:ring-primary-500"},null,40,Lt)]),e("th",Ot,o(t(r)("date")),1),e("th",Nt,o(t(r)("client_project")),1),e("th",Pt,o(t(r)("description")),1),e("th",Gt,o(t(r)("duration")),1),e("th",Jt,o(t(r)("amount")),1),e("th",Kt,o(t(r)("status")),1),e("th",Qt,[e("span",Wt,o(t(r)("actions")),1)])])]),e("tbody",Xt,[n.entries.data.length===0?(a(),i("tr",Yt,[e("td",Zt,[l[27]||(l[27]=e("svg",{class:"mx-auto h-12 w-12 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",es,o(t(r)("no_time_entries")),1),e("p",ts,o(t(r)("start_new_timer")),1)])])):h("",!0),(a(!0),i(_,null,y(n.entries.data,s=>{var M,le,oe;return a(),i("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-700"},[e("td",ss,[s.is_billed?h("",!0):(a(),i("input",{key:0,type:"checkbox",checked:x.value.includes(s.id),onChange:q=>pe(s.id),class:"h-4 w-4 rounded border-slate-300 text-primary-600 focus:ring-primary-500"},null,40,ls))]),e("td",os,[e("div",null,o(fe(s.started_at)),1),e("div",rs,o(te(s.started_at))+" - "+o(te(s.stopped_at)),1)]),e("td",as,[e("div",is,o(((M=s.client)==null?void 0:M.name)||t(r)("unknown_client")),1),e("div",ds,[(le=s.project)!=null&&le.color?(a(),i("span",{key:0,class:"inline-block h-2 w-2 rounded-full",style:we({backgroundColor:s.project.color})},null,4)):h("",!0),S(" "+o(((oe=s.project)==null?void 0:oe.title)||s.project_name||t(r)("no_project"))+" ",1),s.task?(a(),i("span",ns,"/ "+o(s.task.title),1)):h("",!0)])]),e("td",cs,[e("span",us,o(s.description||"-"),1)]),e("td",ms,o(s.duration_formatted),1),e("td",ps,o(s.amount?ee(s.amount):"-"),1),e("td",xs,[e("span",{class:re(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",s.is_billed?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"])},o(s.is_billed?t(r)("billed"):t(r)("unbilled")),3)]),e("td",hs,[s.is_billed?h("",!0):(a(),i("div",bs,[n.draftInvoices.some(q=>q.client_id===s.client_id)?(a(),i("button",{key:0,onClick:q=>_e(s),class:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300",title:t(r)("add_to_invoice")},[...l[28]||(l[28]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1)])],8,_s)):h("",!0),e("button",{onClick:q=>me(s),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:t(r)("delete")},[...l[29]||(l[29]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.519.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z","clip-rule":"evenodd"})],-1)])],8,vs)]))])])}),128))])])]),n.entries.links&&n.entries.links.length>3?(a(),i("div",fs,[e("div",gs,o(t(r)("showing"))+" "+o(n.entries.from)+" "+o(t(r)("to"))+" "+o(n.entries.to)+" "+o(t(r)("of"))+" "+o(n.entries.total)+" "+o(t(r)("results")),1),e("nav",ks,[(a(!0),i(_,null,y(n.entries.links,(s,M)=>(a(),i(_,{key:M},[s.url?(a(),je(t(K),{key:0,href:s.url,class:re([s.active?"z-10 bg-primary-600 text-white":"text-slate-900 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 dark:text-slate-300 dark:ring-slate-600 dark:hover:bg-slate-700","relative inline-flex items-center px-4 py-2 text-sm font-semibold focus:z-20",M===0?"rounded-l-md":"",M===n.entries.links.length-1?"rounded-r-md":""]),innerHTML:s.label,"preserve-scroll":""},null,8,["href","class","innerHTML"])):h("",!0)],64))),128))])])):h("",!0),B.value?(a(),i("div",ys,[l[32]||(l[32]=e("div",{class:"fixed inset-0 bg-slate-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",ws,[e("div",js,[e("div",Vs,[e("div",null,[e("h3",Ss,o(t(r)("convert_to_invoice")),1),e("p",Ts,o(x.value.length)+" "+o(t(r)("selected")),1)]),e("form",{onSubmit:N(be,["prevent"]),class:"mt-6 space-y-4"},[e("div",null,[e("label",Cs,o(t(r)("hourly_rate")),1),e("div",As,[p(e("input",{"onUpdate:modelValue":l[14]||(l[14]=s=>t(g).hourly_rate=s),type:"number",step:"0.01",min:"0",required:"",class:"block w-full rounded-xl border-slate-300 pr-12 focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},null,512),[[w,t(g).hourly_rate]]),l[30]||(l[30]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[e("span",{class:"text-slate-500 dark:text-slate-400 sm:text-sm"},"EUR/h")],-1))])]),e("div",null,[e("label",Ms,o(t(r)("vat_rate")),1),n.isVatExempt?(a(),i("div",zs," 0% ")):p((a(),i("select",{key:0,"onUpdate:modelValue":l[15]||(l[15]=s=>t(g).vat_rate=s),class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},[...l[31]||(l[31]=[e("option",{value:0},"0%",-1),e("option",{value:3},"3%",-1),e("option",{value:8},"8%",-1),e("option",{value:14},"14%",-1),e("option",{value:17},"17%",-1)])],512)),[[v,t(g).vat_rate]])]),e("div",Us,[p(e("input",{"onUpdate:modelValue":l[16]||(l[16]=s=>t(g).group_by_project=s),type:"checkbox",id:"group_by_project",class:"h-4 w-4 rounded border-slate-300 text-primary-600 focus:ring-primary-500"},null,512),[[Ve,t(g).group_by_project]]),e("label",Fs,o(t(r)("group_by_project")),1)]),e("div",Is,[e("button",{type:"button",onClick:l[17]||(l[17]=s=>B.value=!1),class:"rounded-xl border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},o(t(r)("cancel")),1),e("button",{type:"submit",disabled:t(g).processing,class:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-500 disabled:opacity-50"},o(t(r)("create_invoice")),9,Es)])],32)])])])])):h("",!0),D.value?(a(),i("div",Bs,[l[35]||(l[35]=e("div",{class:"fixed inset-0 bg-slate-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",Ds,[e("div",Rs,[e("div",$s,[e("div",null,[e("h3",qs,o(t(r)("add_to_invoice")),1),f.value?(a(),i("p",Hs,o((se=f.value.client)==null?void 0:se.name)+" - "+o(f.value.duration_formatted),1)):h("",!0)]),e("form",{onSubmit:N(ve,["prevent"]),class:"mt-6 space-y-4"},[$.value.length===0?(a(),i("div",Ls,[e("p",Os,o(t(r)("no_draft_invoice")),1),L(t(K),{href:d.route("invoices.create"),class:"mt-2 inline-flex text-sm font-medium text-amber-800 hover:text-amber-700 dark:text-amber-200"},{default:O(()=>[S(o(t(r)("create_new_invoice")),1)]),_:1},8,["href"])])):(a(),i("div",Ns,[e("label",Ps,o(t(r)("invoice")),1),p(e("select",{"onUpdate:modelValue":l[18]||(l[18]=s=>t(b).invoice_id=s),required:"",class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},[e("option",Gs,o(t(r)("select")),1),(a(!0),i(_,null,y($.value,s=>(a(),i("option",{key:s.id,value:s.id},o(s.title||s.display_number)+" - "+o(s.created_at)+" ("+o(ee(s.total_ht))+" "+o(t(r)("ht"))+") ",9,Js))),128))],512),[[v,t(b).invoice_id]])])),$.value.length>0?(a(),i("div",Ks,[e("div",null,[e("label",Qs,o(t(r)("hourly_rate")),1),e("div",Ws,[p(e("input",{"onUpdate:modelValue":l[19]||(l[19]=s=>t(b).hourly_rate=s),type:"number",step:"0.01",min:"0",required:"",class:"block w-full rounded-xl border-slate-300 pr-12 focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},null,512),[[w,t(b).hourly_rate]]),l[33]||(l[33]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[e("span",{class:"text-slate-500 dark:text-slate-400 sm:text-sm"},"â‚¬/h")],-1))])]),e("div",null,[e("label",Xs,o(t(r)("vat_rate")),1),n.isVatExempt?(a(),i("div",Ys," 0% ")):p((a(),i("select",{key:0,"onUpdate:modelValue":l[20]||(l[20]=s=>t(b).vat_rate=s),class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white sm:text-sm"},[...l[34]||(l[34]=[e("option",{value:0},"0%",-1),e("option",{value:3},"3%",-1),e("option",{value:8},"8%",-1),e("option",{value:14},"14%",-1),e("option",{value:17},"17%",-1)])],512)),[[v,t(b).vat_rate]])])])):h("",!0),e("div",Zs,[e("button",{type:"button",onClick:l[21]||(l[21]=s=>{D.value=!1,f.value=null}),class:"rounded-xl border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},o(t(r)("cancel")),1),$.value.length>0?(a(),i("button",{key:0,type:"submit",disabled:t(b).processing||!t(b).invoice_id,class:"rounded-xl bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-500 disabled:opacity-50"},o(t(r)("add")),9,el)):h("",!0)])],32)])])])])):h("",!0)]}),_:1})],64))}};export{al as default};
