import{u as C,c as n,a as o,b as t,h as M,i as _,d as e,w as A,t as d,f as c,v as h,o as i,F as f,j as x,k as b,s as q,e as y,g as B,l as w,A as V}from"./app-BKH9vAec.js";import{_ as N}from"./AppLayout-C80Z02Dv.js";import{_ as u}from"./InputError-Di87Doje.js";import{_ as m}from"./InputLabel-CmPAT9T5.js";import{_ as R}from"./PrimaryButton-C0flks-A.js";import{u as S}from"./useTranslations-CNYJWptv.js";import"./DropdownLink-eVuEEMyi.js";const T={class:"flex items-center space-x-4"},D={class:"text-xl font-semibold text-slate-900 dark:text-white"},$={class:"overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800"},E={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},L={class:"text-lg font-medium text-slate-900 dark:text-white"},H={class:"px-6 py-4"},I={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},z=["placeholder"],O={class:"sm:col-span-2"},G={value:""},J=["value"],K={class:"overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800"},P={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},Q={class:"text-lg font-medium text-slate-900 dark:text-white"},W={class:"px-6 py-4"},X={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},Y={class:"relative mt-1"},Z=["value"],ee={class:"mt-1 rounded-xl bg-slate-50 dark:bg-slate-700 px-4 py-3 text-sm"},te={class:"flex justify-between"},se={class:"text-slate-500 dark:text-slate-400"},ae={class:"font-medium text-slate-900 dark:text-white"},le={class:"flex justify-between mt-1"},re={class:"text-slate-500 dark:text-slate-400"},oe={class:"font-medium text-slate-900 dark:text-white"},de={class:"overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800"},ne={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},ie={class:"text-lg font-medium text-slate-900 dark:text-white"},ce={class:"px-6 py-4"},ue={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},me={value:""},pe=["value"],_e=["placeholder"],he={class:"sm:col-span-2"},fe=["placeholder"],ve={class:"sm:col-span-2"},xe={class:"flex items-center"},be={for:"is_deductible",class:"ml-2 block text-sm text-slate-900 dark:text-white"},ge={class:"overflow-hidden rounded-2xl bg-white shadow dark:bg-slate-800"},ke={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},ye={class:"text-lg font-medium text-slate-900 dark:text-white"},we={class:"px-6 py-4"},Ve={class:"flex items-center justify-center w-full"},Fe={for:"attachment",class:"flex flex-col items-center justify-center w-full h-32 border-2 border-slate-300 border-dashed rounded-2xl cursor-pointer bg-slate-50 hover:bg-slate-100 dark:border-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600"},Ue={class:"flex flex-col items-center justify-center pt-5 pb-6"},je={class:"mb-2 text-sm text-slate-500 dark:text-slate-400"},Ce={class:"font-semibold"},Me={class:"text-xs text-slate-500 dark:text-slate-400"},Ae={key:0,class:"mt-3 text-sm text-slate-600 dark:text-slate-400"},qe={class:"flex justify-end space-x-3"},Be={key:0},Ne={key:1},He={__name:"Create",props:{categories:Array,vatRates:Array,paymentMethods:Array},setup(v){const{t:a}=S(),s=C({date:new Date().toISOString().split("T")[0],provider_name:"",category:"",amount_ht:"",vat_rate:17,description:"",is_deductible:!0,payment_method:"",reference:"",attachment:null}),g=V(()=>!s.amount_ht||!s.vat_rate?0:(parseFloat(s.amount_ht)*parseFloat(s.vat_rate)/100).toFixed(2)),F=V(()=>s.amount_ht?(parseFloat(s.amount_ht)+parseFloat(g.value)).toFixed(2):0),k=p=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(p),U=p=>{s.attachment=p.target.files[0]},j=()=>{s.post(route("expenses.store"),{forceFormData:!0})};return(p,r)=>(i(),n(f,null,[o(t(M),{title:t(a)("new_expense")},null,8,["title"]),o(N,null,{header:_(()=>[e("div",T,[o(t(w),{href:p.route("expenses.index"),class:"text-slate-400 hover:text-slate-500 dark:text-slate-500 dark:hover:text-slate-400"},{default:_(()=>[...r[9]||(r[9]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"]),e("h1",D,d(t(a)("new_expense")),1)])]),default:_(()=>[e("form",{onSubmit:A(j,["prevent"]),class:"space-y-6"},[e("div",$,[e("div",E,[e("h2",L,d(t(a)("information")),1)]),e("div",H,[e("div",I,[e("div",null,[o(m,{for:"date",value:t(a)("date")},null,8,["value"]),c(e("input",{id:"date","onUpdate:modelValue":r[0]||(r[0]=l=>t(s).date=l),type:"date",class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:""},null,512),[[h,t(s).date]]),o(u,{message:t(s).errors.date,class:"mt-2"},null,8,["message"])]),e("div",null,[o(m,{for:"provider_name",value:t(a)("supplier")},null,8,["value"]),c(e("input",{id:"provider_name","onUpdate:modelValue":r[1]||(r[1]=l=>t(s).provider_name=l),type:"text",class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:t(a)("example_provider"),required:""},null,8,z),[[h,t(s).provider_name]]),o(u,{message:t(s).errors.provider_name,class:"mt-2"},null,8,["message"])]),e("div",O,[o(m,{for:"category",value:t(a)("category")},null,8,["value"]),c(e("select",{id:"category","onUpdate:modelValue":r[2]||(r[2]=l=>t(s).category=l),class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:""},[e("option",G,d(t(a)("select_category")),1),(i(!0),n(f,null,x(v.categories,l=>(i(),n("option",{key:l.value,value:l.value},d(l.label),9,J))),128))],512),[[b,t(s).category]]),o(u,{message:t(s).errors.category,class:"mt-2"},null,8,["message"])])])])]),e("div",K,[e("div",P,[e("h2",Q,d(t(a)("calculated_amounts")),1)]),e("div",W,[e("div",X,[e("div",null,[o(m,{for:"amount_ht",value:t(a)("amount_ht")},null,8,["value"]),e("div",Y,[c(e("input",{id:"amount_ht","onUpdate:modelValue":r[3]||(r[3]=l=>t(s).amount_ht=l),type:"number",step:"0.01",min:"0.01",class:"block w-full rounded-xl border-slate-300 pr-12 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"0.00",required:""},null,512),[[h,t(s).amount_ht]]),r[10]||(r[10]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[e("span",{class:"text-slate-500 dark:text-slate-400"},"EUR")],-1))]),o(u,{message:t(s).errors.amount_ht,class:"mt-2"},null,8,["message"])]),e("div",null,[o(m,{for:"vat_rate",value:t(a)("vat_rate_label")},null,8,["value"]),c(e("select",{id:"vat_rate","onUpdate:modelValue":r[4]||(r[4]=l=>t(s).vat_rate=l),class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:""},[(i(!0),n(f,null,x(v.vatRates,l=>(i(),n("option",{key:l.value,value:l.value},d(l.label),9,Z))),128))],512),[[b,t(s).vat_rate,void 0,{number:!0}]]),o(u,{message:t(s).errors.vat_rate,class:"mt-2"},null,8,["message"])]),e("div",null,[o(m,{value:t(a)("calculated_amounts")},null,8,["value"]),e("div",ee,[e("div",te,[e("span",se,d(t(a)("vat"))+":",1),e("span",ae,d(k(g.value)),1)]),e("div",le,[e("span",re,d(t(a)("ttc"))+":",1),e("span",oe,d(k(F.value)),1)])])])])])]),e("div",de,[e("div",ne,[e("h2",ie,d(t(a)("additional_info")),1)]),e("div",ce,[e("div",ue,[e("div",null,[o(m,{for:"payment_method",value:t(a)("payment_method_optional")},null,8,["value"]),c(e("select",{id:"payment_method","onUpdate:modelValue":r[5]||(r[5]=l=>t(s).payment_method=l),class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},[e("option",me,d(t(a)("select")),1),(i(!0),n(f,null,x(v.paymentMethods,l=>(i(),n("option",{key:l.value,value:l.value},d(l.label),9,pe))),128))],512),[[b,t(s).payment_method]]),o(u,{message:t(s).errors.payment_method,class:"mt-2"},null,8,["message"])]),e("div",null,[o(m,{for:"reference",value:t(a)("invoice_reference_optional")},null,8,["value"]),c(e("input",{id:"reference","onUpdate:modelValue":r[6]||(r[6]=l=>t(s).reference=l),type:"text",class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:t(a)("example_ref")},null,8,_e),[[h,t(s).reference]]),o(u,{message:t(s).errors.reference,class:"mt-2"},null,8,["message"])]),e("div",he,[o(m,{for:"description",value:t(a)("description_optional")},null,8,["value"]),c(e("textarea",{id:"description","onUpdate:modelValue":r[7]||(r[7]=l=>t(s).description=l),rows:"3",class:"mt-1 block w-full rounded-xl border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:t(a)("expense_notes")},null,8,fe),[[h,t(s).description]]),o(u,{message:t(s).errors.description,class:"mt-2"},null,8,["message"])]),e("div",ve,[e("div",xe,[c(e("input",{id:"is_deductible","onUpdate:modelValue":r[8]||(r[8]=l=>t(s).is_deductible=l),type:"checkbox",class:"h-4 w-4 rounded border-slate-300 text-primary-600 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700"},null,512),[[q,t(s).is_deductible]]),e("label",be,d(t(a)("expense_deductible")),1)])])])])]),e("div",ge,[e("div",ke,[e("h2",ye,d(t(a)("receipt_attachment")),1)]),e("div",we,[e("div",Ve,[e("label",Fe,[e("div",Ue,[r[11]||(r[11]=e("svg",{class:"w-8 h-8 mb-3 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),e("p",je,[e("span",Ce,d(t(a)("click_to_upload")),1),y(" "+d(t(a)("drag_drop")),1)]),e("p",Me,d(t(a)("file_types_allowed")),1)]),e("input",{id:"attachment",type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png,.webp",onChange:U},null,32)])]),t(s).attachment?(i(),n("div",Ae,d(t(a)("file_selected"))+" "+d(t(s).attachment.name),1)):B("",!0),o(u,{message:t(s).errors.attachment,class:"mt-2"},null,8,["message"])])]),e("div",qe,[o(t(w),{href:p.route("expenses.index"),class:"inline-flex items-center rounded-xl border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},{default:_(()=>[y(d(t(a)("cancel")),1)]),_:1},8,["href"]),o(R,{disabled:t(s).processing},{default:_(()=>[t(s).processing?(i(),n("span",Be,d(t(a)("saving")),1)):(i(),n("span",Ne,d(t(a)("save")),1))]),_:1},8,["disabled"])])],32)]),_:1})],64))}};export{He as default};
