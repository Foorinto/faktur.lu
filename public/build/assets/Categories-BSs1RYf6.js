import{u as j,c as u,a as l,b as r,h as N,i as n,d as e,o as m,F as h,j as S,t as d,g as b,x as B,w as A,f as U,v as z,e as x,l as D,p as F,r as w}from"./app-BnwxtZv5.js";import{_ as H}from"./AdminLayout-J_6NTFUI.js";import{_ as k}from"./PrimaryButton-CEE4RC9-.js";import{_ as L}from"./SecondaryButton-K2j0M2s8.js";import{_ as f}from"./InputLabel-BmaEP7h2.js";import{_ as v}from"./TextInput-DE83I7ic.js";import{_}from"./InputError-BTq4n7KK.js";import{_ as E}from"./Modal-CKu7_7Oi.js";const O={class:"flex items-center justify-between"},T={class:"flex items-center gap-4"},q={class:"rounded-xl bg-slate-800 overflow-hidden"},I={class:"w-full text-left text-sm"},G={class:"divide-y divide-slate-700"},J={class:"px-6 py-4 text-slate-300"},K={class:"px-6 py-4"},P={class:"font-medium text-white"},Q={key:0,class:"text-xs text-slate-400 truncate max-w-xs"},R={class:"px-6 py-4 text-slate-400 font-mono text-xs"},W={class:"px-6 py-4 text-slate-300"},X={class:"px-6 py-4"},Y={class:"flex justify-end gap-2"},Z=["onClick"],ee=["onClick","disabled"],se={key:0},te={class:"p-6"},oe={class:"text-lg font-semibold text-gray-900"},le={class:"flex justify-end gap-3"},pe={__name:"Categories",props:{categories:Array},setup(g){const c=w(!1),a=w(null),t=j({name:"",slug:"",description:"",sort_order:0}),C=()=>{a.value=null,t.reset(),c.value=!0},V=i=>{a.value=i,t.name=i.name,t.slug=i.slug,t.description=i.description||"",t.sort_order=i.sort_order,c.value=!0},p=()=>{c.value=!1,a.value=null,t.reset()},y=()=>{a.value?t.put(route("admin.blog-categories.update",a.value.id),{onSuccess:p}):t.post(route("admin.blog-categories.store"),{onSuccess:p})},M=i=>{if(i.posts_count>0){alert("Impossible de supprimer une catégorie contenant des articles.");return}confirm(`Supprimer la catégorie "${i.name}" ?`)&&F.delete(route("admin.blog-categories.destroy",i.id))};return(i,s)=>(m(),u(h,null,[l(r(N),{title:"Blog - Catégories"}),l(H,null,{header:n(()=>[e("div",O,[e("div",T,[l(r(D),{href:i.route("admin.blog.index"),class:"text-slate-400 hover:text-white"},{default:n(()=>[...s[4]||(s[4]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1},8,["href"]),s[5]||(s[5]=e("h1",{class:"text-xl font-semibold text-white"},"Catégories du blog",-1))]),l(k,{onClick:C},{default:n(()=>[...s[6]||(s[6]=[x(" Nouvelle catégorie ",-1)])]),_:1})])]),default:n(()=>[e("div",q,[e("table",I,[s[10]||(s[10]=e("thead",{class:"border-b border-slate-700 text-slate-400"},[e("tr",null,[e("th",{class:"px-6 py-4 font-medium"},"Ordre"),e("th",{class:"px-6 py-4 font-medium"},"Nom"),e("th",{class:"px-6 py-4 font-medium"},"Slug"),e("th",{class:"px-6 py-4 font-medium"},"Articles"),e("th",{class:"px-6 py-4 font-medium text-right"},"Actions")])],-1)),e("tbody",G,[(m(!0),u(h,null,S(g.categories,o=>(m(),u("tr",{key:o.id,class:"hover:bg-slate-700/50"},[e("td",J,d(o.sort_order),1),e("td",K,[e("div",P,d(o.name),1),o.description?(m(),u("div",Q,d(o.description),1)):b("",!0)]),e("td",R,d(o.slug),1),e("td",W,d(o.posts_count),1),e("td",X,[e("div",Y,[e("button",{onClick:$=>V(o),class:"text-slate-400 hover:text-white",title:"Modifier"},[...s[7]||(s[7]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Z),e("button",{onClick:$=>M(o),disabled:o.posts_count>0,class:B(["transition-colors",o.posts_count>0?"text-slate-600 cursor-not-allowed":"text-red-400 hover:text-red-300"]),title:"Supprimer"},[...s[8]||(s[8]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],10,ee)])])]))),128)),g.categories.length===0?(m(),u("tr",se,[...s[9]||(s[9]=[e("td",{colspan:"5",class:"px-6 py-12 text-center text-slate-400"}," Aucune catégorie. Créez-en une pour organiser vos articles. ",-1)])])):b("",!0)])])]),l(E,{show:c.value,onClose:p},{default:n(()=>[e("div",te,[e("h2",oe,d(a.value?"Modifier la catégorie":"Nouvelle catégorie"),1),e("form",{onSubmit:A(y,["prevent"]),class:"mt-6 space-y-4"},[e("div",null,[l(f,{for:"name",value:"Nom"}),l(v,{id:"name",modelValue:r(t).name,"onUpdate:modelValue":s[0]||(s[0]=o=>r(t).name=o),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(_,{message:r(t).errors.name,class:"mt-2"},null,8,["message"])]),e("div",null,[l(f,{for:"slug",value:"Slug"}),l(v,{id:"slug",modelValue:r(t).slug,"onUpdate:modelValue":s[1]||(s[1]=o=>r(t).slug=o),type:"text",class:"mt-1 block w-full",placeholder:"auto-généré si vide"},null,8,["modelValue"]),l(_,{message:r(t).errors.slug,class:"mt-2"},null,8,["message"])]),e("div",null,[l(f,{for:"description",value:"Description"}),U(e("textarea",{id:"description","onUpdate:modelValue":s[2]||(s[2]=o=>r(t).description=o),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[z,r(t).description]]),l(_,{message:r(t).errors.description,class:"mt-2"},null,8,["message"])]),e("div",null,[l(f,{for:"sort_order",value:"Ordre d'affichage"}),l(v,{id:"sort_order",modelValue:r(t).sort_order,"onUpdate:modelValue":s[3]||(s[3]=o=>r(t).sort_order=o),type:"number",class:"mt-1 block w-full"},null,8,["modelValue"]),l(_,{message:r(t).errors.sort_order,class:"mt-2"},null,8,["message"])]),e("div",le,[l(L,{onClick:p},{default:n(()=>[...s[11]||(s[11]=[x(" Annuler ",-1)])]),_:1}),l(k,{disabled:r(t).processing},{default:n(()=>[x(d(a.value?"Mettre à jour":"Créer"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"])]),_:1})],64))}};export{pe as default};
