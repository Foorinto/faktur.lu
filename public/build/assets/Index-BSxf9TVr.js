import{r as v,u as $,y as xe,K as pe,z as X,c as l,a as q,b as t,h as he,i as H,d as e,o as d,t as o,e as z,w as L,f as m,F as _,j as V,k as f,v as k,g as p,x as Y,m as ye,l as G,s as be,p as J,B as Z}from"./app-Bw40qWnz.js";import{_ as ve}from"./AppLayout-DY_rKOab.js";import{u as _e}from"./useTranslations-BmhVlpgi.js";import"./ApplicationLogo-oNrlBF6v.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-DHpUyQjj.js";const fe={class:"flex items-center justify-between"},ke={class:"text-xl font-semibold text-gray-900 dark:text-white"},we={class:"mb-6 overflow-hidden rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 shadow-lg"},je={class:"px-6 py-5"},Ve={key:0,class:"flex items-center justify-between"},Se={class:"text-sm font-medium text-indigo-100"},Ce={class:"mt-1 text-3xl font-bold text-white"},Me={class:"mt-1 text-sm text-indigo-200"},Te=["disabled"],ze={key:0,class:"mr-2 h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none"},Ae={key:1,class:"mr-2 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},Ue={key:1},Fe={class:"mb-4 text-sm font-medium text-indigo-100"},Ie={value:"",class:"text-gray-900"},Ee=["value"],Be=["placeholder"],De=["placeholder"],Re=["disabled"],$e={class:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-3"},qe={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800 px-4 py-5"},He={class:"truncate text-sm font-medium text-gray-500 dark:text-gray-400"},Le={class:"mt-1 text-2xl font-semibold text-gray-900 dark:text-white"},Oe={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800 px-4 py-5"},Ne={class:"truncate text-sm font-medium text-gray-500 dark:text-gray-400"},Ke={class:"mt-1 text-2xl font-semibold text-amber-600 dark:text-amber-400"},Ge={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800 px-4 py-5"},Je={class:"truncate text-sm font-medium text-gray-500 dark:text-gray-400"},Pe={class:"mt-1 text-2xl font-semibold text-indigo-600 dark:text-indigo-400"},Qe={class:"mb-6 overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},We={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Xe={class:"text-sm font-medium text-gray-900 dark:text-white"},Ye={class:"grid grid-cols-1 gap-4 sm:grid-cols-6"},Ze={class:"sm:col-span-1"},et={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},tt={class:"sm:col-span-1"},st={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},rt={value:""},ot=["value"],it={class:"sm:col-span-1"},at={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},dt=["placeholder"],lt={class:"sm:col-span-1"},nt={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},ct={class:"sm:col-span-1"},ut={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},mt=["placeholder"],gt={class:"sm:col-span-1 flex items-end"},xt=["disabled"],pt={class:"mb-6 flex flex-wrap items-center justify-between gap-4"},ht={class:"flex flex-wrap gap-4"},yt={value:""},bt=["value"],vt={value:""},_t={value:"0"},ft={value:"1"},kt={value:""},wt=["value"],jt={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},Vt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},St={class:"bg-gray-50 dark:bg-gray-700"},Ct={class:"py-3.5 pl-4 pr-3 sm:pl-6"},Mt=["checked"],Tt={class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-white"},zt={class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white"},At={class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white md:table-cell"},Ut={class:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"},Ft={class:"hidden px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white lg:table-cell"},It={class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900 dark:text-white"},Et={class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},Bt={class:"sr-only"},Dt={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800"},Rt={key:0},$t={colspan:"8",class:"py-10 text-center text-sm text-gray-500 dark:text-gray-400"},qt={class:"mt-2"},Ht={class:"mt-1 text-xs"},Lt={class:"py-4 pl-4 pr-3 sm:pl-6"},Ot=["checked","onChange"],Nt={class:"whitespace-nowrap py-4 px-3 text-sm text-gray-500 dark:text-gray-400"},Kt={class:"text-xs"},Gt={class:"whitespace-nowrap px-3 py-4"},Jt={class:"font-medium text-gray-900 dark:text-white"},Pt={class:"text-sm text-gray-500 dark:text-gray-400"},Qt={class:"hidden px-3 py-4 text-sm text-gray-500 dark:text-gray-400 md:table-cell"},Wt={class:"truncate max-w-xs block"},Xt={class:"whitespace-nowrap px-3 py-4 text-right text-sm font-mono font-medium text-gray-900 dark:text-white"},Yt={class:"hidden whitespace-nowrap px-3 py-4 text-right text-sm text-gray-500 dark:text-gray-400 lg:table-cell"},Zt={class:"whitespace-nowrap px-3 py-4 text-center text-sm"},es={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},ts={key:0,class:"flex items-center justify-end gap-2"},ss=["onClick","title"],rs=["onClick","title"],os={key:0,class:"mt-6 flex items-center justify-between"},is={class:"text-sm text-gray-700 dark:text-gray-400"},as={class:"isolate inline-flex -space-x-px rounded-md shadow-sm"},ds={key:1,class:"relative z-50"},ls={class:"fixed inset-0 z-50 overflow-y-auto"},ns={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},cs={class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all dark:bg-gray-800 sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},us={class:"text-lg font-semibold text-gray-900 dark:text-white"},ms={class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},gs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},xs={class:"mt-1 relative rounded-md shadow-sm"},ps={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},hs={key:1,class:"mt-1 block w-full rounded-md border border-gray-300 bg-gray-100 px-3 py-2 text-gray-500 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400 sm:text-sm"},ys={class:"flex items-center"},bs={for:"group_by_project",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"},vs={class:"mt-6 flex justify-end space-x-3"},_s=["disabled"],fs={key:2,class:"relative z-50"},ks={class:"fixed inset-0 z-50 overflow-y-auto"},ws={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},js={class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all dark:bg-gray-800 sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},Vs={class:"text-lg font-semibold text-gray-900 dark:text-white"},Ss={key:0,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},Cs={key:0,class:"rounded-md bg-amber-50 p-4 dark:bg-amber-900/20"},Ms={class:"text-sm text-amber-800 dark:text-amber-200"},Ts={key:1},zs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},As={value:""},Us=["value"],Fs={key:2,class:"grid grid-cols-2 gap-4"},Is={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Es={class:"mt-1 relative rounded-md shadow-sm"},Bs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Ds={key:1,class:"mt-1 block w-full rounded-md border border-gray-300 bg-gray-100 px-3 py-2 text-gray-500 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400 sm:text-sm"},Rs={class:"mt-6 flex justify-end space-x-3"},$s=["disabled"],Js={__name:"Index",props:{entries:Object,runningTimer:Object,summary:Object,filters:Object,clients:Array,periods:Array,draftInvoices:Array,defaultHourlyRate:[Number,String],isVatExempt:Boolean},setup(n){const{t:i}=_e(),c=n,O=c.isVatExempt?0:17,A=v(c.filters.client_id||""),U=v(c.filters.billed||""),F=v(c.filters.period||""),u=v([]),I=v(!1),E=v(!1),y=v(null),h=$({client_id:"",project_name:"",description:""}),g=$({client_id:"",project_name:"",description:"",date:new Date().toISOString().split("T")[0],duration:""}),b=$({time_entry_ids:[],hourly_rate:100,vat_rate:O,group_by_project:!0}),x=$({invoice_id:"",hourly_rate:"",vat_rate:O}),S=v(0),C=v(!1),ee=v(null);let w=null,B=null;const te=a=>{const s=a.target;s.style.height="auto",s.style.height=Math.min(s.scrollHeight,128)+"px"},P=()=>B?Math.floor((Date.now()-B)/1e3):0,N=()=>{w&&(clearInterval(w),w=null),c.runningTimer&&c.runningTimer.started_at&&(B=new Date(c.runningTimer.started_at).getTime(),S.value=P(),w=setInterval(()=>{S.value=P()},1e3))},K=()=>{w&&(clearInterval(w),w=null),B=null,S.value=0};xe(()=>{c.runningTimer&&N()}),pe(()=>{K()}),X(()=>c.runningTimer,(a,s)=>{a&&!s?N():!a&&s?K():a&&s&&a.id!==s.id&&N()},{deep:!0});const se=Z(()=>{const a=Math.floor(S.value/3600),s=Math.floor(S.value%3600/60),j=S.value%60;return`${a}:${String(s).padStart(2,"0")}:${String(j).padStart(2,"0")}`});X([A,U,F],()=>{J.get(route("time-entries.index"),{client_id:A.value||void 0,billed:U.value||void 0,period:F.value||void 0},{preserveState:!0,replace:!0})});const re=()=>{h.processing||h.post(route("time-entries.start"),{preserveScroll:!0,onSuccess:()=>{h.reset()}})},oe=()=>{!c.runningTimer||C.value||(C.value=!0,J.post(route("time-entries.stop",c.runningTimer.id),{},{preserveScroll:!0,onSuccess:()=>{K()},onFinish:()=>{C.value=!1}}))},ie=()=>{g.post(route("time-entries.store"),{preserveScroll:!0,onSuccess:()=>{g.reset(),g.date=new Date().toISOString().split("T")[0]}})},ae=a=>{confirm(i("delete_time_entry"))&&J.delete(route("time-entries.destroy",a.id),{preserveScroll:!0})},de=a=>{const s=u.value.indexOf(a);s===-1?u.value.push(a):u.value.splice(s,1)},le=()=>{const a=c.entries.data.filter(s=>!s.is_billed);u.value.length===a.length?u.value=[]:u.value=a.map(s=>s.id)},ne=()=>{if(u.value.length===0){alert(i("select_at_least_one"));return}const a=c.entries.data.find(s=>s.id===u.value[0]);a&&a.client&&(b.hourly_rate=a.client.default_hourly_rate||100),I.value=!0},ce=()=>{b.time_entry_ids=u.value,b.post(route("time-entries.to-invoice"),{onSuccess:()=>{I.value=!1,u.value=[]}})},D=Z(()=>y.value?c.draftInvoices.filter(a=>a.client_id===y.value.client_id):[]),ue=a=>{y.value=a,x.reset(),x.vat_rate=O;const s=c.clients.find(M=>M.id===a.client_id);x.hourly_rate=a.hourly_rate||(s==null?void 0:s.default_hourly_rate)||c.defaultHourlyRate||0;const j=c.draftInvoices.filter(M=>M.client_id===a.client_id);j.length>0&&(x.invoice_id=j[0].id),E.value=!0},me=()=>{y.value&&x.post(route("time-entries.add-to-invoice",y.value.id),{onSuccess:()=>{E.value=!1,y.value=null}})},Q=a=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(a),ge=a=>a?new Date(a).toLocaleDateString("fr-FR"):"-",W=a=>a?new Date(a).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"-";return(a,s)=>(d(),l(_,null,[q(t(he),{title:t(i)("time_tracking")},null,8,["title"]),q(ve,null,{header:H(()=>[e("div",fe,[e("h1",ke,o(t(i)("time_tracking")),1),q(t(G),{href:a.route("time-entries.summary"),class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},{default:H(()=>[s[19]||(s[19]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M15.5 2A1.5 1.5 0 0014 3.5v13a1.5 1.5 0 001.5 1.5h1a1.5 1.5 0 001.5-1.5v-13A1.5 1.5 0 0016.5 2h-1zM9.5 6A1.5 1.5 0 008 7.5v9A1.5 1.5 0 009.5 18h1a1.5 1.5 0 001.5-1.5v-9A1.5 1.5 0 0010.5 6h-1zM3.5 10A1.5 1.5 0 002 11.5v5A1.5 1.5 0 003.5 18h1A1.5 1.5 0 006 16.5v-5A1.5 1.5 0 004.5 10h-1z"})],-1)),z(" "+o(t(i)("reports")),1)]),_:1},8,["href"])])]),default:H(()=>{var j,M;return[e("div",we,[e("div",je,[n.runningTimer?(d(),l("div",Ve,[e("div",null,[e("p",Se,o(t(i)("running_timer")),1),e("p",Ce,o(se.value),1),e("p",Me,o((j=n.runningTimer.client)==null?void 0:j.name)+" - "+o(n.runningTimer.project_name||t(i)("no_project")),1)]),e("button",{onClick:oe,disabled:C.value,class:"inline-flex items-center rounded-full bg-white/20 px-6 py-3 text-sm font-semibold text-white backdrop-blur hover:bg-white/30 focus:outline-none focus:ring-2 focus:ring-white disabled:opacity-50 disabled:cursor-not-allowed"},[C.value?(d(),l("svg",ze,[...s[20]||(s[20]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(d(),l("svg",Ae,[...s[21]||(s[21]=[e("path",{"fill-rule":"evenodd",d:"M5.5 3.5A1.5 1.5 0 017 5v10a1.5 1.5 0 01-3 0V5a1.5 1.5 0 011.5-1.5zm8 0A1.5 1.5 0 0115 5v10a1.5 1.5 0 01-3 0V5a1.5 1.5 0 011.5-1.5z","clip-rule":"evenodd"},null,-1)])])),z(" "+o(C.value?t(i)("stopping"):t(i)("stop")),1)],8,Te)])):(d(),l("div",Ue,[e("p",Fe,o(t(i)("start_new_timer")),1),e("form",{onSubmit:L(re,["prevent"]),class:"flex flex-wrap gap-3"},[m(e("select",{"onUpdate:modelValue":s[0]||(s[0]=r=>t(h).client_id=r),required:"",class:"rounded-md border-0 bg-white/10 py-2 pl-3 pr-10 text-white placeholder-indigo-200 backdrop-blur focus:ring-2 focus:ring-white sm:text-sm"},[e("option",Ie,o(t(i)("select_client")),1),(d(!0),l(_,null,V(n.clients,r=>(d(),l("option",{key:r.id,value:r.id,class:"text-gray-900"},o(r.name),9,Ee))),128))],512),[[f,t(h).client_id]]),m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=r=>t(h).project_name=r),type:"text",placeholder:t(i)("project_name"),class:"rounded-md border-0 bg-white/10 py-2 px-3 text-white placeholder-indigo-200 backdrop-blur focus:ring-2 focus:ring-white sm:text-sm"},null,8,Be),[[k,t(h).project_name]]),m(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=r=>t(h).description=r),placeholder:`${t(i)("description")} (${t(i)("optional")})`,rows:"1",onInput:te,ref_key:"timerDescriptionRef",ref:ee,class:"flex-1 rounded-md border-0 bg-white/10 py-2 px-3 text-white placeholder-indigo-200 backdrop-blur focus:ring-2 focus:ring-white sm:text-sm resize-y min-h-[38px] max-h-32"},null,40,De),[[k,t(h).description]]),e("button",{type:"submit",disabled:t(h).processing||!t(h).client_id,class:"inline-flex items-center rounded-full bg-white px-6 py-2 text-sm font-semibold text-indigo-600 shadow-sm hover:bg-indigo-50 disabled:opacity-50"},[s[22]||(s[22]=e("svg",{class:"mr-2 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"})],-1)),z(" "+o(t(i)("start")),1)],8,Re)],32)]))])]),e("div",$e,[e("div",qe,[e("dt",He,o(t(i)("total_time")),1),e("dd",Le,o(n.summary.total_formatted),1)]),e("div",Oe,[e("dt",Ne,o(t(i)("unbilled")),1),e("dd",Ke,o(n.summary.unbilled_formatted),1)]),e("div",Ge,[e("dt",Je,o(t(i)("selected")),1),e("dd",Pe,o(u.value.length),1)])]),e("div",Qe,[e("div",We,[e("h3",Xe,o(t(i)("add_manual_entry")),1)]),e("form",{onSubmit:L(ie,["prevent"]),class:"px-6 py-4"},[e("div",Ye,[e("div",Ze,[e("label",et,o(t(i)("date")),1),m(e("input",{"onUpdate:modelValue":s[3]||(s[3]=r=>t(g).date=r),type:"date",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm"},null,512),[[k,t(g).date]])]),e("div",tt,[e("label",st,o(t(i)("client")),1),m(e("select",{"onUpdate:modelValue":s[4]||(s[4]=r=>t(g).client_id=r),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm"},[e("option",rt,o(t(i)("select")),1),(d(!0),l(_,null,V(n.clients,r=>(d(),l("option",{key:r.id,value:r.id},o(r.name),9,ot))),128))],512),[[f,t(g).client_id]])]),e("div",it,[e("label",at,o(t(i)("project")),1),m(e("input",{"onUpdate:modelValue":s[5]||(s[5]=r=>t(g).project_name=r),type:"text",placeholder:t(i)("project_name"),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm"},null,8,dt),[[k,t(g).project_name]])]),e("div",lt,[e("label",nt,o(t(i)("duration_hhmm")),1),m(e("input",{"onUpdate:modelValue":s[6]||(s[6]=r=>t(g).duration=r),type:"text",required:"",placeholder:"1:30",pattern:"\\d+:\\d{2}",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm"},null,512),[[k,t(g).duration]])]),e("div",ct,[e("label",ut,o(t(i)("description")),1),m(e("input",{"onUpdate:modelValue":s[7]||(s[7]=r=>t(g).description=r),type:"text",placeholder:t(i)("description"),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm"},null,8,mt),[[k,t(g).description]])]),e("div",gt,[e("button",{type:"submit",disabled:t(g).processing,class:"w-full inline-flex justify-center items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 disabled:opacity-50"},o(t(i)("add")),9,xt)])])],32)]),e("div",pt,[e("div",ht,[m(e("select",{"onUpdate:modelValue":s[8]||(s[8]=r=>A.value=r),class:"rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 dark:bg-gray-800 dark:text-white dark:ring-gray-600 sm:text-sm"},[e("option",yt,o(t(i)("all_clients")),1),(d(!0),l(_,null,V(n.clients,r=>(d(),l("option",{key:r.id,value:r.id},o(r.name),9,bt))),128))],512),[[f,A.value]]),m(e("select",{"onUpdate:modelValue":s[9]||(s[9]=r=>U.value=r),class:"rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 dark:bg-gray-800 dark:text-white dark:ring-gray-600 sm:text-sm"},[e("option",vt,o(t(i)("all_statuses")),1),e("option",_t,o(t(i)("unbilled")),1),e("option",ft,o(t(i)("billed")),1)],512),[[f,U.value]]),m(e("select",{"onUpdate:modelValue":s[10]||(s[10]=r=>F.value=r),class:"rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 dark:bg-gray-800 dark:text-white dark:ring-gray-600 sm:text-sm"},[e("option",kt,o(t(i)("all_periods")),1),(d(!0),l(_,null,V(n.periods,r=>(d(),l("option",{key:r.value,value:r.value},o(r.label),9,wt))),128))],512),[[f,F.value]])]),u.value.length>0?(d(),l("button",{key:0,onClick:ne,class:"inline-flex items-center rounded-md bg-green-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500"},[s[23]||(s[23]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm4.75 6.75a.75.75 0 011.5 0v2.546l.943-1.048a.75.75 0 011.114 1.004l-2.25 2.5a.75.75 0 01-1.114 0l-2.25-2.5a.75.75 0 111.114-1.004l.943 1.048V8.75z","clip-rule":"evenodd"})],-1)),z(" "+o(t(i)("convert_to_invoice"))+" ("+o(u.value.length)+") ",1)])):p("",!0)]),e("div",jt,[e("table",Vt,[e("thead",St,[e("tr",null,[e("th",Ct,[e("input",{type:"checkbox",checked:u.value.length>0&&u.value.length===n.entries.data.filter(r=>!r.is_billed).length,onChange:le,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,Mt)]),e("th",Tt,o(t(i)("date")),1),e("th",zt,o(t(i)("client_project")),1),e("th",At,o(t(i)("description")),1),e("th",Ut,o(t(i)("duration")),1),e("th",Ft,o(t(i)("amount")),1),e("th",It,o(t(i)("status")),1),e("th",Et,[e("span",Bt,o(t(i)("actions")),1)])])]),e("tbody",Dt,[n.entries.data.length===0?(d(),l("tr",Rt,[e("td",$t,[s[24]||(s[24]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",qt,o(t(i)("no_time_entries")),1),e("p",Ht,o(t(i)("start_new_timer")),1)])])):p("",!0),(d(!0),l(_,null,V(n.entries.data,r=>{var T;return d(),l("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",Lt,[r.is_billed?p("",!0):(d(),l("input",{key:0,type:"checkbox",checked:u.value.includes(r.id),onChange:R=>de(r.id),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,Ot))]),e("td",Nt,[e("div",null,o(ge(r.started_at)),1),e("div",Kt,o(W(r.started_at))+" - "+o(W(r.stopped_at)),1)]),e("td",Gt,[e("div",Jt,o(((T=r.client)==null?void 0:T.name)||t(i)("unknown_client")),1),e("div",Pt,o(r.project_name||t(i)("no_project")),1)]),e("td",Qt,[e("span",Wt,o(r.description||"-"),1)]),e("td",Xt,o(r.duration_formatted),1),e("td",Yt,o(r.amount?Q(r.amount):"-"),1),e("td",Zt,[e("span",{class:Y(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",r.is_billed?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"])},o(r.is_billed?t(i)("billed"):t(i)("unbilled")),3)]),e("td",es,[r.is_billed?p("",!0):(d(),l("div",ts,[n.draftInvoices.some(R=>R.client_id===r.client_id)?(d(),l("button",{key:0,onClick:R=>ue(r),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",title:t(i)("add_to_invoice")},[...s[25]||(s[25]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1)])],8,ss)):p("",!0),e("button",{onClick:R=>ae(r),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:t(i)("delete")},[...s[26]||(s[26]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.519.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z","clip-rule":"evenodd"})],-1)])],8,rs)]))])])}),128))])])]),n.entries.links&&n.entries.links.length>3?(d(),l("div",os,[e("div",is,o(t(i)("showing"))+" "+o(n.entries.from)+" "+o(t(i)("to"))+" "+o(n.entries.to)+" "+o(t(i)("of"))+" "+o(n.entries.total)+" "+o(t(i)("results")),1),e("nav",as,[(d(!0),l(_,null,V(n.entries.links,(r,T)=>(d(),l(_,{key:T},[r.url?(d(),ye(t(G),{key:0,href:r.url,class:Y([r.active?"z-10 bg-indigo-600 text-white":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:text-gray-300 dark:ring-gray-600 dark:hover:bg-gray-700","relative inline-flex items-center px-4 py-2 text-sm font-semibold focus:z-20",T===0?"rounded-l-md":"",T===n.entries.links.length-1?"rounded-r-md":""]),innerHTML:r.label,"preserve-scroll":""},null,8,["href","class","innerHTML"])):p("",!0)],64))),128))])])):p("",!0),I.value?(d(),l("div",ds,[s[29]||(s[29]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",ls,[e("div",ns,[e("div",cs,[e("div",null,[e("h3",us,o(t(i)("convert_to_invoice")),1),e("p",ms,o(u.value.length)+" "+o(t(i)("selected")),1)]),e("form",{onSubmit:L(ce,["prevent"]),class:"mt-6 space-y-4"},[e("div",null,[e("label",gs,o(t(i)("hourly_rate")),1),e("div",xs,[m(e("input",{"onUpdate:modelValue":s[11]||(s[11]=r=>t(b).hourly_rate=r),type:"number",step:"0.01",min:"0",required:"",class:"block w-full rounded-md border-gray-300 pr-12 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm"},null,512),[[k,t(b).hourly_rate]]),s[27]||(s[27]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[e("span",{class:"text-gray-500 dark:text-gray-400 sm:text-sm"},"EUR/h")],-1))])]),e("div",null,[e("label",ps,o(t(i)("vat_rate")),1),n.isVatExempt?(d(),l("div",hs," 0% ")):m((d(),l("select",{key:0,"onUpdate:modelValue":s[12]||(s[12]=r=>t(b).vat_rate=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm"},[...s[28]||(s[28]=[e("option",{value:0},"0%",-1),e("option",{value:3},"3%",-1),e("option",{value:8},"8%",-1),e("option",{value:14},"14%",-1),e("option",{value:17},"17%",-1)])],512)),[[f,t(b).vat_rate]])]),e("div",ys,[m(e("input",{"onUpdate:modelValue":s[13]||(s[13]=r=>t(b).group_by_project=r),type:"checkbox",id:"group_by_project",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[be,t(b).group_by_project]]),e("label",bs,o(t(i)("group_by_project")),1)]),e("div",vs,[e("button",{type:"button",onClick:s[14]||(s[14]=r=>I.value=!1),class:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},o(t(i)("cancel")),1),e("button",{type:"submit",disabled:t(b).processing,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 disabled:opacity-50"},o(t(i)("create_invoice")),9,_s)])],32)])])])])):p("",!0),E.value?(d(),l("div",fs,[s[32]||(s[32]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",ks,[e("div",ws,[e("div",js,[e("div",null,[e("h3",Vs,o(t(i)("add_to_invoice")),1),y.value?(d(),l("p",Ss,o((M=y.value.client)==null?void 0:M.name)+" - "+o(y.value.duration_formatted),1)):p("",!0)]),e("form",{onSubmit:L(me,["prevent"]),class:"mt-6 space-y-4"},[D.value.length===0?(d(),l("div",Cs,[e("p",Ms,o(t(i)("no_draft_invoice")),1),q(t(G),{href:a.route("invoices.create"),class:"mt-2 inline-flex text-sm font-medium text-amber-800 hover:text-amber-700 dark:text-amber-200"},{default:H(()=>[z(o(t(i)("create_new_invoice")),1)]),_:1},8,["href"])])):(d(),l("div",Ts,[e("label",zs,o(t(i)("invoice")),1),m(e("select",{"onUpdate:modelValue":s[15]||(s[15]=r=>t(x).invoice_id=r),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm"},[e("option",As,o(t(i)("select")),1),(d(!0),l(_,null,V(D.value,r=>(d(),l("option",{key:r.id,value:r.id},o(r.title||r.display_number)+" - "+o(r.created_at)+" ("+o(Q(r.total_ht))+" "+o(t(i)("ht"))+") ",9,Us))),128))],512),[[f,t(x).invoice_id]])])),D.value.length>0?(d(),l("div",Fs,[e("div",null,[e("label",Is,o(t(i)("hourly_rate")),1),e("div",Es,[m(e("input",{"onUpdate:modelValue":s[16]||(s[16]=r=>t(x).hourly_rate=r),type:"number",step:"0.01",min:"0",required:"",class:"block w-full rounded-md border-gray-300 pr-12 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm"},null,512),[[k,t(x).hourly_rate]]),s[30]||(s[30]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[e("span",{class:"text-gray-500 dark:text-gray-400 sm:text-sm"},"â‚¬/h")],-1))])]),e("div",null,[e("label",Bs,o(t(i)("vat_rate")),1),n.isVatExempt?(d(),l("div",Ds," 0% ")):m((d(),l("select",{key:0,"onUpdate:modelValue":s[17]||(s[17]=r=>t(x).vat_rate=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm"},[...s[31]||(s[31]=[e("option",{value:0},"0%",-1),e("option",{value:3},"3%",-1),e("option",{value:8},"8%",-1),e("option",{value:14},"14%",-1),e("option",{value:17},"17%",-1)])],512)),[[f,t(x).vat_rate]])])])):p("",!0),e("div",Rs,[e("button",{type:"button",onClick:s[18]||(s[18]=r=>{E.value=!1,y.value=null}),class:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},o(t(i)("cancel")),1),D.value.length>0?(d(),l("button",{key:0,type:"submit",disabled:t(x).processing||!t(x).invoice_id,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 disabled:opacity-50"},o(t(i)("add")),9,$s)):p("",!0)])],32)])])])])):p("",!0)]}),_:1})],64))}};export{Js as default};
