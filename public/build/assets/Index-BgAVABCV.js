import{r as f,p as C,y as O,c as i,a as v,b as y,h as _,i as w,d as t,t as o,f as b,v as D,o as a,F as n,j as u,k,g as T,x as h,l as V,e as q,m as z}from"./app-Cw6IEGVk.js";import{_ as A}from"./AdminLayout-CDV1kG3r.js";import{d as L}from"./debounce-D-3nq0Ep.js";const N={class:"mb-6 grid grid-cols-2 gap-4 md:grid-cols-4"},U={class:"rounded-xl bg-slate-800 p-4 border border-slate-700"},H={class:"text-2xl font-bold text-purple-400"},R={class:"rounded-xl bg-slate-800 p-4 border border-slate-700"},E={class:"text-2xl font-bold text-blue-400"},I={class:"rounded-xl bg-slate-800 p-4 border border-slate-700"},P={class:"text-2xl font-bold text-orange-400"},$={class:"rounded-xl bg-slate-800 p-4 border border-slate-700"},G={class:"text-2xl font-bold text-emerald-400"},J={class:"mb-6 flex flex-wrap gap-4"},K={class:"relative flex-1 min-w-[200px]"},Q=["value"],W=["value"],X=["value"],Y={class:"overflow-hidden rounded-xl bg-slate-800 border border-slate-700"},Z={class:"min-w-full divide-y divide-slate-700"},tt={class:"divide-y divide-slate-700"},et={key:0},st={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-white sm:pl-6"},lt={class:"whitespace-nowrap px-3 py-4 text-sm"},ot={class:"text-white"},rt={class:"text-slate-400 text-xs"},at={class:"px-3 py-4 text-sm text-white max-w-[200px] truncate"},it={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-slate-300 md:table-cell"},dt={class:"whitespace-nowrap px-3 py-4 text-sm"},nt={class:"whitespace-nowrap px-3 py-4 text-sm"},ut={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-slate-300 lg:table-cell"},ct={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},pt={key:0,class:"mt-6 flex items-center justify-between"},xt={class:"text-sm text-slate-400"},mt={class:"isolate inline-flex -space-x-px rounded-lg shadow-sm"},gt=["innerHTML"],vt={__name:"Index",props:{tickets:{type:Object,required:!0},stats:{type:Object,required:!0},filters:{type:Object,default:()=>({})},categories:{type:Object,required:!0},statuses:{type:Object,required:!0},priorities:{type:Object,required:!0}},setup(l){const c=l,p=f(c.filters.search||""),x=f(c.filters.status||""),m=f(c.filters.category||""),g=f(c.filters.priority||""),F=L(()=>{C.get(route("admin.support.index"),{search:p.value||void 0,status:x.value||void 0,category:m.value||void 0,priority:g.value||void 0},{preserveState:!0,replace:!0})},300);O([p,x,m,g],F);const M=d=>{const e={new:"bg-purple-100 text-purple-700",open:"bg-blue-100 text-blue-700",in_progress:"bg-yellow-100 text-yellow-700",waiting:"bg-orange-100 text-orange-700",resolved:"bg-emerald-100 text-emerald-700",closed:"bg-slate-100 text-slate-700"};return e[d]||e.closed},S=d=>{const e={urgent:"bg-red-100 text-red-700",high:"bg-orange-100 text-orange-700",normal:"bg-blue-100 text-blue-700",low:"bg-slate-100 text-slate-700"};return e[d]||e.normal},B=d=>{const e=new Date(d);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}).format(e)};return(d,e)=>(a(),i(n,null,[v(y(_),{title:"Support - Admin"}),v(A,null,{header:w(()=>[...e[4]||(e[4]=[t("h1",{class:"text-xl font-semibold text-white"},"Support",-1)])]),default:w(()=>[t("div",N,[t("div",U,[t("div",H,o(l.stats.new),1),e[5]||(e[5]=t("div",{class:"text-sm text-slate-400"},"Nouveaux",-1))]),t("div",R,[t("div",E,o(l.stats.open),1),e[6]||(e[6]=t("div",{class:"text-sm text-slate-400"},"Ouverts",-1))]),t("div",I,[t("div",P,o(l.stats.waiting),1),e[7]||(e[7]=t("div",{class:"text-sm text-slate-400"},"En attente",-1))]),t("div",$,[t("div",G,o(l.stats.resolved_today),1),e[8]||(e[8]=t("div",{class:"text-sm text-slate-400"},"Résolus aujourd'hui",-1))])]),t("div",J,[t("div",K,[e[9]||(e[9]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("svg",{class:"h-5 w-5 text-slate-400",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})])],-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s),type:"text",placeholder:"Rechercher (réf., sujet, email)...",class:"block w-full rounded-lg border-0 bg-slate-700 py-2 pl-10 pr-3 text-white placeholder:text-slate-400 focus:ring-2 focus:ring-purple-500 sm:text-sm"},null,512),[[D,p.value]])]),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),class:"rounded-lg border-0 bg-slate-700 py-2 pl-3 pr-10 text-white focus:ring-2 focus:ring-purple-500 sm:text-sm"},[e[10]||(e[10]=t("option",{value:""},"Tous les statuts",-1)),(a(!0),i(n,null,u(l.statuses,(s,r)=>(a(),i("option",{key:r,value:r},o(s),9,Q))),128))],512),[[k,x.value]]),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s),class:"rounded-lg border-0 bg-slate-700 py-2 pl-3 pr-10 text-white focus:ring-2 focus:ring-purple-500 sm:text-sm"},[e[11]||(e[11]=t("option",{value:""},"Toutes catégories",-1)),(a(!0),i(n,null,u(l.categories,(s,r)=>(a(),i("option",{key:r,value:r},o(s),9,W))),128))],512),[[k,m.value]]),b(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>g.value=s),class:"rounded-lg border-0 bg-slate-700 py-2 pl-3 pr-10 text-white focus:ring-2 focus:ring-purple-500 sm:text-sm"},[e[12]||(e[12]=t("option",{value:""},"Toutes priorités",-1)),(a(!0),i(n,null,u(l.priorities,(s,r)=>(a(),i("option",{key:r,value:r},o(s),9,X))),128))],512),[[k,g.value]])]),t("div",Y,[t("table",Z,[e[15]||(e[15]=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-white sm:pl-6"}," Réf. "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-white"}," Utilisateur "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-white"}," Sujet "),t("th",{scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-white md:table-cell"}," Catégorie "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-white"}," Priorité "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-white"}," Statut "),t("th",{scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-white lg:table-cell"}," Date "),t("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[t("span",{class:"sr-only"},"Actions")])])],-1)),t("tbody",tt,[l.tickets.data.length===0?(a(),i("tr",et,[...e[13]||(e[13]=[t("td",{colspan:"8",class:"py-10 text-center text-sm text-slate-400"}," Aucun ticket trouvé. ",-1)])])):T("",!0),(a(!0),i(n,null,u(l.tickets.data,s=>{var r,j;return a(),i("tr",{key:s.id,class:"hover:bg-slate-700/50"},[t("td",st,o(s.reference),1),t("td",lt,[t("div",ot,o(((r=s.user)==null?void 0:r.name)||"-"),1),t("div",rt,o((j=s.user)==null?void 0:j.email),1)]),t("td",at,o(s.subject),1),t("td",it,o(l.categories[s.category]),1),t("td",dt,[t("span",{class:h([S(s.priority),"inline-flex items-center rounded-lg px-2 py-0.5 text-xs font-medium"])},o(l.priorities[s.priority]),3)]),t("td",nt,[t("span",{class:h([M(s.status),"inline-flex items-center rounded-lg px-2 py-0.5 text-xs font-medium"])},o(l.statuses[s.status]),3)]),t("td",ut,o(B(s.created_at)),1),t("td",ct,[v(y(V),{href:d.route("admin.support.show",s.id),class:"text-purple-400 hover:text-purple-300"},{default:w(()=>[...e[14]||(e[14]=[q(" Voir ",-1)])]),_:1},8,["href"])])])}),128))])])]),l.tickets.links&&l.tickets.links.length>3?(a(),i("div",pt,[t("div",xt," Affichage "+o(l.tickets.from)+" à "+o(l.tickets.to)+" sur "+o(l.tickets.total)+" tickets ",1),t("nav",mt,[(a(!0),i(n,null,u(l.tickets.links,(s,r)=>(a(),i(n,{key:r},[s.url?(a(),z(y(V),{key:0,href:s.url,class:h([s.active?"z-10 bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600","relative inline-flex items-center px-4 py-2 text-sm font-semibold border border-slate-600 focus:z-20",r===0?"rounded-l-lg":"",r===l.tickets.links.length-1?"rounded-r-lg":""]),innerHTML:s.label,"preserve-scroll":""},null,8,["href","class","innerHTML"])):(a(),i("span",{key:1,class:h(["relative inline-flex items-center px-4 py-2 text-sm font-semibold text-slate-500 bg-slate-800 border border-slate-600",r===0?"rounded-l-lg":"",r===l.tickets.links.length-1?"rounded-r-lg":""]),innerHTML:s.label},null,10,gt))],64))),128))])])):T("",!0)]),_:1})],64))}};export{vt as default};
