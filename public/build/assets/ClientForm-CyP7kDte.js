import{z as M,c as n,d as t,t as d,b as s,F as x,j as p,x as k,f as v,C as T,a as o,g as w,v as E,k as V,i as U,e as L,o as i,l as F,w as z,B as y,D}from"./app-Bw40qWnz.js";import{a as u,_ as m}from"./InputError-Ds8nJv-q.js";import{P as j}from"./PrimaryButton-CfOxTcr6.js";import{_ as f}from"./TextInput-DVSS6XfU.js";import{_ as H}from"./VatScenarioIndicator-XP3GANdn.js";import{u as O}from"./useTranslations-BmhVlpgi.js";const G={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},K={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},W={class:"text-lg font-medium text-gray-900 dark:text-white"},X={class:"px-6 py-4"},Y={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Z=["value"],J={class:"ml-3"},Q={class:"block text-sm font-medium text-gray-900 dark:text-white"},ee={class:"block text-sm text-gray-500 dark:text-gray-400"},te={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},re={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},le={class:"text-lg font-medium text-gray-900 dark:text-white"},ae={class:"px-6 py-4 space-y-4"},oe={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},se={key:0},de={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},ne=["value"],ie={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},ue={key:0,class:"text-amber-600 text-xs font-medium"},me={key:1,class:"text-gray-400 text-xs"},ce={key:2,class:"text-gray-400 text-xs"},ge={class:"flex items-center justify-between"},fe={class:"text-sm font-medium text-gray-900 dark:text-white"},be={class:"text-right"},ve={class:"text-xs text-gray-500 dark:text-gray-400"},ye={key:0,class:"mt-3 text-sm text-amber-600 dark:text-amber-400"},xe={key:0,class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},pe={key:1,class:"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4"},ke={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},he=["value"],_e={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},we={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Ve={class:"text-lg font-medium text-gray-900 dark:text-white"},Ue={class:"px-6 py-4 space-y-4"},Le={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Be=["value"],Se=["value"],Re={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Ee=["placeholder"],Ce={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Pe={class:"flex justify-end space-x-3"},$e={key:0},qe={key:1},ze={__name:"ClientForm",props:{form:{type:Object,required:!0},clientTypes:{type:Array,required:!0},currencies:{type:Array,required:!0},countries:{type:Array,required:!0},peppolSchemes:{type:Array,default:()=>[]},submitLabel:{type:String,default:null},cancelRoute:{type:String,default:"clients.index"},cancelRouteParams:{type:[Object,Number,String],default:null},sellerVatRegime:{type:String,default:"franchise"}},emits:["submit"],setup(e,{emit:C}){const{t:a}=O(),P=D(),c=e,$=C,g=y(()=>c.form.type==="b2b"),B=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK"],q=y(()=>B.includes(c.form.country_code)),N=y(()=>c.form.country_code==="LU"),S=y(()=>q.value&&!N.value),R=y(()=>c.form.vat_number&&c.form.vat_number.trim()!==""),h=y(()=>{if(c.sellerVatRegime==="franchise")return{key:"FRANCHISE",label:a("vat_scenario_franchise"),description:a("vat_scenario_franchise_desc"),rate:0,mention:"franchise",color:"gray"};const b=c.form.country_code||"LU",l=c.form.type||"b2b";return b==="LU"?{key:l==="b2b"?"B2B_LU":"B2C_LU",label:a(l==="b2b"?"vat_scenario_b2b_lu":"vat_scenario_b2c_lu"),description:a("vat_scenario_lu_desc"),rate:17,mention:null,color:"green"}:B.includes(b)?l==="b2b"&&R.value?{key:"B2B_INTRA_EU",label:a("vat_scenario_b2b_intra"),description:a("vat_scenario_b2b_intra_desc"),rate:0,mention:"reverse_charge",color:"blue"}:{key:l==="b2b"?"B2B_LU":"B2C_LU",label:a(l==="b2b"?"vat_scenario_b2b_eu_no_vat":"vat_scenario_b2c_eu"),description:a("vat_scenario_eu_desc"),rate:17,mention:null,color:"yellow"}:{key:"EXPORT",label:a("vat_scenario_export"),description:a("vat_scenario_export_desc"),rate:0,mention:"export",color:"purple"}}),A=y(()=>g.value&&S.value&&!R.value);M(()=>c.form.type,b=>{b==="b2c"&&(c.form.vat_number="")});const I=()=>{$("submit")};return(b,l)=>(i(),n("form",{onSubmit:z(I,["prevent"]),class:"space-y-8"},[t("div",G,[t("div",K,[t("h2",W,d(s(a)("client_type")),1)]),t("div",X,[t("div",Y,[(i(!0),n(x,null,p(e.clientTypes,r=>(i(),n("label",{key:r.value,class:k(["flex items-start p-4 rounded-lg border cursor-pointer transition-colors",[e.form.type===r.value?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"]])},[v(t("input",{type:"radio","onUpdate:modelValue":l[0]||(l[0]=_=>e.form.type=_),value:r.value,class:"mt-0.5 h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,Z),[[T,e.form.type]]),t("div",J,[t("span",Q,d(r.label),1),t("span",ee,d(r.description),1)])],2))),128))]),o(u,{message:e.form.errors.type,class:"mt-2"},null,8,["message"])])]),t("div",te,[t("div",re,[t("h2",le,d(s(a)("client_info")),1)]),t("div",ae,[t("div",oe,[t("div",null,[o(m,{for:"name",value:g.value?s(a)("company_name"):s(a)("full_name")},null,8,["value"]),o(f,{id:"name",modelValue:e.form.name,"onUpdate:modelValue":l[1]||(l[1]=r=>e.form.name=r),type:"text",class:"mt-1 block w-full",required:"",placeholder:g.value?"Société Exemple SARL":"Marie Durand"},null,8,["modelValue","placeholder"]),o(u,{message:e.form.errors.name,class:"mt-2"},null,8,["message"])]),g.value?(i(),n("div",se,[o(m,{for:"contact_name",value:`${s(a)("director_contact")} (${s(a)("optional")})`},null,8,["value"]),o(f,{id:"contact_name",modelValue:e.form.contact_name,"onUpdate:modelValue":l[2]||(l[2]=r=>e.form.contact_name=r),type:"text",class:"mt-1 block w-full",placeholder:"Pierre Exemple"},null,8,["modelValue"]),o(u,{message:e.form.errors.contact_name,class:"mt-2"},null,8,["message"])])):w("",!0),t("div",null,[o(m,{for:"email",value:s(a)("email")},null,8,["value"]),o(f,{id:"email",modelValue:e.form.email,"onUpdate:modelValue":l[3]||(l[3]=r=>e.form.email=r),type:"email",class:"mt-1 block w-full",required:"",placeholder:"contact@example.com"},null,8,["modelValue"]),o(u,{message:e.form.errors.email,class:"mt-2"},null,8,["message"])])]),t("div",null,[o(m,{for:"address",value:s(a)("address")},null,8,["value"]),v(t("textarea",{id:"address","onUpdate:modelValue":l[4]||(l[4]=r=>e.form.address=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",rows:"2",placeholder:"10 Rue Fictive"},null,512),[[E,e.form.address]]),o(u,{message:e.form.errors.address,class:"mt-2"},null,8,["message"])]),t("div",de,[t("div",null,[o(m,{for:"postal_code",value:s(a)("postal_code")},null,8,["value"]),o(f,{id:"postal_code",modelValue:e.form.postal_code,"onUpdate:modelValue":l[5]||(l[5]=r=>e.form.postal_code=r),type:"text",class:"mt-1 block w-full",placeholder:"L-2000"},null,8,["modelValue"]),o(u,{message:e.form.errors.postal_code,class:"mt-2"},null,8,["message"])]),t("div",null,[o(m,{for:"city",value:s(a)("city")},null,8,["value"]),o(f,{id:"city",modelValue:e.form.city,"onUpdate:modelValue":l[6]||(l[6]=r=>e.form.city=r),type:"text",class:"mt-1 block w-full",placeholder:"Luxembourg"},null,8,["modelValue"]),o(u,{message:e.form.errors.city,class:"mt-2"},null,8,["message"])]),t("div",null,[o(m,{for:"country_code",value:s(a)("country")},null,8,["value"]),v(t("select",{id:"country_code","onUpdate:modelValue":l[7]||(l[7]=r=>e.form.country_code=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[(i(!0),n(x,null,p(e.countries,r=>(i(),n("option",{key:r.code,value:r.code},d(r.name),9,ne))),128))],512),[[V,e.form.country_code]]),o(u,{message:e.form.errors.country_code,class:"mt-2"},null,8,["message"])])]),t("div",ie,[t("div",null,[o(m,{for:"phone",value:`${s(a)("phone")} (${s(a)("optional")})`},null,8,["value"]),o(f,{id:"phone",modelValue:e.form.phone,"onUpdate:modelValue":l[8]||(l[8]=r=>e.form.phone=r),type:"tel",class:"mt-1 block w-full",placeholder:"+352 000 000 000"},null,8,["modelValue"]),o(u,{message:e.form.errors.phone,class:"mt-2"},null,8,["message"])]),t("div",null,[o(m,{for:"vat_number"},{default:U(()=>[L(d(s(a)("vat_number"))+" ",1),g.value&&S.value?(i(),n("span",ue,"("+d(s(a)("vat_required_for_reverse_charge"))+")",1)):g.value?(i(),n("span",me,"("+d(s(a)("vat_recommended_b2b"))+")",1)):(i(),n("span",ce,"("+d(s(a)("optional"))+")",1))]),_:1}),o(f,{id:"vat_number",modelValue:e.form.vat_number,"onUpdate:modelValue":l[9]||(l[9]=r=>e.form.vat_number=r),type:"text",class:k(["mt-1 block w-full font-mono uppercase",{"bg-gray-100 dark:bg-gray-600":!g.value}]),placeholder:"LU00000000"},null,8,["modelValue","class"]),o(u,{message:e.form.errors.vat_number,class:"mt-2"},null,8,["message"])])]),t("div",{class:k(["rounded-lg border p-4",[h.value.rate===0?"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-900/20":"border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800"]])},[t("div",ge,[t("div",null,[t("h4",fe,d(s(a)("vat_scenario_detected")),1),o(H,{scenario:h.value,size:"sm",class:"mt-2"},null,8,["scenario"])]),t("div",be,[t("span",{class:k(["text-2xl font-bold",[h.value.rate===0?"text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-white"]])},d(h.value.rate)+"% ",3),t("p",ve,d(s(a)("vat_rate")),1)])]),A.value?(i(),n("p",ye,[l[16]||(l[16]=t("svg",{class:"inline h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),L(" "+d(s(a)("vat_warning_no_number")),1)])):w("",!0)],2),g.value?(i(),n("div",xe,[t("div",null,[o(m,{for:"registration_number",value:`${s(a)("registration_number")} (${s(a)("optional")})`},null,8,["value"]),o(f,{id:"registration_number",modelValue:e.form.registration_number,"onUpdate:modelValue":l[10]||(l[10]=r=>e.form.registration_number=r),type:"text",class:"mt-1 block w-full font-mono",placeholder:"B000000"},null,8,["modelValue"]),o(u,{message:e.form.errors.registration_number,class:"mt-2"},null,8,["message"])])])):w("",!0),g.value&&e.peppolSchemes.length>0?(i(),n("div",pe,[l[18]||(l[18]=t("h3",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," Identifiant Peppol (optionnel) ",-1)),l[19]||(l[19]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 mb-3"}," Nécessaire pour l'envoi de factures électroniques via le réseau Peppol. ",-1)),t("div",ke,[t("div",null,[o(m,{for:"peppol_endpoint_scheme",value:"Schéma"}),v(t("select",{id:"peppol_endpoint_scheme","onUpdate:modelValue":l[11]||(l[11]=r=>e.form.peppol_endpoint_scheme=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white text-sm"},[l[17]||(l[17]=t("option",{value:""},"Aucun",-1)),(i(!0),n(x,null,p(e.peppolSchemes,r=>(i(),n("option",{key:r.value,value:r.value},d(r.label),9,he))),128))],512),[[V,e.form.peppol_endpoint_scheme]]),o(u,{message:e.form.errors.peppol_endpoint_scheme,class:"mt-2"},null,8,["message"])]),t("div",null,[o(m,{for:"peppol_endpoint_id",value:"Identifiant"}),o(f,{id:"peppol_endpoint_id",modelValue:e.form.peppol_endpoint_id,"onUpdate:modelValue":l[12]||(l[12]=r=>e.form.peppol_endpoint_id=r),type:"text",class:"mt-1 block w-full font-mono",placeholder:"12345678",disabled:!e.form.peppol_endpoint_scheme},null,8,["modelValue","disabled"]),o(u,{message:e.form.errors.peppol_endpoint_id,class:"mt-2"},null,8,["message"])])])])):w("",!0)])]),t("div",_e,[t("div",we,[t("h2",Ve,d(s(a)("billing_settings")),1)]),t("div",Ue,[t("div",Le,[t("div",null,[o(m,{for:"currency",value:s(a)("default_currency")},null,8,["value"]),v(t("select",{id:"currency","onUpdate:modelValue":l[13]||(l[13]=r=>e.form.currency=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[(i(!0),n(x,null,p(e.currencies,r=>(i(),n("option",{key:r.value,value:r.value},d(r.label),9,Be))),128))],512),[[V,e.form.currency]]),o(u,{message:e.form.errors.currency,class:"mt-2"},null,8,["message"])]),t("div",null,[o(m,{for:"locale",value:s(a)("document_language")},null,8,["value"]),v(t("select",{id:"locale","onUpdate:modelValue":l[14]||(l[14]=r=>e.form.locale=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},[(i(!0),n(x,null,p(s(P).props.availableLocales,(r,_)=>(i(),n("option",{key:_,value:_},d(r),9,Se))),128))],512),[[V,e.form.locale]]),t("p",Re,d(s(a)("document_language_help")),1),o(u,{message:e.form.errors.locale,class:"mt-2"},null,8,["message"])])]),t("div",null,[o(m,{for:"notes",value:`${s(a)("internal_notes")} (${s(a)("optional")})`},null,8,["value"]),v(t("textarea",{id:"notes","onUpdate:modelValue":l[15]||(l[15]=r=>e.form.notes=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",rows:"3",placeholder:s(a)("internal_notes")},null,8,Ee),[[E,e.form.notes]]),t("p",Ce,d(s(a)("notes_not_visible")),1),o(u,{message:e.form.errors.notes,class:"mt-2"},null,8,["message"])])])]),t("div",Pe,[o(s(F),{href:e.cancelRouteParams?b.route(e.cancelRoute,e.cancelRouteParams):b.route(e.cancelRoute),class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},{default:U(()=>[L(d(s(a)("cancel")),1)]),_:1},8,["href"]),o(j,{disabled:e.form.processing,class:k({"opacity-25":e.form.processing})},{default:U(()=>[e.form.processing?(i(),n("span",$e,d(s(a)("saving")),1)):(i(),n("span",qe,d(e.submitLabel||s(a)("save")),1))]),_:1},8,["disabled","class"])])],32))}};export{ze as _};
