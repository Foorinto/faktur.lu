import{z as M,c as n,d as t,t as d,b as o,F as p,j as y,x as k,f as g,C as T,a as r,g as w,v as E,k as V,i as U,e as L,o as i,l as F,w as z,B as x,D}from"./app-DeMmr3dH.js";import{a as u,_ as m}from"./InputError-BvBg-svw.js";import{_ as j}from"./PrimaryButton-DIISSbDt.js";import{_ as f}from"./TextInput-MdwSiRsT.js";import{_ as H}from"./VatScenarioIndicator-Bk2RY8Wk.js";import{u as O}from"./useTranslations-gT2Sr0D3.js";const G={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},K={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},W={class:"text-lg font-medium text-slate-900 dark:text-white"},X={class:"px-6 py-4"},Y={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Z=["value"],J={class:"ml-3"},Q={class:"block text-sm font-medium text-slate-900 dark:text-white"},ee={class:"block text-sm text-slate-500 dark:text-slate-400"},te={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},le={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},ae={class:"text-lg font-medium text-slate-900 dark:text-white"},se={class:"px-6 py-4 space-y-4"},re={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},oe={key:0},de={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},ne=["value"],ie={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},ue={key:0,class:"text-amber-600 text-xs font-medium"},me={key:1,class:"text-slate-400 text-xs"},ce={key:2,class:"text-slate-400 text-xs"},be={class:"flex items-center justify-between"},fe={class:"text-sm font-medium text-slate-900 dark:text-white"},ve={class:"text-right"},ge={class:"text-xs text-slate-500 dark:text-slate-400"},xe={key:0,class:"mt-3 text-sm text-amber-600 dark:text-amber-400"},pe={key:0,class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},ye={key:1,class:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-4"},ke={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},he=["value"],_e={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},we={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},Ve={class:"text-lg font-medium text-slate-900 dark:text-white"},Ue={class:"px-6 py-4 space-y-4"},Le={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Se=["value"],Be=["value"],Re={class:"mt-1 text-sm text-slate-500 dark:text-slate-400"},Ee=["placeholder"],Ce={class:"mt-1 text-sm text-slate-500 dark:text-slate-400"},$e={class:"flex justify-end space-x-3"},qe={key:0},Ne={key:1},ze={__name:"ClientForm",props:{form:{type:Object,required:!0},clientTypes:{type:Array,required:!0},currencies:{type:Array,required:!0},countries:{type:Array,required:!0},peppolSchemes:{type:Array,default:()=>[]},submitLabel:{type:String,default:null},cancelRoute:{type:String,default:"clients.index"},cancelRouteParams:{type:[Object,Number,String],default:null},sellerVatRegime:{type:String,default:"franchise"}},emits:["submit"],setup(e,{emit:C}){const{t:s}=O(),$=D(),c=e,q=C,b=x(()=>c.form.type==="b2b"),S=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK"],N=x(()=>S.includes(c.form.country_code)),P=x(()=>c.form.country_code==="LU"),B=x(()=>N.value&&!P.value),R=x(()=>c.form.vat_number&&c.form.vat_number.trim()!==""),h=x(()=>{if(c.sellerVatRegime==="franchise")return{key:"FRANCHISE",label:s("vat_scenario_franchise"),description:s("vat_scenario_franchise_desc"),rate:0,mention:"franchise",color:"gray"};const v=c.form.country_code||"LU",a=c.form.type||"b2b";return v==="LU"?{key:a==="b2b"?"B2B_LU":"B2C_LU",label:s(a==="b2b"?"vat_scenario_b2b_lu":"vat_scenario_b2c_lu"),description:s("vat_scenario_lu_desc"),rate:17,mention:null,color:"green"}:S.includes(v)?a==="b2b"&&R.value?{key:"B2B_INTRA_EU",label:s("vat_scenario_b2b_intra"),description:s("vat_scenario_b2b_intra_desc"),rate:0,mention:"reverse_charge",color:"blue"}:{key:a==="b2b"?"B2B_LU":"B2C_LU",label:s(a==="b2b"?"vat_scenario_b2b_eu_no_vat":"vat_scenario_b2c_eu"),description:s("vat_scenario_eu_desc"),rate:17,mention:null,color:"yellow"}:{key:"EXPORT",label:s("vat_scenario_export"),description:s("vat_scenario_export_desc"),rate:0,mention:"export",color:"purple"}}),A=x(()=>b.value&&B.value&&!R.value);M(()=>c.form.type,v=>{v==="b2c"&&(c.form.vat_number="")});const I=()=>{q("submit")};return(v,a)=>(i(),n("form",{onSubmit:z(I,["prevent"]),class:"space-y-8"},[t("div",G,[t("div",K,[t("h2",W,d(o(s)("client_type")),1)]),t("div",X,[t("div",Y,[(i(!0),n(p,null,y(e.clientTypes,l=>(i(),n("label",{key:l.value,class:k(["flex items-start p-4 rounded-xl border cursor-pointer transition-colors",[e.form.type===l.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-slate-200 dark:border-slate-600 hover:border-slate-300 dark:hover:border-slate-500"]])},[g(t("input",{type:"radio","onUpdate:modelValue":a[0]||(a[0]=_=>e.form.type=_),value:l.value,class:"mt-0.5 h-4 w-4 border-slate-300 text-primary-500 focus:ring-primary-500"},null,8,Z),[[T,e.form.type]]),t("div",J,[t("span",Q,d(l.label),1),t("span",ee,d(l.description),1)])],2))),128))]),r(u,{message:e.form.errors.type,class:"mt-2"},null,8,["message"])])]),t("div",te,[t("div",le,[t("h2",ae,d(o(s)("client_info")),1)]),t("div",se,[t("div",re,[t("div",null,[r(m,{for:"name",value:b.value?o(s)("company_name"):o(s)("full_name")},null,8,["value"]),r(f,{id:"name",modelValue:e.form.name,"onUpdate:modelValue":a[1]||(a[1]=l=>e.form.name=l),type:"text",class:"mt-1 block w-full",required:"",placeholder:b.value?"Société Exemple SARL":"Marie Durand"},null,8,["modelValue","placeholder"]),r(u,{message:e.form.errors.name,class:"mt-2"},null,8,["message"])]),b.value?(i(),n("div",oe,[r(m,{for:"contact_name",value:`${o(s)("director_contact")} (${o(s)("optional")})`},null,8,["value"]),r(f,{id:"contact_name",modelValue:e.form.contact_name,"onUpdate:modelValue":a[2]||(a[2]=l=>e.form.contact_name=l),type:"text",class:"mt-1 block w-full",placeholder:"Pierre Exemple"},null,8,["modelValue"]),r(u,{message:e.form.errors.contact_name,class:"mt-2"},null,8,["message"])])):w("",!0),t("div",null,[r(m,{for:"email",value:o(s)("email")},null,8,["value"]),r(f,{id:"email",modelValue:e.form.email,"onUpdate:modelValue":a[3]||(a[3]=l=>e.form.email=l),type:"email",class:"mt-1 block w-full",required:"",placeholder:"contact@example.com"},null,8,["modelValue"]),r(u,{message:e.form.errors.email,class:"mt-2"},null,8,["message"])])]),t("div",null,[r(m,{for:"address",value:o(s)("address")},null,8,["value"]),g(t("textarea",{id:"address","onUpdate:modelValue":a[4]||(a[4]=l=>e.form.address=l),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",rows:"2",placeholder:"10 Rue Fictive"},null,512),[[E,e.form.address]]),r(u,{message:e.form.errors.address,class:"mt-2"},null,8,["message"])]),t("div",de,[t("div",null,[r(m,{for:"postal_code",value:o(s)("postal_code")},null,8,["value"]),r(f,{id:"postal_code",modelValue:e.form.postal_code,"onUpdate:modelValue":a[5]||(a[5]=l=>e.form.postal_code=l),type:"text",class:"mt-1 block w-full",placeholder:"L-2000"},null,8,["modelValue"]),r(u,{message:e.form.errors.postal_code,class:"mt-2"},null,8,["message"])]),t("div",null,[r(m,{for:"city",value:o(s)("city")},null,8,["value"]),r(f,{id:"city",modelValue:e.form.city,"onUpdate:modelValue":a[6]||(a[6]=l=>e.form.city=l),type:"text",class:"mt-1 block w-full",placeholder:"Luxembourg"},null,8,["modelValue"]),r(u,{message:e.form.errors.city,class:"mt-2"},null,8,["message"])]),t("div",null,[r(m,{for:"country_code",value:o(s)("country")},null,8,["value"]),g(t("select",{id:"country_code","onUpdate:modelValue":a[7]||(a[7]=l=>e.form.country_code=l),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:""},[(i(!0),n(p,null,y(e.countries,l=>(i(),n("option",{key:l.code,value:l.code},d(l.name),9,ne))),128))],512),[[V,e.form.country_code]]),r(u,{message:e.form.errors.country_code,class:"mt-2"},null,8,["message"])])]),t("div",ie,[t("div",null,[r(m,{for:"phone",value:`${o(s)("phone")} (${o(s)("optional")})`},null,8,["value"]),r(f,{id:"phone",modelValue:e.form.phone,"onUpdate:modelValue":a[8]||(a[8]=l=>e.form.phone=l),type:"tel",class:"mt-1 block w-full",placeholder:"+352 000 000 000"},null,8,["modelValue"]),r(u,{message:e.form.errors.phone,class:"mt-2"},null,8,["message"])]),t("div",null,[r(m,{for:"vat_number"},{default:U(()=>[L(d(o(s)("vat_number"))+" ",1),b.value&&B.value?(i(),n("span",ue,"("+d(o(s)("vat_required_for_reverse_charge"))+")",1)):b.value?(i(),n("span",me,"("+d(o(s)("vat_recommended_b2b"))+")",1)):(i(),n("span",ce,"("+d(o(s)("optional"))+")",1))]),_:1}),r(f,{id:"vat_number",modelValue:e.form.vat_number,"onUpdate:modelValue":a[9]||(a[9]=l=>e.form.vat_number=l),type:"text",class:k(["mt-1 block w-full font-mono uppercase",{"bg-slate-100 dark:bg-slate-600":!b.value}]),placeholder:"LU00000000"},null,8,["modelValue","class"]),r(u,{message:e.form.errors.vat_number,class:"mt-2"},null,8,["message"])])]),t("div",{class:k(["rounded-xl border p-4",[h.value.rate===0?"border-sky-200 bg-sky-50 dark:border-sky-800 dark:bg-sky-900/20":"border-slate-200 bg-slate-50 dark:border-slate-700 dark:bg-slate-800"]])},[t("div",be,[t("div",null,[t("h4",fe,d(o(s)("vat_scenario_detected")),1),r(H,{scenario:h.value,size:"sm",class:"mt-2"},null,8,["scenario"])]),t("div",ve,[t("span",{class:k(["text-2xl font-bold",[h.value.rate===0?"text-sky-600 dark:text-sky-400":"text-slate-900 dark:text-white"]])},d(h.value.rate)+"% ",3),t("p",ge,d(o(s)("vat_rate")),1)])]),A.value?(i(),n("p",xe,[a[16]||(a[16]=t("svg",{class:"inline h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),L(" "+d(o(s)("vat_warning_no_number")),1)])):w("",!0)],2),b.value?(i(),n("div",pe,[t("div",null,[r(m,{for:"registration_number",value:`${o(s)("registration_number")} (${o(s)("optional")})`},null,8,["value"]),r(f,{id:"registration_number",modelValue:e.form.registration_number,"onUpdate:modelValue":a[10]||(a[10]=l=>e.form.registration_number=l),type:"text",class:"mt-1 block w-full font-mono",placeholder:"B000000"},null,8,["modelValue"]),r(u,{message:e.form.errors.registration_number,class:"mt-2"},null,8,["message"])])])):w("",!0),b.value&&e.peppolSchemes.length>0?(i(),n("div",ye,[a[18]||(a[18]=t("h3",{class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3"}," Identifiant Peppol (optionnel) ",-1)),a[19]||(a[19]=t("p",{class:"text-xs text-slate-500 dark:text-slate-400 mb-3"}," Nécessaire pour l'envoi de factures électroniques via le réseau Peppol. ",-1)),t("div",ke,[t("div",null,[r(m,{for:"peppol_endpoint_scheme",value:"Schéma"}),g(t("select",{id:"peppol_endpoint_scheme","onUpdate:modelValue":a[11]||(a[11]=l=>e.form.peppol_endpoint_scheme=l),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white text-sm"},[a[17]||(a[17]=t("option",{value:""},"Aucun",-1)),(i(!0),n(p,null,y(e.peppolSchemes,l=>(i(),n("option",{key:l.value,value:l.value},d(l.label),9,he))),128))],512),[[V,e.form.peppol_endpoint_scheme]]),r(u,{message:e.form.errors.peppol_endpoint_scheme,class:"mt-2"},null,8,["message"])]),t("div",null,[r(m,{for:"peppol_endpoint_id",value:"Identifiant"}),r(f,{id:"peppol_endpoint_id",modelValue:e.form.peppol_endpoint_id,"onUpdate:modelValue":a[12]||(a[12]=l=>e.form.peppol_endpoint_id=l),type:"text",class:"mt-1 block w-full font-mono",placeholder:"12345678",disabled:!e.form.peppol_endpoint_scheme},null,8,["modelValue","disabled"]),r(u,{message:e.form.errors.peppol_endpoint_id,class:"mt-2"},null,8,["message"])])])])):w("",!0)])]),t("div",_e,[t("div",we,[t("h2",Ve,d(o(s)("billing_settings")),1)]),t("div",Ue,[t("div",Le,[t("div",null,[r(m,{for:"currency",value:o(s)("default_currency")},null,8,["value"]),g(t("select",{id:"currency","onUpdate:modelValue":a[13]||(a[13]=l=>e.form.currency=l),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:""},[(i(!0),n(p,null,y(e.currencies,l=>(i(),n("option",{key:l.value,value:l.value},d(l.label),9,Se))),128))],512),[[V,e.form.currency]]),r(u,{message:e.form.errors.currency,class:"mt-2"},null,8,["message"])]),t("div",null,[r(m,{for:"locale",value:o(s)("document_language")},null,8,["value"]),g(t("select",{id:"locale","onUpdate:modelValue":a[14]||(a[14]=l=>e.form.locale=l),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},[(i(!0),n(p,null,y(o($).props.availableLocales,(l,_)=>(i(),n("option",{key:_,value:_},d(l),9,Be))),128))],512),[[V,e.form.locale]]),t("p",Re,d(o(s)("document_language_help")),1),r(u,{message:e.form.errors.locale,class:"mt-2"},null,8,["message"])])]),t("div",null,[r(m,{for:"notes",value:`${o(s)("internal_notes")} (${o(s)("optional")})`},null,8,["value"]),g(t("textarea",{id:"notes","onUpdate:modelValue":a[15]||(a[15]=l=>e.form.notes=l),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",rows:"3",placeholder:o(s)("internal_notes")},null,8,Ee),[[E,e.form.notes]]),t("p",Ce,d(o(s)("notes_not_visible")),1),r(u,{message:e.form.errors.notes,class:"mt-2"},null,8,["message"])])])]),t("div",$e,[r(o(F),{href:e.cancelRouteParams?v.route(e.cancelRoute,e.cancelRouteParams):v.route(e.cancelRoute),class:"inline-flex items-center rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},{default:U(()=>[L(d(o(s)("cancel")),1)]),_:1},8,["href"]),r(j,{disabled:e.form.processing,class:k({"opacity-25":e.form.processing})},{default:U(()=>[e.form.processing?(i(),n("span",qe,d(o(s)("saving")),1)):(i(),n("span",Ne,d(e.submitLabel||o(s)("save")),1))]),_:1},8,["disabled","class"])])],32))}};export{ze as _};
