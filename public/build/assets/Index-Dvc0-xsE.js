import{k as w,p as V,c as o,a as l,u as n,h as j,w as g,b as t,t as i,q as _,o as a,F as x,r as y,v as A,s as u,g as c,d as b,i as z,n as B,j as T}from"./app-BNdkYu5R.js";import{_ as D}from"./AppLayout-CQ5EpIy-.js";import"./ApplicationLogo-Btd2wIUd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-7-ZIUky-.js";const N={class:"flex items-center justify-between"},S={class:"flex items-center space-x-3"},H={class:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-4"},L={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800 px-4 py-5"},E={class:"mt-1 text-2xl font-semibold text-gray-900 dark:text-white"},R={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800 px-4 py-5"},U={class:"mt-1 text-2xl font-semibold text-green-600 dark:text-green-400"},O={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800 px-4 py-5"},$={class:"mt-1 text-2xl font-semibold text-gray-900 dark:text-white"},I={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800 px-4 py-5"},q={class:"mt-1 text-2xl font-semibold text-gray-900 dark:text-white"},P={class:"mb-6 flex flex-wrap gap-4"},G=["value"],J=["value"],K=["value"],Q={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},W={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},X={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800"},Y={key:0},Z={colspan:"7",class:"py-10 text-center text-sm text-gray-500 dark:text-gray-400"},tt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm text-gray-500 dark:text-gray-400 sm:pl-6"},et={class:"whitespace-nowrap px-3 py-4"},rt={key:0,class:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs"},st={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-gray-500 dark:text-gray-400 md:table-cell"},at={class:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-800 dark:bg-gray-700 dark:text-gray-300"},dt={class:"whitespace-nowrap px-3 py-4 text-right text-sm font-medium text-gray-900 dark:text-white"},ot={class:"hidden whitespace-nowrap px-3 py-4 text-right text-sm text-gray-500 dark:text-gray-400 lg:table-cell"},it={class:"whitespace-nowrap px-3 py-4 text-center text-sm"},lt=["href"],nt={key:1,class:"text-gray-300 dark:text-gray-600"},gt={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},xt={class:"flex items-center justify-end space-x-2"},ut=["onClick"],mt={key:0,class:"mt-6 flex items-center justify-between"},yt={class:"text-sm text-gray-700 dark:text-gray-400"},ct={class:"isolate inline-flex -space-x-px rounded-md shadow-sm"},wt={__name:"Index",props:{expenses:Object,summary:Object,filters:Object,categories:Array,years:Array,months:Array},setup(s){const h=s,p=w(h.filters.category||""),f=w(h.filters.year||""),v=w(h.filters.month||"");V([p,f,v],()=>{T.get(route("expenses.index"),{category:p.value||void 0,year:f.value||void 0,month:v.value||void 0},{preserveState:!0,replace:!0})});const m=d=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(d),C=d=>d?new Date(d).toLocaleDateString("fr-FR"):"-",F=d=>{const e=h.categories.find(r=>r.value===d);return e?e.label:d},M=d=>{confirm(`Supprimer la dépense "${d.provider_name}" ?`)&&T.delete(route("expenses.destroy",d.id))};return(d,e)=>(a(),o(x,null,[l(n(j),{title:"Dépenses"}),l(D,null,{header:g(()=>[t("div",N,[e[5]||(e[5]=t("h1",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Dépenses ",-1)),t("div",S,[l(n(u),{href:d.route("expenses.summary"),class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},{default:g(()=>[...e[3]||(e[3]=[t("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M15.5 2A1.5 1.5 0 0014 3.5v13a1.5 1.5 0 001.5 1.5h1a1.5 1.5 0 001.5-1.5v-13A1.5 1.5 0 0016.5 2h-1zM9.5 6A1.5 1.5 0 008 7.5v9A1.5 1.5 0 009.5 18h1a1.5 1.5 0 001.5-1.5v-9A1.5 1.5 0 0010.5 6h-1zM3.5 10A1.5 1.5 0 002 11.5v5A1.5 1.5 0 003.5 18h1A1.5 1.5 0 006 16.5v-5A1.5 1.5 0 004.5 10h-1z"})],-1),c(" Résumé ",-1)])]),_:1},8,["href"]),l(n(u),{href:d.route("expenses.create"),class:"inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},{default:g(()=>[...e[4]||(e[4]=[t("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1),c(" Nouvelle dépense ",-1)])]),_:1},8,["href"])])])]),default:g(()=>[t("div",H,[t("div",L,[e[6]||(e[6]=t("dt",{class:"truncate text-sm font-medium text-gray-500 dark:text-gray-400"},"Total HT",-1)),t("dd",E,i(m(s.summary.total_ht)),1)]),t("div",R,[e[7]||(e[7]=t("dt",{class:"truncate text-sm font-medium text-gray-500 dark:text-gray-400"},"TVA récupérable",-1)),t("dd",U,i(m(s.summary.total_vat)),1)]),t("div",O,[e[8]||(e[8]=t("dt",{class:"truncate text-sm font-medium text-gray-500 dark:text-gray-400"},"Total TTC",-1)),t("dd",$,i(m(s.summary.total_ttc)),1)]),t("div",I,[e[9]||(e[9]=t("dt",{class:"truncate text-sm font-medium text-gray-500 dark:text-gray-400"},"Nombre",-1)),t("dd",q,i(s.summary.count),1)])]),t("div",P,[_(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>p.value=r),class:"rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 dark:bg-gray-800 dark:text-white dark:ring-gray-600 sm:text-sm"},[e[10]||(e[10]=t("option",{value:""},"Toutes les catégories",-1)),(a(!0),o(x,null,y(s.categories,r=>(a(),o("option",{key:r.value,value:r.value},i(r.label),9,G))),128))],512),[[A,p.value]]),_(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>f.value=r),class:"rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 dark:bg-gray-800 dark:text-white dark:ring-gray-600 sm:text-sm"},[e[11]||(e[11]=t("option",{value:""},"Toutes les années",-1)),(a(!0),o(x,null,y(s.years,r=>(a(),o("option",{key:r,value:r},i(r),9,J))),128))],512),[[A,f.value]]),_(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>v.value=r),class:"rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 dark:bg-gray-800 dark:text-white dark:ring-gray-600 sm:text-sm"},[e[12]||(e[12]=t("option",{value:""},"Tous les mois",-1)),(a(!0),o(x,null,y(s.months,r=>(a(),o("option",{key:r.value,value:r.value},i(r.label),9,K))),128))],512),[[A,v.value]])]),t("div",Q,[t("table",W,[e[18]||(e[18]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 dark:text-white sm:pl-6"}," Date "),t("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white"}," Fournisseur "),t("th",{class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white md:table-cell"}," Catégorie "),t("th",{class:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"}," HT "),t("th",{class:"hidden px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white lg:table-cell"}," TVA "),t("th",{class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900 dark:text-white"}," Pièce "),t("th",{class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[t("span",{class:"sr-only"},"Actions")])])],-1)),t("tbody",X,[s.expenses.data.length===0?(a(),o("tr",Y,[t("td",Z,[e[14]||(e[14]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2z"})],-1)),e[15]||(e[15]=t("p",{class:"mt-2"},"Aucune dépense trouvée.",-1)),l(n(u),{href:d.route("expenses.create"),class:"mt-4 inline-flex items-center text-indigo-600 hover:text-indigo-500 dark:text-indigo-400"},{default:g(()=>[...e[13]||(e[13]=[c(" Enregistrer votre première dépense ",-1)])]),_:1},8,["href"])])])):b("",!0),(a(!0),o(x,null,y(s.expenses.data,r=>(a(),o("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",tt,i(C(r.date)),1),t("td",et,[l(n(u),{href:d.route("expenses.edit",r.id),class:"font-medium text-gray-900 hover:text-indigo-600 dark:text-white dark:hover:text-indigo-400"},{default:g(()=>[c(i(r.provider_name),1)]),_:2},1032,["href"]),r.description?(a(),o("p",rt,i(r.description),1)):b("",!0)]),t("td",st,[t("span",at,i(F(r.category)),1)]),t("td",dt,i(m(r.amount_ht)),1),t("td",ot,i(m(r.amount_vat)),1),t("td",it,[r.attachment_url?(a(),o("a",{key:0,href:r.attachment_url,target:"_blank",class:"text-indigo-600 hover:text-indigo-500 dark:text-indigo-400",title:"Voir le justificatif"},[...e[16]||(e[16]=[t("svg",{class:"h-5 w-5 inline",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z","clip-rule":"evenodd"})],-1)])],8,lt)):(a(),o("span",nt,"-"))]),t("td",gt,[t("div",xt,[l(n(u),{href:d.route("expenses.edit",r.id),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},{default:g(()=>[...e[17]||(e[17]=[c(" Modifier ",-1)])]),_:1},8,["href"]),t("button",{onClick:k=>M(r),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"}," Supprimer ",8,ut)])])]))),128))])])]),s.expenses.links&&s.expenses.links.length>3?(a(),o("div",mt,[t("div",yt," Affichage de "+i(s.expenses.from)+" à "+i(s.expenses.to)+" sur "+i(s.expenses.total)+" dépenses ",1),t("nav",ct,[(a(!0),o(x,null,y(s.expenses.links,(r,k)=>(a(),o(x,{key:k},[r.url?(a(),z(n(u),{key:0,href:r.url,class:B([r.active?"z-10 bg-indigo-600 text-white":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:text-gray-300 dark:ring-gray-600 dark:hover:bg-gray-700","relative inline-flex items-center px-4 py-2 text-sm font-semibold focus:z-20",k===0?"rounded-l-md":"",k===s.expenses.links.length-1?"rounded-r-md":""]),innerHTML:r.label,"preserve-scroll":""},null,8,["href","class","innerHTML"])):b("",!0)],64))),128))])])):b("",!0)]),_:1})],64))}};export{wt as default};
