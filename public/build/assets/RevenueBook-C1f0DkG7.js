import{k,c as l,a as v,u as D,h as H,w,b as t,q as b,B as f,o as i,F as x,r as y,n as _,t as s,d as u,g as m,j as M}from"./app-B2KrZOCa.js";import{_ as F}from"./AppLayout-CMhKAyAT.js";import"./ApplicationLogo-CBvPJGvQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-Dw9Qk6Ag.js";const j={class:"space-y-6"},L={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},$={class:"px-6 py-4"},R={class:"flex flex-wrap gap-4 items-end"},N={class:"flex flex-wrap gap-2"},S=["onClick"],P={class:"mt-4 flex items-center gap-2"},U=["onClick"],E={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},O={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},q={class:"p-5"},I={class:"flex items-center"},Y={class:"ml-5 w-0 flex-1"},G={class:"text-lg font-semibold text-gray-900 dark:text-white"},J={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},K={class:"p-5"},Q={class:"flex items-center"},W={class:"ml-5 w-0 flex-1"},X={class:"text-lg font-semibold text-gray-900 dark:text-white"},Z={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},tt={class:"p-5"},et={class:"flex items-center"},rt={class:"ml-5 w-0 flex-1"},st={class:"text-lg font-semibold text-gray-900 dark:text-white"},at={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},ot={class:"p-5"},dt={class:"flex items-center"},lt={class:"ml-5 w-0 flex-1"},it={class:"text-lg font-semibold text-green-600 dark:text-green-400"},nt={key:0,class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},gt={class:"overflow-x-auto"},xt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ct={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800"},ht={class:"whitespace-nowrap py-4 pl-6 pr-3 text-sm text-gray-900 dark:text-white"},yt={class:"whitespace-nowrap px-3 py-4 text-right text-sm text-gray-500 dark:text-gray-400"},ut={class:"whitespace-nowrap py-4 pl-3 pr-6 text-right text-sm font-medium text-gray-900 dark:text-white"},mt={class:"bg-gray-50 dark:bg-gray-700"},pt={class:"whitespace-nowrap px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"},kt={class:"whitespace-nowrap py-3.5 pl-3 pr-6 text-right text-sm font-semibold text-gray-900 dark:text-white"},vt={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},wt={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},bt={class:"text-lg font-medium text-gray-900 dark:text-white"},ft={class:"text-sm font-normal text-gray-500 dark:text-gray-400"},_t={class:"overflow-x-auto"},Ct={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Vt={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800"},Tt={key:0},zt={class:"whitespace-nowrap py-4 pl-6 pr-3 text-sm text-gray-500 dark:text-gray-400"},Bt={class:"whitespace-nowrap px-3 py-4 text-sm"},At=["href"],Dt={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-900 dark:text-white"},Ht={class:"whitespace-nowrap px-3 py-4 text-right text-sm text-gray-500 dark:text-gray-400"},Mt={class:"whitespace-nowrap px-3 py-4 text-right text-sm text-gray-500 dark:text-gray-400"},Ft={class:"whitespace-nowrap py-4 pl-3 pr-6 text-right text-sm font-medium text-gray-900 dark:text-white"},jt={key:0,class:"bg-gray-50 dark:bg-gray-700"},Lt={colspan:"3",class:"whitespace-nowrap py-3.5 pl-6 pr-3 text-sm font-semibold text-gray-900 dark:text-white"},$t={class:"whitespace-nowrap px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"},Rt={class:"whitespace-nowrap px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"},Nt={class:"whitespace-nowrap py-3.5 pl-3 pr-6 text-right text-sm font-bold text-green-600 dark:text-green-400"},qt={__name:"RevenueBook",props:{invoices:Array,totals:Object,vatBreakdown:Array,filters:Object,years:Array,periods:Array},setup(a){const p=a,n=k(p.filters.start_date),g=k(p.filters.end_date),c=()=>{M.get(route("reports.revenue-book"),{start_date:n.value,end_date:g.value},{preserveState:!0,replace:!0})},C=o=>{n.value=o.start,g.value=o.end,c()},V=o=>{n.value=`${o}-01-01`,g.value=`${o}-12-31`,c()},d=(o,e="EUR")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(o),T=o=>o?new Date(o).toLocaleDateString("fr-FR"):"-",z=()=>{const o=new Date(n.value),e=new Date(g.value);return`du ${o.toLocaleDateString("fr-FR")} au ${e.toLocaleDateString("fr-FR")}`},B=()=>{window.location.href=route("reports.revenue-book.pdf",{start_date:n.value,end_date:g.value})},A=()=>{window.location.href=route("reports.revenue-book.csv",{start_date:n.value,end_date:g.value})};return(o,e)=>(i(),l(x,null,[v(D(H),{title:"Livre des recettes"}),v(F,null,{header:w(()=>[t("div",{class:"flex items-center justify-between"},[e[4]||(e[4]=t("h1",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Livre des recettes ",-1)),t("div",{class:"flex items-center space-x-3"},[t("button",{type:"button",onClick:A,class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},[...e[2]||(e[2]=[t("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),m(" CSV ",-1)])]),t("button",{type:"button",onClick:B,class:"inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},[...e[3]||(e[3]=[t("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),m(" PDF ",-1)])])])])]),default:w(()=>[t("div",j,[t("div",L,[e[8]||(e[8]=t("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[t("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Période")],-1)),t("div",$,[t("div",R,[t("div",null,[e[5]||(e[5]=t("label",{for:"start_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Du ",-1)),b(t("input",{id:"start_date","onUpdate:modelValue":e[0]||(e[0]=r=>n.value=r),type:"date",onChange:c,class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,544),[[f,n.value]])]),t("div",null,[e[6]||(e[6]=t("label",{for:"end_date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Au ",-1)),b(t("input",{id:"end_date","onUpdate:modelValue":e[1]||(e[1]=r=>g.value=r),type:"date",onChange:c,class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,544),[[f,g.value]])]),t("div",N,[(i(!0),l(x,null,y(a.periods,r=>(i(),l("button",{key:r.label,type:"button",onClick:h=>C(r),class:_(["px-3 py-2 text-sm rounded-md border",n.value===r.start&&g.value===r.end?"bg-indigo-100 border-indigo-300 text-indigo-700 dark:bg-indigo-900 dark:border-indigo-700 dark:text-indigo-300":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600"])},s(r.label),11,S))),128))])]),t("div",P,[e[7]||(e[7]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Année :",-1)),(i(!0),l(x,null,y(a.years,r=>(i(),l("button",{key:r,type:"button",onClick:h=>V(r),class:_(["px-3 py-1 text-sm rounded-md border",n.value===`${r}-01-01`&&g.value===`${r}-12-31`?"bg-indigo-100 border-indigo-300 text-indigo-700 dark:bg-indigo-900 dark:border-indigo-700 dark:text-indigo-300":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600"])},s(r),11,U))),128))])])]),t("div",E,[t("div",O,[t("div",q,[t("div",I,[e[10]||(e[10]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})])],-1)),t("div",Y,[t("dl",null,[e[9]||(e[9]=t("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"}," Factures payées ",-1)),t("dd",G,s(a.totals.count),1)])])])])]),t("div",J,[t("div",K,[t("div",Q,[e[12]||(e[12]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5zm-12 0h.008v.008H6V10.5z"})])],-1)),t("div",W,[t("dl",null,[e[11]||(e[11]=t("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"}," Total HT ",-1)),t("dd",X,s(d(a.totals.ht)),1)])])])])]),t("div",Z,[t("div",tt,[t("div",et,[e[14]||(e[14]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 14.25l6-6m4.5-3.493V21.75l-3.75-1.5-3.75 1.5-3.75-1.5-3.75 1.5V4.757c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0c1.1.128 1.907 1.077 1.907 2.185zM9.75 9h.008v.008H9.75V9zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm4.125 4.5h.008v.008h-.008V13.5zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})])],-1)),t("div",rt,[t("dl",null,[e[13]||(e[13]=t("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"}," Total TVA ",-1)),t("dd",st,s(d(a.totals.vat)),1)])])])])]),t("div",at,[t("div",ot,[t("div",dt,[e[16]||(e[16]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",lt,[t("dl",null,[e[15]||(e[15]=t("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"}," Total TTC ",-1)),t("dd",it,s(d(a.totals.ttc)),1)])])])])])]),a.vatBreakdown.length>0?(i(),l("div",nt,[e[19]||(e[19]=t("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[t("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Récapitulatif TVA")],-1)),t("div",gt,[t("table",xt,[e[18]||(e[18]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"py-3.5 pl-6 pr-3 text-left text-sm font-semibold text-gray-900 dark:text-white"}," Taux TVA "),t("th",{class:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"}," Base HT "),t("th",{class:"py-3.5 pl-3 pr-6 text-right text-sm font-semibold text-gray-900 dark:text-white"}," Montant TVA ")])],-1)),t("tbody",ct,[(i(!0),l(x,null,y(a.vatBreakdown,r=>(i(),l("tr",{key:r.rate},[t("td",ht,s(r.rate)+"% ",1),t("td",yt,s(d(r.base)),1),t("td",ut,s(d(r.amount)),1)]))),128))]),t("tfoot",mt,[t("tr",null,[e[17]||(e[17]=t("td",{class:"whitespace-nowrap py-3.5 pl-6 pr-3 text-sm font-semibold text-gray-900 dark:text-white"}," Total ",-1)),t("td",pt,s(d(a.totals.ht)),1),t("td",kt,s(d(a.totals.vat)),1)])])])])])):u("",!0),t("div",vt,[t("div",wt,[t("h2",bt,[e[20]||(e[20]=m(" Détail des recettes ",-1)),t("span",ft," ("+s(z())+") ",1)])]),t("div",_t,[t("table",Ct,[e[22]||(e[22]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"py-3.5 pl-6 pr-3 text-left text-sm font-semibold text-gray-900 dark:text-white"}," Date paiement "),t("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white"}," N° Facture "),t("th",{class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white"}," Client "),t("th",{class:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"}," Total HT "),t("th",{class:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"}," TVA "),t("th",{class:"py-3.5 pl-3 pr-6 text-right text-sm font-semibold text-gray-900 dark:text-white"}," Total TTC ")])],-1)),t("tbody",Vt,[a.invoices.length===0?(i(),l("tr",Tt,[...e[21]||(e[21]=[t("td",{colspan:"6",class:"py-10 text-center text-sm text-gray-500 dark:text-gray-400"},[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),t("p",{class:"mt-2"},"Aucune recette sur cette période.")],-1)])])):u("",!0),(i(!0),l(x,null,y(a.invoices,r=>{var h;return i(),l("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",zt,s(T(r.paid_at)),1),t("td",Bt,[t("a",{href:o.route("invoices.show",r.id),class:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400"},s(r.number),9,At)]),t("td",Dt,s((h=r.client)==null?void 0:h.name),1),t("td",Ht,s(d(r.total_ht,r.currency)),1),t("td",Mt,s(d(r.total_vat,r.currency)),1),t("td",Ft,s(d(r.total_ttc,r.currency)),1)])}),128))]),a.invoices.length>0?(i(),l("tfoot",jt,[t("tr",null,[t("td",Lt," Total ("+s(a.totals.count)+" facture"+s(a.totals.count>1?"s":"")+") ",1),t("td",$t,s(d(a.totals.ht)),1),t("td",Rt,s(d(a.totals.vat)),1),t("td",Nt,s(d(a.totals.ttc)),1)])])):u("",!0)])])])])]),_:1})],64))}};export{qt as default};
