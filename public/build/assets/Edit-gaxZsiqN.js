import{u as S,r as M,c as u,a,b as l,h as $,i as w,d as t,w as B,f as m,v as h,k as y,e as V,t as f,o as d,g as U,F as b,j as _,y as I,n as A,l as F}from"./app-zFpXp4fG.js";import{_ as P}from"./AdminLayout-Bv2eA8JJ.js";import{_ as z}from"./PrimaryButton-CuuPrp-s.js";import{_ as p}from"./InputLabel-Cp7hTEpk.js";import{_ as k}from"./TextInput-mjcqJr1O.js";import{_ as n}from"./InputError-DftglpBt.js";const O={class:"flex items-center gap-4"},R={class:"lg:col-span-2 space-y-6"},q={class:"rounded-xl bg-slate-800 p-6"},H={class:"mb-4"},K={class:"rounded-xl bg-slate-800 p-6"},G={class:"rounded-xl bg-slate-800 p-6"},J={class:"rounded-xl bg-slate-800 p-6"},Q={class:"mb-4"},W={class:"space-y-6"},X={class:"rounded-xl bg-slate-800 p-6"},Y={class:"mb-4"},Z={class:"mb-4"},ee={class:"flex gap-2"},te=["href"],se={class:"rounded-xl bg-slate-800 p-6"},le=["value"],oe={class:"rounded-xl bg-slate-800 p-6"},ae=["value"],re={class:"rounded-xl bg-slate-800 p-6"},ie={class:"flex flex-wrap gap-2"},ne=["value"],ue={key:0,class:"mt-3 flex flex-wrap gap-2"},de=["onClick"],me={class:"mt-3 flex gap-2"},pe={class:"rounded-xl bg-slate-800 p-6"},ce={key:0,class:"mb-4"},ge=["src"],ke={__name:"Edit",props:{post:Object,categories:Array,tags:Array},setup(g){const i=g,s=S({title:i.post.title,slug:i.post.slug,excerpt:i.post.excerpt||"",content:i.post.content,category_id:i.post.category_id||"",locale:i.post.locale||"fr",cover_image:null,remove_cover:!1,meta_title:i.post.meta_title||"",meta_description:i.post.meta_description||"",status:i.post.status,published_at:i.post.published_at||"",tags:i.post.tags||[],new_tags:[]}),T={fr:"Français",de:"Deutsch",en:"English",lb:"Lëtzebuergesch"},x=M(i.post.cover_image_url),v=M(""),C=()=>{const r=v.value.trim();if(r&&!s.new_tags.includes(r)){const e=i.tags.find(o=>o.name.toLowerCase()===r.toLowerCase());e?s.tags.includes(e.id)||s.tags.push(e.id):s.new_tags.push(r)}v.value=""},L=r=>{s.new_tags.splice(r,1)},j=r=>{r.key==="Enter"&&(r.preventDefault(),C())},D=r=>{const e=r.target.files[0];e&&(s.cover_image=e,s.remove_cover=!1,x.value=URL.createObjectURL(e))},E=()=>{s.cover_image=null,s.remove_cover=!0,x.value=null},N=()=>{s.transform(r=>({...r,_method:"PUT"})).post(route("admin.blog.update",i.post.slug),{forceFormData:!0})};return(r,e)=>(d(),u(b,null,[a(l($),{title:`Modifier - ${g.post.title}`},null,8,["title"]),a(P,null,{header:w(()=>[t("div",O,[a(l(F),{href:r.route("admin.blog.index"),class:"text-slate-400 hover:text-white"},{default:w(()=>[...e[12]||(e[12]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1},8,["href"]),e[13]||(e[13]=t("h1",{class:"text-xl font-semibold text-white"},"Modifier l'article",-1))])]),default:w(()=>[t("form",{onSubmit:B(N,["prevent"]),class:"grid gap-6 lg:grid-cols-3"},[t("div",R,[t("div",q,[t("div",H,[a(p,{for:"title",value:"Titre",class:"text-white"}),a(k,{id:"title",modelValue:l(s).title,"onUpdate:modelValue":e[0]||(e[0]=o=>l(s).title=o),type:"text",class:"mt-1 block w-full bg-slate-700 border-slate-600 text-white",required:""},null,8,["modelValue"]),a(n,{message:l(s).errors.title,class:"mt-2"},null,8,["message"])]),t("div",null,[a(p,{for:"slug",value:"Slug URL",class:"text-white"}),a(k,{id:"slug",modelValue:l(s).slug,"onUpdate:modelValue":e[1]||(e[1]=o=>l(s).slug=o),type:"text",class:"mt-1 block w-full bg-slate-700 border-slate-600 text-white"},null,8,["modelValue"]),a(n,{message:l(s).errors.slug,class:"mt-2"},null,8,["message"])])]),t("div",K,[a(p,{for:"excerpt",value:"Extrait (résumé)",class:"text-white"}),m(t("textarea",{id:"excerpt","onUpdate:modelValue":e[2]||(e[2]=o=>l(s).excerpt=o),rows:"3",class:"mt-1 block w-full rounded-lg border-slate-600 bg-slate-700 text-white placeholder-slate-400 focus:border-purple-500 focus:ring-purple-500",placeholder:"Court résumé pour la liste des articles..."},null,512),[[h,l(s).excerpt]]),a(n,{message:l(s).errors.excerpt,class:"mt-2"},null,8,["message"])]),t("div",G,[a(p,{for:"content",value:"Contenu (HTML)",class:"text-white"}),m(t("textarea",{id:"content","onUpdate:modelValue":e[3]||(e[3]=o=>l(s).content=o),rows:"20",class:"mt-1 block w-full rounded-lg border-slate-600 bg-slate-700 font-mono text-sm text-white placeholder-slate-400 focus:border-purple-500 focus:ring-purple-500",required:""},null,512),[[h,l(s).content]]),a(n,{message:l(s).errors.content,class:"mt-2"},null,8,["message"]),e[14]||(e[14]=t("p",{class:"mt-2 text-sm text-slate-400"}," Vous pouvez utiliser du HTML pour formater votre article. ",-1))]),t("div",J,[e[15]||(e[15]=t("h3",{class:"mb-4 text-lg font-semibold text-white"},"SEO",-1)),t("div",Q,[a(p,{for:"meta_title",value:"Meta Title",class:"text-white"}),a(k,{id:"meta_title",modelValue:l(s).meta_title,"onUpdate:modelValue":e[4]||(e[4]=o=>l(s).meta_title=o),type:"text",class:"mt-1 block w-full bg-slate-700 border-slate-600 text-white",placeholder:"Titre pour les moteurs de recherche"},null,8,["modelValue"]),a(n,{message:l(s).errors.meta_title,class:"mt-2"},null,8,["message"])]),t("div",null,[a(p,{for:"meta_description",value:"Meta Description",class:"text-white"}),m(t("textarea",{id:"meta_description","onUpdate:modelValue":e[5]||(e[5]=o=>l(s).meta_description=o),rows:"2",class:"mt-1 block w-full rounded-lg border-slate-600 bg-slate-700 text-white placeholder-slate-400 focus:border-purple-500 focus:ring-purple-500",placeholder:"Description pour les moteurs de recherche (160 caractères max)"},null,512),[[h,l(s).meta_description]]),a(n,{message:l(s).errors.meta_description,class:"mt-2"},null,8,["message"])])])]),t("div",W,[t("div",X,[e[17]||(e[17]=t("h3",{class:"mb-4 text-lg font-semibold text-white"},"Publication",-1)),t("div",Y,[a(p,{for:"status",value:"Statut",class:"text-white"}),m(t("select",{id:"status","onUpdate:modelValue":e[6]||(e[6]=o=>l(s).status=o),class:"mt-1 block w-full rounded-lg border-slate-600 bg-slate-700 text-white focus:border-purple-500 focus:ring-purple-500"},[...e[16]||(e[16]=[t("option",{value:"draft"},"Brouillon",-1),t("option",{value:"published"},"Publié",-1),t("option",{value:"archived"},"Archivé",-1)])],512),[[y,l(s).status]]),a(n,{message:l(s).errors.status,class:"mt-2"},null,8,["message"])]),t("div",Z,[a(p,{for:"published_at",value:"Date de publication",class:"text-white"}),a(k,{id:"published_at",modelValue:l(s).published_at,"onUpdate:modelValue":e[7]||(e[7]=o=>l(s).published_at=o),type:"datetime-local",class:"mt-1 block w-full bg-slate-700 border-slate-600 text-white"},null,8,["modelValue"]),a(n,{message:l(s).errors.published_at,class:"mt-2"},null,8,["message"])]),t("div",ee,[a(z,{disabled:l(s).processing,class:"flex-1 justify-center"},{default:w(()=>[V(f(l(s).processing?"Enregistrement...":"Mettre à jour"),1)]),_:1},8,["disabled"])]),g.post.status==="published"?(d(),u("a",{key:0,href:r.route("blog.show",g.post.slug),target:"_blank",class:"mt-3 block text-center text-sm text-purple-400 hover:text-purple-300"}," Voir l'article ",8,te)):U("",!0)]),t("div",se,[e[18]||(e[18]=t("h3",{class:"mb-4 text-lg font-semibold text-white"},"Langue",-1)),m(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>l(s).locale=o),class:"block w-full rounded-lg border-slate-600 bg-slate-700 text-white focus:border-purple-500 focus:ring-purple-500"},[(d(),u(b,null,_(T,(o,c)=>t("option",{key:c,value:c},f(o),9,le)),64))],512),[[y,l(s).locale]]),a(n,{message:l(s).errors.locale,class:"mt-2"},null,8,["message"])]),t("div",oe,[e[20]||(e[20]=t("h3",{class:"mb-4 text-lg font-semibold text-white"},"Catégorie",-1)),m(t("select",{"onUpdate:modelValue":e[9]||(e[9]=o=>l(s).category_id=o),class:"block w-full rounded-lg border-slate-600 bg-slate-700 text-white focus:border-purple-500 focus:ring-purple-500"},[e[19]||(e[19]=t("option",{value:""},"Aucune catégorie",-1)),(d(!0),u(b,null,_(g.categories,o=>(d(),u("option",{key:o.id,value:o.id},f(o.name),9,ae))),128))],512),[[y,l(s).category_id]]),a(n,{message:l(s).errors.category_id,class:"mt-2"},null,8,["message"])]),t("div",re,[e[22]||(e[22]=t("h3",{class:"mb-4 text-lg font-semibold text-white"},"Tags",-1)),t("div",ie,[(d(!0),u(b,null,_(g.tags,o=>(d(),u("label",{key:o.id,class:I(["cursor-pointer rounded-full px-3 py-1 text-sm transition-colors",l(s).tags.includes(o.id)?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"])},[m(t("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":e[10]||(e[10]=c=>l(s).tags=c),class:"sr-only"},null,8,ne),[[A,l(s).tags]]),V(" "+f(o.name),1)],2))),128))]),l(s).new_tags.length>0?(d(),u("div",ue,[(d(!0),u(b,null,_(l(s).new_tags,(o,c)=>(d(),u("span",{key:"new-"+c,class:"inline-flex items-center gap-1 rounded-full bg-green-600 px-3 py-1 text-sm text-white"},[V(f(o)+" ",1),t("button",{type:"button",onClick:fe=>L(c),class:"ml-1 text-white/70 hover:text-white"},[...e[21]||(e[21]=[t("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,de)]))),128))])):U("",!0),t("div",me,[m(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>v.value=o),type:"text",placeholder:"Nouveau tag...",class:"flex-1 rounded-lg border-slate-600 bg-slate-700 px-3 py-1.5 text-sm text-white placeholder-slate-400 focus:border-purple-500 focus:ring-purple-500",onKeydown:j},null,544),[[h,v.value]]),t("button",{type:"button",onClick:C,class:"rounded-lg bg-slate-600 px-3 py-1.5 text-sm text-white hover:bg-slate-500"}," + ")]),e[23]||(e[23]=t("p",{class:"mt-2 text-xs text-slate-400"}," Appuyer sur Entrer pour ajouter un nouveau tag ",-1)),a(n,{message:l(s).errors.tags,class:"mt-2"},null,8,["message"]),a(n,{message:l(s).errors.new_tags,class:"mt-2"},null,8,["message"])]),t("div",pe,[e[24]||(e[24]=t("h3",{class:"mb-4 text-lg font-semibold text-white"},"Image de couverture",-1)),x.value?(d(),u("div",ce,[t("img",{src:x.value,alt:"Preview",class:"w-full rounded-lg"},null,8,ge),t("button",{type:"button",onClick:E,class:"mt-2 text-sm text-red-400 hover:text-red-300"}," Supprimer l'image ")])):U("",!0),t("input",{type:"file",accept:"image/*",onChange:D,class:"block w-full text-sm text-slate-400 file:mr-4 file:rounded-lg file:border-0 file:bg-purple-600 file:px-4 file:py-2 file:text-sm file:font-medium file:text-white hover:file:bg-purple-700"},null,32),a(n,{message:l(s).errors.cover_image,class:"mt-2"},null,8,["message"])])])],32)]),_:1})],64))}};export{ke as default};
