import{u as G,c as r,a as p,b as a,h as H,i as x,d as e,l as v,e as n,o as s,t as i,g as m,x as A,F as k,B as j,w as J,j as K,m as Q,aj as W,D as X,z as F,r as g}from"./app-Cqq6IbMT.js";import{_ as Y}from"./AppLayout-CnSWd9CQ.js";import{_ as Z}from"./SecondaryButton-BDyHXPXA.js";import"./DropdownLink-b1Fc-hHx.js";import"./useTranslations-D7SxVrzl.js";const ee={class:"mb-6 border-b border-slate-200 dark:border-slate-700"},te={class:"flex space-x-8","aria-label":"Settings tabs"},se={key:0,class:"mb-6 p-4 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-xl"},re={class:"text-sm text-emerald-700 dark:text-emerald-300"},le={key:1,class:"mb-6 p-4 bg-pink-50 dark:bg-pink-900/20 border border-pink-200 dark:border-pink-800 rounded-xl"},oe={class:"text-sm text-pink-700 dark:text-pink-300"},ae={key:2,class:"mb-6 p-4 bg-pink-50 dark:bg-pink-900/20 border border-pink-200 dark:border-pink-800 rounded-xl"},ie={class:"text-sm text-pink-700 dark:text-pink-300"},ne={class:"space-y-6"},de={class:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},ue={class:"p-6"},me={class:"flex items-center justify-between"},ce={class:"flex items-center space-x-4"},pe={key:0,class:"h-7 w-7 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},xe={key:1,class:"h-7 w-7 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},be={class:"text-xl font-bold text-slate-900 dark:text-white"},he={class:"text-slate-500 dark:text-slate-400"},ve={key:0,class:"flex items-center space-x-3"},fe=["href"],ke={key:1,class:"text-right"},ge={class:"text-sm text-pink-600 dark:text-pink-400"},ye=["disabled"],we={key:0,class:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl"},_e={class:"text-sm text-amber-800 dark:text-amber-200"},Ce={key:0,class:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},Pe={class:"p-6 space-y-6"},Ae={class:"flex justify-between text-sm mb-2"},je={class:"font-medium text-slate-900 dark:text-white"},Fe={class:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden"},ze={class:"flex justify-between text-sm mb-2"},Me={class:"font-medium text-slate-900 dark:text-white"},De={class:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden"},Se={class:"flex justify-between text-sm mb-2"},Be={class:"font-medium text-slate-900 dark:text-white"},qe={class:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden"},Le={key:1,class:"bg-gradient-to-br from-primary-500 to-primary-700 rounded-2xl shadow-lg overflow-hidden"},Ee={class:"p-8"},Ve={class:"flex items-center justify-between"},Te={class:"text-center text-white"},$e={class:"mb-4"},Ne={class:"flex items-center justify-center space-x-3 mb-4"},Oe={class:"text-4xl font-bold"},Ge=["action"],Re=["value"],Ie=["value"],Ue=["disabled"],He={key:0},Je={key:1},Ke={key:2,class:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},Qe={class:"divide-y divide-slate-200 dark:divide-slate-700"},We={class:"font-medium text-slate-900 dark:text-white"},Xe={class:"text-sm text-slate-500"},Ye=["href"],Ze={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},et={class:"flex min-h-full items-center justify-center p-4"},tt={class:"relative bg-white dark:bg-slate-800 rounded-2xl shadow-xl max-w-md w-full p-6"},st={class:"mt-6 flex justify-end space-x-3"},rt=["disabled"],lt={key:0},ot={key:1},mt={__name:"Subscription",props:{plans:Array,currentPlan:String,subscription:Object,usage:Object,invoices:Array,onTrial:Boolean,trialEndsAt:String},setup(o){const d=X(),f=o,b=g("monthly"),h=g(!1),y=F(()=>f.plans.find(l=>l.name==="pro")),c=F(()=>f.currentPlan==="pro"),z=F(()=>{var l;return((l=f.subscription)==null?void 0:l.ends_at)&&new Date(f.subscription.ends_at)>new Date}),M=g(null),w=g(!1),_=G({}),D=G({}),R=()=>{w.value=!0,M.value.submit()},I=()=>{_.post(route("subscription.cancel"),{onSuccess:()=>{h.value=!1}})},U=()=>{D.post(route("subscription.resume"))},C=l=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:2}).format(l),S=l=>l?new Date(l).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"",P=(l,t)=>t?Math.min(100,Math.round(l/t*100)):0;return(l,t)=>(s(),r(k,null,[p(a(H),{title:"Abonnement"}),p(Y,null,{header:x(()=>[...t[5]||(t[5]=[e("h1",{class:"text-xl font-semibold text-slate-900 dark:text-white"}," Abonnement ",-1)])]),default:x(()=>{var B,q,L,E,V,T,$,N,O;return[e("div",ee,[e("nav",te,[p(a(v),{href:l.route("settings.business.edit"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:x(()=>[...t[6]||(t[6]=[n(" Entreprise ",-1)])]),_:1},8,["href"]),p(a(v),{href:l.route("settings.email"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:x(()=>[...t[7]||(t[7]=[n(" Email ",-1)])]),_:1},8,["href"]),p(a(v),{href:l.route("settings.email.provider"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:x(()=>[...t[8]||(t[8]=[n(" Fournisseur Email ",-1)])]),_:1},8,["href"]),p(a(v),{href:l.route("settings.accountant"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:x(()=>[...t[9]||(t[9]=[n(" Accès Comptable ",-1)])]),_:1},8,["href"]),p(a(v),{href:l.route("subscription.index"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-primary-500 text-primary-600 dark:text-primary-400"},{default:x(()=>[...t[10]||(t[10]=[n(" Abonnement ",-1)])]),_:1},8,["href"])])]),(B=a(d).props.flash)!=null&&B.success?(s(),r("div",se,[e("p",re,i(a(d).props.flash.success),1)])):m("",!0),(q=a(d).props.flash)!=null&&q.error?(s(),r("div",le,[e("p",oe,i(a(d).props.flash.error),1)])):m("",!0),(L=a(d).props.errors)!=null&&L.plan||(E=a(d).props.errors)!=null&&E.billing_period?(s(),r("div",ae,[e("p",ie,i(a(d).props.errors.plan||a(d).props.errors.billing_period),1)])):m("",!0),e("div",ne,[e("div",de,[t[14]||(t[14]=e("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},[e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-white"}," Votre plan actuel ")],-1)),e("div",ue,[e("div",me,[e("div",ce,[e("div",{class:A(["h-14 w-14 rounded-2xl flex items-center justify-center",c.value?"bg-primary-100 dark:bg-primary-900/30":"bg-slate-100 dark:bg-slate-700"])},[c.value?(s(),r("svg",pe,[...t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"},null,-1)])])):(s(),r("svg",xe,[...t[12]||(t[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))],2),e("div",null,[e("h3",be," Plan "+i(c.value?"Pro":"Starter"),1),e("p",he,[c.value?(s(),r(k,{key:0},[n(i(C(((V=y.value)==null?void 0:V.price_monthly)||7))+"/mois ",1)],64)):(s(),r(k,{key:1},[n(" Gratuit ")],64))])])]),c.value&&!z.value?(s(),r("div",ve,[e("a",{href:l.route("subscription.portal"),class:"inline-flex items-center px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-xl text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}," Gérer le paiement ",8,fe),e("button",{onClick:t[0]||(t[0]=u=>h.value=!0),class:"text-sm text-pink-600 hover:text-pink-800 dark:text-pink-400"}," Annuler ")])):z.value?(s(),r("div",ke,[e("p",ge," Annulé - Accès jusqu'au "+i(S((T=o.subscription)==null?void 0:T.ends_at)),1),e("button",{onClick:U,disabled:a(D).processing,class:"mt-2 text-sm text-primary-600 hover:text-primary-800 font-medium"}," Réactiver l'abonnement ",8,ye)])):m("",!0)]),o.onTrial?(s(),r("div",we,[e("p",_e,[t[13]||(t[13]=e("svg",{class:"inline h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),n(" Période d'essai - se termine le "+i(S(o.trialEndsAt)),1)])])):m("",!0)])]),c.value?m("",!0):(s(),r("div",Ce,[t[18]||(t[18]=e("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},[e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-white"}," Utilisation ce mois ")],-1)),e("div",Pe,[e("div",null,[e("div",Ae,[t[15]||(t[15]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Clients",-1)),e("span",je,i(o.usage.clients.used)+" / "+i(o.usage.clients.limit),1)]),e("div",Fe,[e("div",{class:"h-full bg-primary-500 rounded-full transition-all",style:j({width:P(o.usage.clients.used,o.usage.clients.limit)+"%"})},null,4)])]),e("div",null,[e("div",ze,[t[16]||(t[16]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Factures",-1)),e("span",Me,i(o.usage.invoices_this_month.used)+" / "+i(o.usage.invoices_this_month.limit),1)]),e("div",De,[e("div",{class:"h-full bg-primary-500 rounded-full transition-all",style:j({width:P(o.usage.invoices_this_month.used,o.usage.invoices_this_month.limit)+"%"})},null,4)])]),e("div",null,[e("div",Se,[t[17]||(t[17]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Devis",-1)),e("span",Be,i(o.usage.quotes_this_month.used)+" / "+i(o.usage.quotes_this_month.limit),1)]),e("div",qe,[e("div",{class:"h-full bg-primary-500 rounded-full transition-all",style:j({width:P(o.usage.quotes_this_month.used,o.usage.quotes_this_month.limit)+"%"})},null,4)])])])])),c.value?m("",!0):(s(),r("div",Le,[e("div",Ee,[e("div",Ve,[t[21]||(t[21]=e("div",{class:"text-white"},[e("h3",{class:"text-2xl font-bold"},"Passez au plan Pro"),e("p",{class:"mt-2 text-primary-100"}," Débloquez l'export FAIA, les relances automatiques et bien plus. "),e("ul",{class:"mt-4 space-y-2"},[e("li",{class:"flex items-center text-sm"},[e("svg",{class:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})]),n(" Clients et factures illimités ")]),e("li",{class:"flex items-center text-sm"},[e("svg",{class:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})]),n(" Export FAIA pour contrôle fiscal ")]),e("li",{class:"flex items-center text-sm"},[e("svg",{class:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})]),n(" Archivage PDF longue durée ")])])],-1)),e("div",Te,[e("div",$e,[e("div",Ne,[e("button",{onClick:t[1]||(t[1]=u=>b.value="monthly"),class:A(["px-3 py-1 rounded-lg text-sm font-medium transition-colors",b.value==="monthly"?"bg-white text-primary-600":"text-white/80 hover:text-white"])}," Mensuel ",2),e("button",{onClick:t[2]||(t[2]=u=>b.value="yearly"),class:A(["px-3 py-1 rounded-lg text-sm font-medium transition-colors",b.value==="yearly"?"bg-white text-primary-600":"text-white/80 hover:text-white"])}," Annuel (-17%) ",2)]),e("p",Oe,i(b.value==="yearly"?C((($=y.value)==null?void 0:$.monthly_price_when_yearly)||5.83):C(((N=y.value)==null?void 0:N.price_monthly)||7)),1),t[19]||(t[19]=e("p",{class:"text-sm text-primary-100"},"/mois HT",-1))]),e("form",{ref_key:"checkoutForm",ref:M,action:l.route("subscription.checkout"),method:"POST"},[e("input",{type:"hidden",name:"_token",value:a(d).props.csrf_token},null,8,Re),t[20]||(t[20]=e("input",{type:"hidden",name:"plan",value:"pro"},null,-1)),e("input",{type:"hidden",name:"billing_period",value:b.value},null,8,Ie),e("button",{type:"submit",onClick:J(R,["prevent"]),disabled:w.value,class:"inline-flex items-center px-6 py-3 bg-white text-primary-600 font-semibold rounded-xl hover:bg-primary-50 transition-colors disabled:opacity-50"},[w.value?(s(),r("span",He,"Chargement...")):(s(),r("span",Je,"Passer à Pro"))],8,Ue)],8,Ge)])])])])),c.value&&((O=o.invoices)!=null&&O.length)?(s(),r("div",Ke,[t[22]||(t[22]=e("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},[e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-white"}," Historique des factures ")],-1)),e("div",Qe,[(s(!0),r(k,null,K(o.invoices,u=>(s(),r("div",{key:u.id,class:"px-6 py-4 flex items-center justify-between"},[e("div",null,[e("p",We,i(u.date),1),e("p",Xe,i(u.total),1)]),e("a",{href:u.url,target:"_blank",class:"text-primary-600 hover:text-primary-800 text-sm font-medium"}," Télécharger PDF ",8,Ye)]))),128))])])):m("",!0)]),(s(),Q(W,{to:"body"},[h.value?(s(),r("div",Ze,[e("div",et,[e("div",{class:"fixed inset-0 bg-slate-900/50",onClick:t[3]||(t[3]=u=>h.value=!1)}),e("div",tt,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white"}," Annuler votre abonnement ? ",-1)),t[25]||(t[25]=e("p",{class:"mt-2 text-slate-600 dark:text-slate-400"}," Vous conserverez l'accès Pro jusqu'à la fin de votre période de facturation. Après cela, vous passerez automatiquement au plan Starter gratuit. ",-1)),e("div",st,[p(Z,{onClick:t[4]||(t[4]=u=>h.value=!1)},{default:x(()=>[...t[23]||(t[23]=[n(" Garder Pro ",-1)])]),_:1}),e("button",{onClick:I,disabled:a(_).processing,class:"inline-flex items-center px-4 py-2 bg-pink-600 hover:bg-pink-700 text-white font-medium rounded-xl transition-colors disabled:opacity-50"},[a(_).processing?(s(),r("span",lt,"Annulation...")):(s(),r("span",ot,"Confirmer l'annulation"))],8,rt)])])])])):m("",!0)]))]}),_:1})],64))}};export{mt as default};
