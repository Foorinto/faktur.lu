import{e as C,c as d,a as o,u as s,h as U,w as c,b as e,f as T,q as n,B as p,o as l,F as y,r as b,t as m,v,z as j,g as k,d as A,s as _,A as w}from"./app-B2KrZOCa.js";import{_ as N}from"./AppLayout-CMhKAyAT.js";import{_ as i,a as u}from"./InputError-CsSOzQ1V.js";import{P as D}from"./PrimaryButton-DZCmMAEy.js";import"./ApplicationLogo-CBvPJGvQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-Dw9Qk6Ag.js";const E={class:"flex items-center space-x-4"},q={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},B={class:"px-6 py-4"},R={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},S={class:"sm:col-span-2"},P=["value"],z={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},I={class:"px-6 py-4"},H={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},L={class:"relative mt-1"},$=["value"],G={class:"mt-1 rounded-md bg-gray-50 dark:bg-gray-700 px-4 py-3 text-sm"},J={class:"flex justify-between"},O={class:"font-medium text-gray-900 dark:text-white"},W={class:"flex justify-between mt-1"},X={class:"font-medium text-gray-900 dark:text-white"},Y={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},Z={class:"px-6 py-4"},K={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Q=["value"],ee={class:"sm:col-span-2"},te={class:"sm:col-span-2"},re={class:"flex items-center"},se={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},ae={class:"px-6 py-4"},oe={class:"flex items-center justify-center w-full"},de={for:"attachment",class:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:hover:bg-gray-600"},le={key:0,class:"mt-3 text-sm text-gray-600 dark:text-gray-400"},ne={class:"flex justify-end space-x-3"},ie={key:0},ue={key:1},ve={__name:"Create",props:{categories:Array,vatRates:Array,paymentMethods:Array},setup(f){const r=C({date:new Date().toISOString().split("T")[0],provider_name:"",category:"",amount_ht:"",vat_rate:17,description:"",is_deductible:!0,payment_method:"",reference:"",attachment:null}),x=w(()=>!r.amount_ht||!r.vat_rate?0:(parseFloat(r.amount_ht)*parseFloat(r.vat_rate)/100).toFixed(2)),F=w(()=>r.amount_ht?(parseFloat(r.amount_ht)+parseFloat(x.value)).toFixed(2):0),h=g=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(g),V=g=>{r.attachment=g.target.files[0]},M=()=>{r.post(route("expenses.store"),{forceFormData:!0})};return(g,t)=>(l(),d(y,null,[o(s(U),{title:"Nouvelle dépense"}),o(N,null,{header:c(()=>[e("div",E,[o(s(_),{href:g.route("expenses.index"),class:"text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400"},{default:c(()=>[...t[9]||(t[9]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"]),t[10]||(t[10]=e("h1",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Nouvelle dépense ",-1))])]),default:c(()=>[e("form",{onSubmit:T(M,["prevent"]),class:"space-y-6"},[e("div",q,[t[12]||(t[12]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Informations")],-1)),e("div",B,[e("div",R,[e("div",null,[o(i,{for:"date",value:"Date"}),n(e("input",{id:"date","onUpdate:modelValue":t[0]||(t[0]=a=>s(r).date=a),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},null,512),[[p,s(r).date]]),o(u,{message:s(r).errors.date,class:"mt-2"},null,8,["message"])]),e("div",null,[o(i,{for:"provider_name",value:"Fournisseur"}),n(e("input",{id:"provider_name","onUpdate:modelValue":t[1]||(t[1]=a=>s(r).provider_name=a),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"Ex: Fournisseur XYZ",required:""},null,512),[[p,s(r).provider_name]]),o(u,{message:s(r).errors.provider_name,class:"mt-2"},null,8,["message"])]),e("div",S,[o(i,{for:"category",value:"Catégorie"}),n(e("select",{id:"category","onUpdate:modelValue":t[2]||(t[2]=a=>s(r).category=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[t[11]||(t[11]=e("option",{value:""},"Sélectionner une catégorie",-1)),(l(!0),d(y,null,b(f.categories,a=>(l(),d("option",{key:a.value,value:a.value},m(a.label),9,P))),128))],512),[[v,s(r).category]]),o(u,{message:s(r).errors.category,class:"mt-2"},null,8,["message"])])])])]),e("div",z,[t[16]||(t[16]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Montants")],-1)),e("div",I,[e("div",H,[e("div",null,[o(i,{for:"amount_ht",value:"Montant HT"}),e("div",L,[n(e("input",{id:"amount_ht","onUpdate:modelValue":t[3]||(t[3]=a=>s(r).amount_ht=a),type:"number",step:"0.01",min:"0.01",class:"block w-full rounded-md border-gray-300 pr-12 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"0.00",required:""},null,512),[[p,s(r).amount_ht]]),t[13]||(t[13]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[e("span",{class:"text-gray-500 dark:text-gray-400"},"EUR")],-1))]),o(u,{message:s(r).errors.amount_ht,class:"mt-2"},null,8,["message"])]),e("div",null,[o(i,{for:"vat_rate",value:"Taux TVA"}),n(e("select",{id:"vat_rate","onUpdate:modelValue":t[4]||(t[4]=a=>s(r).vat_rate=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[(l(!0),d(y,null,b(f.vatRates,a=>(l(),d("option",{key:a.value,value:a.value},m(a.label),9,$))),128))],512),[[v,s(r).vat_rate,void 0,{number:!0}]]),o(u,{message:s(r).errors.vat_rate,class:"mt-2"},null,8,["message"])]),e("div",null,[o(i,{value:"Montants calculés"}),e("div",G,[e("div",J,[t[14]||(t[14]=e("span",{class:"text-gray-500 dark:text-gray-400"},"TVA:",-1)),e("span",O,m(h(x.value)),1)]),e("div",W,[t[15]||(t[15]=e("span",{class:"text-gray-500 dark:text-gray-400"},"TTC:",-1)),e("span",X,m(h(F.value)),1)])])])])])]),e("div",Y,[t[19]||(t[19]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Informations complémentaires")],-1)),e("div",Z,[e("div",K,[e("div",null,[o(i,{for:"payment_method",value:"Mode de paiement (optionnel)"}),n(e("select",{id:"payment_method","onUpdate:modelValue":t[5]||(t[5]=a=>s(r).payment_method=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},[t[17]||(t[17]=e("option",{value:""},"Sélectionner",-1)),(l(!0),d(y,null,b(f.paymentMethods,a=>(l(),d("option",{key:a.value,value:a.value},m(a.label),9,Q))),128))],512),[[v,s(r).payment_method]]),o(u,{message:s(r).errors.payment_method,class:"mt-2"},null,8,["message"])]),e("div",null,[o(i,{for:"reference",value:"Référence facture (optionnel)"}),n(e("input",{id:"reference","onUpdate:modelValue":t[6]||(t[6]=a=>s(r).reference=a),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"Ex: REF-0000"},null,512),[[p,s(r).reference]]),o(u,{message:s(r).errors.reference,class:"mt-2"},null,8,["message"])]),e("div",ee,[o(i,{for:"description",value:"Description (optionnel)"}),n(e("textarea",{id:"description","onUpdate:modelValue":t[7]||(t[7]=a=>s(r).description=a),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"Notes ou détails sur cette dépense..."},null,512),[[p,s(r).description]]),o(u,{message:s(r).errors.description,class:"mt-2"},null,8,["message"])]),e("div",te,[e("div",re,[n(e("input",{id:"is_deductible","onUpdate:modelValue":t[8]||(t[8]=a=>s(r).is_deductible=a),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700"},null,512),[[j,s(r).is_deductible]]),t[18]||(t[18]=e("label",{for:"is_deductible",class:"ml-2 block text-sm text-gray-900 dark:text-white"}," Dépense déductible fiscalement ",-1))])])])])]),e("div",se,[t[21]||(t[21]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Justificatif")],-1)),e("div",ae,[e("div",oe,[e("label",de,[t[20]||(t[20]=e("div",{class:"flex flex-col items-center justify-center pt-5 pb-6"},[e("svg",{class:"w-8 h-8 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),e("p",{class:"mb-2 text-sm text-gray-500 dark:text-gray-400"},[e("span",{class:"font-semibold"},"Cliquez pour télécharger"),k(" ou glissez-déposez ")]),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"PDF, JPG, PNG ou WebP (max. 10 Mo)")],-1)),e("input",{id:"attachment",type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png,.webp",onChange:V},null,32)])]),s(r).attachment?(l(),d("div",le," Fichier sélectionné: "+m(s(r).attachment.name),1)):A("",!0),o(u,{message:s(r).errors.attachment,class:"mt-2"},null,8,["message"])])]),e("div",ne,[o(s(_),{href:g.route("expenses.index"),class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},{default:c(()=>[...t[22]||(t[22]=[k(" Annuler ",-1)])]),_:1},8,["href"]),o(D,{disabled:s(r).processing},{default:c(()=>[s(r).processing?(l(),d("span",ie,"Enregistrement...")):(l(),d("span",ue,"Enregistrer"))]),_:1},8,["disabled"])])],32)]),_:1})],64))}};export{ve as default};
