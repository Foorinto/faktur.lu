import{r as w,y as F,z as Z,A as Y,o as r,c as d,d as t,f as C,v as K,x as A,g,t as c,b as n,F as E,j as T,B as S,J as Q,a as o,m as W,k as P,i as H,e as D,l as ee,w as te,I as G}from"./app-BnwxtZv5.js";import{u as J}from"./useTranslations-XGH72HYp.js";import{_ as b}from"./InputError-BTq4n7KK.js";import{_ as p}from"./InputLabel-BmaEP7h2.js";import{_ as ae}from"./PrimaryButton-CEE4RC9-.js";import{_ as V}from"./TextInput-DE83I7ic.js";import{_ as le}from"./VatScenarioIndicator-C_p_IJQ0.js";const se={class:"relative"},oe=["placeholder"],re={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},ne={key:1,class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},de={key:0,class:"mt-1 text-xs text-slate-400 dark:text-slate-500"},ie={key:1,class:"mt-1 text-xs text-slate-400 dark:text-slate-500"},ue={key:2,class:"absolute z-50 mt-1 w-full rounded-xl bg-white shadow-xl shadow-slate-200/50 ring-1 ring-slate-200 dark:bg-slate-800 dark:ring-slate-700 dark:shadow-slate-900/50 max-h-64 overflow-y-auto"},ce={class:"py-1"},me=["onClick","onMouseenter"],fe={class:"font-medium text-sm text-slate-900 dark:text-white"},ve={class:"text-xs text-slate-500 dark:text-slate-400 mt-0.5 flex items-center gap-2"},be={key:0},pe={key:1,class:"font-mono"},ge={key:2,class:"font-mono text-slate-400"},ye={__name:"CompanySearchInput",props:{modelValue:{type:String,default:""},countryCode:{type:String,default:"LU"},isB2B:{type:Boolean,default:!0},placeholder:{type:String,default:""}},emits:["update:modelValue","company-selected"],setup(e,{emit:X}){const{t:s}=J(),U=e,i=X,B=w(U.modelValue),f=w([]),h=w(!1),y=w(!1),_=w(-1),z=w(null),I=w(null);let q=null;const $=S(()=>U.countryCode==="FR");F(()=>U.modelValue,m=>{m!==B.value&&(B.value=m)}),F(B,m=>{if(i("update:modelValue",m),!$.value||!U.isB2B||m.length<2){f.value=[],y.value=!1;return}clearTimeout(q),q=setTimeout(()=>M(m),300)}),F(()=>U.countryCode,()=>{f.value=[],y.value=!1});async function M(m){if(!(m.length<2)){h.value=!0,_.value=-1;try{const k=new URLSearchParams({query:m,country_code:U.countryCode}),v=await fetch(route("company-lookup.search")+"?"+k,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(v.ok){const u=await v.json();f.value=u.results||[],y.value=f.value.length>0}}catch{f.value=[]}finally{h.value=!1}}}function O(m){B.value=m.name,y.value=!1,f.value=[],i("update:modelValue",m.name),i("company-selected",m)}function x(m){y.value&&(m.key==="ArrowDown"?(m.preventDefault(),_.value=Math.min(_.value+1,f.value.length-1)):m.key==="ArrowUp"?(m.preventDefault(),_.value=Math.max(_.value-1,0)):m.key==="Enter"&&_.value>=0?(m.preventDefault(),O(f.value[_.value])):m.key==="Escape"&&(y.value=!1))}function N(m){I.value&&!I.value.contains(m.target)&&(y.value=!1)}return Z(()=>document.addEventListener("click",N)),Y(()=>{document.removeEventListener("click",N),clearTimeout(q)}),(m,k)=>(r(),d("div",{ref_key:"wrapperRef",ref:I,class:"relative"},[t("div",se,[C(t("input",{ref_key:"inputRef",ref:z,"onUpdate:modelValue":k[0]||(k[0]=v=>B.value=v),type:"text",class:A(["rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:focus:border-primary-500 dark:focus:ring-primary-500 placeholder-slate-400 block w-full",{"pr-8":h.value}]),placeholder:e.placeholder,onKeydown:x,onFocus:k[1]||(k[1]=v=>y.value=f.value.length>0),required:"",autocomplete:"off"},null,42,oe),[[K,B.value]]),h.value?(r(),d("div",re,[...k[2]||(k[2]=[t("svg",{class:"animate-spin h-4 w-4 text-slate-400",viewBox:"0 0 24 24",fill:"none"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1)])])):$.value&&e.isB2B?(r(),d("div",ne,[...k[3]||(k[3]=[t("svg",{class:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})],-1)])])):g("",!0)]),$.value&&e.isB2B&&!y.value&&!h.value&&B.value.length<2?(r(),d("p",de,c(n(s)("company_search_fr_hint")),1)):g("",!0),!$.value&&e.isB2B&&["BE","LU","DE","NL","AT","IT","ES"].includes(e.countryCode)?(r(),d("p",ie,c(n(s)("company_search_vat_hint")),1)):g("",!0),y.value?(r(),d("div",ue,[t("ul",ce,[(r(!0),d(E,null,T(f.value,(v,u)=>(r(),d("li",{key:u,class:A(["px-4 py-3 cursor-pointer transition-colors",[u===_.value?"bg-primary-50 dark:bg-primary-900/20":"hover:bg-slate-50 dark:hover:bg-slate-700/50"]]),onClick:a=>O(v),onMouseenter:a=>_.value=u},[t("div",fe,c(v.name),1),t("div",ve,[v.postal_code||v.city?(r(),d("span",be,c([v.postal_code,v.city].filter(Boolean).join(" ")),1)):g("",!0),v.vat_number?(r(),d("span",pe,c(v.vat_number),1)):g("",!0),v.registration_number?(r(),d("span",ge,c(v.registration_number),1)):g("",!0)])],42,me))),128))])])):g("",!0)],512))}},xe={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},ke={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},he={class:"text-lg font-medium text-slate-900 dark:text-white"},_e={class:"px-6 py-4"},we={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Ve=["value"],Be={class:"ml-3"},Ce={class:"block text-sm font-medium text-slate-900 dark:text-white"},Ue={class:"block text-sm text-slate-500 dark:text-slate-400"},Re={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},Se={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},$e={class:"text-lg font-medium text-slate-900 dark:text-white"},Le={class:"px-6 py-4 space-y-4"},Ee={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Te={key:0},Ae={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},qe=["value"],Me={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Ne={key:0,class:"text-amber-600 text-xs font-medium"},Fe={key:1,class:"text-slate-400 text-xs"},Ie={key:2,class:"text-slate-400 text-xs"},je={key:0,class:"mt-1 flex items-center text-xs"},Pe={key:0,class:"animate-spin h-3 w-3 mr-1 text-slate-400",viewBox:"0 0 24 24",fill:"none"},De={key:1,class:"text-slate-400"},ze={key:2,class:"text-green-600 dark:text-green-400"},Oe={key:0,class:"text-slate-500 dark:text-slate-400 ml-1"},He={key:3,class:"text-red-600 dark:text-red-400"},Xe={key:4,class:"text-slate-400"},Ke={class:"flex items-center justify-between"},We={class:"text-sm font-medium text-slate-900 dark:text-white"},Ge={class:"text-right"},Je={class:"text-xs text-slate-500 dark:text-slate-400"},Ze={key:0,class:"mt-3 text-sm text-amber-600 dark:text-amber-400"},Ye={key:0,class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Qe={key:1,class:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-4"},et={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},tt=["value"],at={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},lt={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},st={class:"text-lg font-medium text-slate-900 dark:text-white"},ot={class:"px-6 py-4 space-y-4"},rt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},nt=["value"],dt=["value"],it={class:"mt-1 text-sm text-slate-500 dark:text-slate-400"},ut={key:0,class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},ct={class:"text-slate-400 text-xs"},mt=["value"],ft={key:0},vt=["placeholder"],bt={class:"mt-1 text-sm text-slate-500 dark:text-slate-400"},pt={class:"flex justify-end space-x-3"},gt={key:0},yt={key:1},Ct={__name:"ClientForm",props:{form:{type:Object,required:!0},clientTypes:{type:Array,required:!0},currencies:{type:Array,required:!0},countries:{type:Array,required:!0},peppolSchemes:{type:Array,default:()=>[]},vatRates:{type:Array,default:()=>[]},isVatExempt:{type:Boolean,default:!0},submitLabel:{type:String,default:null},cancelRoute:{type:String,default:"clients.index"},cancelRouteParams:{type:[Object,Number,String],default:null},sellerVatRegime:{type:String,default:"franchise"}},emits:["submit"],setup(e,{emit:X}){const{t:s}=J(),U=G(),i=e,B=X,f=S(()=>i.form.type==="b2b"),h=w(i.form.default_vat_rate!==null&&i.form.default_vat_rate!==void 0&&i.form.default_vat_rate!==""?i.vatRates.some(u=>u.value===parseFloat(i.form.default_vat_rate))?parseFloat(i.form.default_vat_rate):"custom":""),y=w(h.value==="custom"?i.form.default_vat_rate:"");F(h,u=>{u===""?i.form.default_vat_rate=null:u==="custom"?i.form.default_vat_rate=y.value||null:i.form.default_vat_rate=u}),F(y,u=>{h.value==="custom"&&(i.form.default_vat_rate=u!==""?parseFloat(u):null)});const _=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK"],z=S(()=>_.includes(i.form.country_code)),I=S(()=>i.form.country_code==="LU"),q=S(()=>z.value&&!I.value),$=S(()=>i.form.vat_number&&i.form.vat_number.trim()!==""),M=S(()=>{if(i.sellerVatRegime==="franchise")return{key:"FRANCHISE",label:s("vat_scenario_franchise"),description:s("vat_scenario_franchise_desc"),rate:0,mention:"franchise",color:"gray"};const u=i.form.country_code||"LU",a=i.form.type||"b2b";return u==="LU"?{key:a==="b2b"?"B2B_LU":"B2C_LU",label:s(a==="b2b"?"vat_scenario_b2b_lu":"vat_scenario_b2c_lu"),description:s("vat_scenario_lu_desc"),rate:17,mention:null,color:"green"}:_.includes(u)?a==="b2b"&&$.value?{key:"B2B_INTRA_EU",label:s("vat_scenario_b2b_intra"),description:s("vat_scenario_b2b_intra_desc"),rate:0,mention:"reverse_charge",color:"blue"}:{key:a==="b2b"?"B2B_LU":"B2C_LU",label:s(a==="b2b"?"vat_scenario_b2b_eu_no_vat":"vat_scenario_b2c_eu"),description:s("vat_scenario_eu_desc"),rate:17,mention:null,color:"yellow"}:{key:"EXPORT",label:s("vat_scenario_export"),description:s("vat_scenario_export_desc"),rate:0,mention:"export",color:"purple"}}),O=S(()=>f.value&&q.value&&!$.value);F(()=>i.form.type,u=>{u==="b2c"&&(i.form.vat_number="")});const x=w(null),N=w(null),m=u=>{u.address&&(i.form.address=u.address),u.postal_code&&(i.form.postal_code=u.postal_code),u.city&&(i.form.city=u.city),u.country_code&&(i.form.country_code=u.country_code),u.vat_number&&(i.form.vat_number=u.vat_number),u.registration_number&&(i.form.registration_number=u.registration_number)},k=async()=>{var a;const u=(i.form.vat_number||"").replace(/\s/g,"").toUpperCase();if(!u||u.length<4||!f.value||!z.value){x.value=null;return}x.value="loading";try{const l=((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.content)||G().props.csrf_token,L=await fetch(route("company-lookup.validate-vat"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":l,"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({vat_number:u})});if(L.ok){const j=await L.json();if(x.value=j.valid?"valid":"invalid",N.value=j.name,j.valid&&j.company){const R=j.company;R.name&&!i.form.name&&(i.form.name=R.name),R.address&&!i.form.address&&(i.form.address=R.address),R.postal_code&&!i.form.postal_code&&(i.form.postal_code=R.postal_code),R.city&&!i.form.city&&(i.form.city=R.city)}}else x.value="error"}catch{x.value="error"}},v=()=>{B("submit")};return(u,a)=>(r(),d("form",{onSubmit:te(v,["prevent"]),class:"space-y-8"},[t("div",xe,[t("div",ke,[t("h2",he,c(n(s)("client_type")),1)]),t("div",_e,[t("div",we,[(r(!0),d(E,null,T(e.clientTypes,l=>(r(),d("label",{key:l.value,class:A(["flex items-start p-4 rounded-xl border cursor-pointer transition-colors",[e.form.type===l.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-slate-200 dark:border-slate-600 hover:border-slate-300 dark:hover:border-slate-500"]])},[C(t("input",{type:"radio","onUpdate:modelValue":a[0]||(a[0]=L=>e.form.type=L),value:l.value,class:"mt-0.5 h-4 w-4 border-slate-300 text-primary-500 focus:ring-primary-500"},null,8,Ve),[[Q,e.form.type]]),t("div",Be,[t("span",Ce,c(l.label),1),t("span",Ue,c(l.description),1)])],2))),128))]),o(b,{message:e.form.errors.type,class:"mt-2"},null,8,["message"])])]),t("div",Re,[t("div",Se,[t("h2",$e,c(n(s)("client_info")),1)]),t("div",Le,[t("div",Ee,[t("div",null,[o(p,{for:"name",value:f.value?n(s)("company_name"):n(s)("full_name")},null,8,["value"]),f.value?(r(),W(ye,{key:0,id:"name",modelValue:e.form.name,"onUpdate:modelValue":a[1]||(a[1]=l=>e.form.name=l),"country-code":e.form.country_code,"is-b2b":f.value,class:"mt-1",placeholder:"Société Exemple SARL",onCompanySelected:m},null,8,["modelValue","country-code","is-b2b"])):(r(),W(V,{key:1,id:"name",modelValue:e.form.name,"onUpdate:modelValue":a[2]||(a[2]=l=>e.form.name=l),type:"text",class:"mt-1 block w-full",required:"",placeholder:"Marie Durand"},null,8,["modelValue"])),o(b,{message:e.form.errors.name,class:"mt-2"},null,8,["message"])]),f.value?(r(),d("div",Te,[o(p,{for:"contact_name",value:`${n(s)("director_contact")} (${n(s)("optional")})`},null,8,["value"]),o(V,{id:"contact_name",modelValue:e.form.contact_name,"onUpdate:modelValue":a[3]||(a[3]=l=>e.form.contact_name=l),type:"text",class:"mt-1 block w-full",placeholder:"Pierre Exemple"},null,8,["modelValue"]),o(b,{message:e.form.errors.contact_name,class:"mt-2"},null,8,["message"])])):g("",!0),t("div",null,[o(p,{for:"email",value:n(s)("email")},null,8,["value"]),o(V,{id:"email",modelValue:e.form.email,"onUpdate:modelValue":a[4]||(a[4]=l=>e.form.email=l),type:"email",class:"mt-1 block w-full",required:"",placeholder:"contact@example.com"},null,8,["modelValue"]),o(b,{message:e.form.errors.email,class:"mt-2"},null,8,["message"])])]),t("div",null,[o(p,{for:"address",value:n(s)("address")},null,8,["value"]),C(t("textarea",{id:"address","onUpdate:modelValue":a[5]||(a[5]=l=>e.form.address=l),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",rows:"2",placeholder:"10 Rue Fictive"},null,512),[[K,e.form.address]]),o(b,{message:e.form.errors.address,class:"mt-2"},null,8,["message"])]),t("div",Ae,[t("div",null,[o(p,{for:"postal_code",value:n(s)("postal_code")},null,8,["value"]),o(V,{id:"postal_code",modelValue:e.form.postal_code,"onUpdate:modelValue":a[6]||(a[6]=l=>e.form.postal_code=l),type:"text",class:"mt-1 block w-full",placeholder:"L-2000"},null,8,["modelValue"]),o(b,{message:e.form.errors.postal_code,class:"mt-2"},null,8,["message"])]),t("div",null,[o(p,{for:"city",value:n(s)("city")},null,8,["value"]),o(V,{id:"city",modelValue:e.form.city,"onUpdate:modelValue":a[7]||(a[7]=l=>e.form.city=l),type:"text",class:"mt-1 block w-full",placeholder:"Luxembourg"},null,8,["modelValue"]),o(b,{message:e.form.errors.city,class:"mt-2"},null,8,["message"])]),t("div",null,[o(p,{for:"country_code",value:n(s)("country")},null,8,["value"]),C(t("select",{id:"country_code","onUpdate:modelValue":a[8]||(a[8]=l=>e.form.country_code=l),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:""},[(r(!0),d(E,null,T(e.countries,l=>(r(),d("option",{key:l.code,value:l.code},c(l.name),9,qe))),128))],512),[[P,e.form.country_code]]),o(b,{message:e.form.errors.country_code,class:"mt-2"},null,8,["message"])])]),t("div",Me,[t("div",null,[o(p,{for:"phone",value:`${n(s)("phone")} (${n(s)("optional")})`},null,8,["value"]),o(V,{id:"phone",modelValue:e.form.phone,"onUpdate:modelValue":a[9]||(a[9]=l=>e.form.phone=l),type:"tel",class:"mt-1 block w-full",placeholder:"+352 000 000 000"},null,8,["modelValue"]),o(b,{message:e.form.errors.phone,class:"mt-2"},null,8,["message"])]),t("div",null,[o(p,{for:"vat_number"},{default:H(()=>[D(c(n(s)("vat_number"))+" ",1),f.value&&q.value?(r(),d("span",Ne,"("+c(n(s)("vat_required_for_reverse_charge"))+")",1)):f.value?(r(),d("span",Fe,"("+c(n(s)("vat_recommended_b2b"))+")",1)):(r(),d("span",Ie,"("+c(n(s)("optional"))+")",1))]),_:1}),o(V,{id:"vat_number",modelValue:e.form.vat_number,"onUpdate:modelValue":a[10]||(a[10]=l=>e.form.vat_number=l),type:"text",class:A(["mt-1 block w-full font-mono uppercase",{"bg-slate-100 dark:bg-slate-600":!f.value}]),placeholder:"LU00000000",onBlur:k},null,8,["modelValue","class"]),o(b,{message:e.form.errors.vat_number,class:"mt-2"},null,8,["message"]),x.value?(r(),d("div",je,[x.value==="loading"?(r(),d("svg",Pe,[...a[19]||(a[19]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):g("",!0),x.value==="loading"?(r(),d("span",De,c(n(s)("vat_validating")),1)):x.value==="valid"?(r(),d("span",ze,[D(" ✓ "+c(n(s)("vat_valid"))+" ",1),N.value?(r(),d("span",Oe,"— "+c(N.value),1)):g("",!0)])):x.value==="invalid"?(r(),d("span",He," ✗ "+c(n(s)("vat_invalid")),1)):x.value==="error"?(r(),d("span",Xe,c(n(s)("vat_validation_unavailable")),1)):g("",!0)])):g("",!0)])]),t("div",{class:A(["rounded-xl border p-4",[M.value.rate===0?"border-sky-200 bg-sky-50 dark:border-sky-800 dark:bg-sky-900/20":"border-slate-200 bg-slate-50 dark:border-slate-700 dark:bg-slate-800"]])},[t("div",Ke,[t("div",null,[t("h4",We,c(n(s)("vat_scenario_detected")),1),o(le,{scenario:M.value,size:"sm",class:"mt-2"},null,8,["scenario"])]),t("div",Ge,[t("span",{class:A(["text-2xl font-bold",[M.value.rate===0?"text-sky-600 dark:text-sky-400":"text-slate-900 dark:text-white"]])},c(M.value.rate)+"% ",3),t("p",Je,c(n(s)("vat_rate")),1)])]),O.value?(r(),d("p",Ze,[a[20]||(a[20]=t("svg",{class:"inline h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),D(" "+c(n(s)("vat_warning_no_number")),1)])):g("",!0)],2),f.value?(r(),d("div",Ye,[t("div",null,[o(p,{for:"registration_number",value:`${n(s)("registration_number")} (${n(s)("optional")})`},null,8,["value"]),o(V,{id:"registration_number",modelValue:e.form.registration_number,"onUpdate:modelValue":a[11]||(a[11]=l=>e.form.registration_number=l),type:"text",class:"mt-1 block w-full font-mono",placeholder:"B000000"},null,8,["modelValue"]),o(b,{message:e.form.errors.registration_number,class:"mt-2"},null,8,["message"])])])):g("",!0),f.value&&e.peppolSchemes.length>0?(r(),d("div",Qe,[a[22]||(a[22]=t("h3",{class:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3"}," Identifiant Peppol (optionnel) ",-1)),a[23]||(a[23]=t("p",{class:"text-xs text-slate-500 dark:text-slate-400 mb-3"}," Nécessaire pour l'envoi de factures électroniques via le réseau Peppol. ",-1)),t("div",et,[t("div",null,[o(p,{for:"peppol_endpoint_scheme",value:"Schéma"}),C(t("select",{id:"peppol_endpoint_scheme","onUpdate:modelValue":a[12]||(a[12]=l=>e.form.peppol_endpoint_scheme=l),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white text-sm"},[a[21]||(a[21]=t("option",{value:""},"Aucun",-1)),(r(!0),d(E,null,T(e.peppolSchemes,l=>(r(),d("option",{key:l.value,value:l.value},c(l.label),9,tt))),128))],512),[[P,e.form.peppol_endpoint_scheme]]),o(b,{message:e.form.errors.peppol_endpoint_scheme,class:"mt-2"},null,8,["message"])]),t("div",null,[o(p,{for:"peppol_endpoint_id",value:"Identifiant"}),o(V,{id:"peppol_endpoint_id",modelValue:e.form.peppol_endpoint_id,"onUpdate:modelValue":a[13]||(a[13]=l=>e.form.peppol_endpoint_id=l),type:"text",class:"mt-1 block w-full font-mono",placeholder:"12345678",disabled:!e.form.peppol_endpoint_scheme},null,8,["modelValue","disabled"]),o(b,{message:e.form.errors.peppol_endpoint_id,class:"mt-2"},null,8,["message"])])])])):g("",!0)])]),t("div",at,[t("div",lt,[t("h2",st,c(n(s)("billing_settings")),1)]),t("div",ot,[t("div",rt,[t("div",null,[o(p,{for:"currency",value:n(s)("default_currency")},null,8,["value"]),C(t("select",{id:"currency","onUpdate:modelValue":a[14]||(a[14]=l=>e.form.currency=l),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",required:""},[(r(!0),d(E,null,T(e.currencies,l=>(r(),d("option",{key:l.value,value:l.value},c(l.label),9,nt))),128))],512),[[P,e.form.currency]]),o(b,{message:e.form.errors.currency,class:"mt-2"},null,8,["message"])]),t("div",null,[o(p,{for:"locale",value:n(s)("document_language")},null,8,["value"]),C(t("select",{id:"locale","onUpdate:modelValue":a[15]||(a[15]=l=>e.form.locale=l),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},[(r(!0),d(E,null,T(n(U).props.availableLocales,(l,L)=>(r(),d("option",{key:L,value:L},c(l),9,dt))),128))],512),[[P,e.form.locale]]),t("p",it,c(n(s)("document_language_help")),1),o(b,{message:e.form.errors.locale,class:"mt-2"},null,8,["message"])])]),!e.isVatExempt&&e.vatRates.length>0?(r(),d("div",ut,[t("div",null,[o(p,{for:"default_vat_rate"},{default:H(()=>[D(c(n(s)("default_vat_rate")||"Taux de TVA par défaut")+" ",1),t("span",ct,"("+c(n(s)("optional"))+")",1)]),_:1}),C(t("select",{id:"default_vat_rate","onUpdate:modelValue":a[16]||(a[16]=l=>h.value=l),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},[a[24]||(a[24]=t("option",{value:""},"Automatique (selon scénario TVA)",-1)),(r(!0),d(E,null,T(e.vatRates,l=>(r(),d("option",{key:l.value,value:l.value},c(l.label),9,mt))),128))],512),[[P,h.value]]),a[25]||(a[25]=t("p",{class:"mt-1 text-sm text-slate-500 dark:text-slate-400"}," Ce taux sera utilisé par défaut pour les factures de ce client. ",-1)),o(b,{message:e.form.errors.default_vat_rate,class:"mt-2"},null,8,["message"])]),h.value==="custom"?(r(),d("div",ft,[o(p,{for:"custom_vat_rate",value:"Taux personnalisé (%)"}),o(V,{id:"custom_vat_rate",modelValue:y.value,"onUpdate:modelValue":a[17]||(a[17]=l=>y.value=l),modelModifiers:{number:!0},type:"number",step:"0.01",min:"0",max:"100",class:"mt-1 block w-full",placeholder:"Ex: 12.5"},null,8,["modelValue"])])):g("",!0)])):g("",!0),t("div",null,[o(p,{for:"notes",value:`${n(s)("internal_notes")} (${n(s)("optional")})`},null,8,["value"]),C(t("textarea",{id:"notes","onUpdate:modelValue":a[18]||(a[18]=l=>e.form.notes=l),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",rows:"3",placeholder:n(s)("internal_notes")},null,8,vt),[[K,e.form.notes]]),t("p",bt,c(n(s)("notes_not_visible")),1),o(b,{message:e.form.errors.notes,class:"mt-2"},null,8,["message"])])])]),t("div",pt,[o(n(ee),{href:e.cancelRouteParams?u.route(e.cancelRoute,e.cancelRouteParams):u.route(e.cancelRoute),class:"inline-flex items-center rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},{default:H(()=>[D(c(n(s)("cancel")),1)]),_:1},8,["href"]),o(ae,{disabled:e.form.processing,class:A({"opacity-25":e.form.processing})},{default:H(()=>[e.form.processing?(r(),d("span",gt,c(n(s)("saving")),1)):(r(),d("span",yt,c(e.submitLabel||n(s)("save")),1))]),_:1},8,["disabled","class"])])],32))}};export{Ct as _};
