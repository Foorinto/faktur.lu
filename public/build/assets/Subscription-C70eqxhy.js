import{_ as N}from"./AppLayout-C7YdKF98.js";import{_ as G}from"./SecondaryButton-DlYn5AG3.js";import{u as C,c as a,a as m,b as n,h as O,i as c,d as e,l as p,e as i,x as A,o as s,t as o,F as g,g as b,A as P,j as R,m as I,O as U,B as j,r as E}from"./app-3FUkuP4b.js";import"./DropdownLink-iIGhN6Bc.js";import"./useTranslations-CzvQwZ7O.js";const H={class:"mb-6 border-b border-slate-200 dark:border-slate-700"},J={class:"flex space-x-8","aria-label":"Settings tabs"},K={class:"space-y-6"},Q={class:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},W={class:"p-6"},X={class:"flex items-center justify-between"},Y={class:"flex items-center space-x-4"},Z={key:0,class:"h-7 w-7 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ee={key:1,class:"h-7 w-7 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},te={class:"text-xl font-bold text-slate-900 dark:text-white"},se={class:"text-slate-500 dark:text-slate-400"},le={key:0,class:"flex items-center space-x-3"},re=["href"],ae={key:1,class:"text-right"},oe={class:"text-sm text-pink-600 dark:text-pink-400"},ie=["disabled"],ne={key:0,class:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl"},de={class:"text-sm text-amber-800 dark:text-amber-200"},ue={key:0,class:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},me={class:"p-6 space-y-6"},ce={class:"flex justify-between text-sm mb-2"},xe={class:"font-medium text-slate-900 dark:text-white"},be={class:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden"},he={class:"flex justify-between text-sm mb-2"},pe={class:"font-medium text-slate-900 dark:text-white"},ve={class:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden"},fe={class:"flex justify-between text-sm mb-2"},ge={class:"font-medium text-slate-900 dark:text-white"},ye={class:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden"},ke={key:1,class:"bg-gradient-to-br from-primary-500 to-primary-700 rounded-2xl shadow-lg overflow-hidden"},we={class:"p-8"},_e={class:"flex items-center justify-between"},Ce={class:"text-center text-white"},Ae={class:"mb-4"},Pe={class:"flex items-center justify-center space-x-3 mb-4"},je={class:"text-4xl font-bold"},Fe=["disabled"],ze={key:0},Me={key:1},Be={key:2,class:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},De={class:"divide-y divide-slate-200 dark:divide-slate-700"},Se={class:"font-medium text-slate-900 dark:text-white"},qe={class:"text-sm text-slate-500"},Le=["href"],Ee={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Ve={class:"flex min-h-full items-center justify-center p-4"},$e={class:"relative bg-white dark:bg-slate-800 rounded-2xl shadow-xl max-w-md w-full p-6"},Te={class:"mt-6 flex justify-end space-x-3"},Ne=["disabled"],Ge={key:0},Oe={key:1},Ke={__name:"Subscription",props:{plans:Array,currentPlan:String,subscription:Object,usage:Object,invoices:Array,onTrial:Boolean,trialEndsAt:String},setup(l){const v=l,x=E("monthly"),h=E(!1),y=j(()=>v.plans.find(r=>r.name==="pro")),u=j(()=>v.currentPlan==="pro"),F=j(()=>{var r;return((r=v.subscription)==null?void 0:r.ends_at)&&new Date(v.subscription.ends_at)>new Date}),f=C({plan:"pro",billing_period:"monthly"}),k=C({}),z=C({}),V=()=>{f.billing_period=x.value,f.post(route("subscription.checkout"))},$=()=>{k.post(route("subscription.cancel"),{onSuccess:()=>{h.value=!1}})},T=()=>{z.post(route("subscription.resume"))},w=r=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:2}).format(r),M=r=>r?new Date(r).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"",_=(r,t)=>t?Math.min(100,Math.round(r/t*100)):0;return(r,t)=>(s(),a(g,null,[m(n(O),{title:"Abonnement"}),m(N,null,{header:c(()=>[...t[5]||(t[5]=[e("h1",{class:"text-xl font-semibold text-slate-900 dark:text-white"}," Abonnement ",-1)])]),default:c(()=>{var B,D,S,q,L;return[e("div",H,[e("nav",J,[m(n(p),{href:r.route("settings.business.edit"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:c(()=>[...t[6]||(t[6]=[i(" Entreprise ",-1)])]),_:1},8,["href"]),m(n(p),{href:r.route("settings.email"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:c(()=>[...t[7]||(t[7]=[i(" Email ",-1)])]),_:1},8,["href"]),m(n(p),{href:r.route("settings.email.provider"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:c(()=>[...t[8]||(t[8]=[i(" Fournisseur Email ",-1)])]),_:1},8,["href"]),m(n(p),{href:r.route("settings.accountant"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:c(()=>[...t[9]||(t[9]=[i(" Accès Comptable ",-1)])]),_:1},8,["href"]),m(n(p),{href:r.route("subscription.index"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-primary-500 text-primary-600 dark:text-primary-400"},{default:c(()=>[...t[10]||(t[10]=[i(" Abonnement ",-1)])]),_:1},8,["href"])])]),e("div",K,[e("div",Q,[t[14]||(t[14]=e("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},[e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-white"}," Votre plan actuel ")],-1)),e("div",W,[e("div",X,[e("div",Y,[e("div",{class:A(["h-14 w-14 rounded-2xl flex items-center justify-center",u.value?"bg-primary-100 dark:bg-primary-900/30":"bg-slate-100 dark:bg-slate-700"])},[u.value?(s(),a("svg",Z,[...t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"},null,-1)])])):(s(),a("svg",ee,[...t[12]||(t[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))],2),e("div",null,[e("h3",te," Plan "+o(u.value?"Pro":"Starter"),1),e("p",se,[u.value?(s(),a(g,{key:0},[i(o(w(((B=y.value)==null?void 0:B.price_monthly)||19))+"/mois ",1)],64)):(s(),a(g,{key:1},[i(" Gratuit ")],64))])])]),u.value&&!F.value?(s(),a("div",le,[e("a",{href:r.route("subscription.portal"),class:"inline-flex items-center px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-xl text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}," Gérer le paiement ",8,re),e("button",{onClick:t[0]||(t[0]=d=>h.value=!0),class:"text-sm text-pink-600 hover:text-pink-800 dark:text-pink-400"}," Annuler ")])):F.value?(s(),a("div",ae,[e("p",oe," Annulé - Accès jusqu'au "+o(M((D=l.subscription)==null?void 0:D.ends_at)),1),e("button",{onClick:T,disabled:n(z).processing,class:"mt-2 text-sm text-primary-600 hover:text-primary-800 font-medium"}," Réactiver l'abonnement ",8,ie)])):b("",!0)]),l.onTrial?(s(),a("div",ne,[e("p",de,[t[13]||(t[13]=e("svg",{class:"inline h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),i(" Période d'essai - se termine le "+o(M(l.trialEndsAt)),1)])])):b("",!0)])]),u.value?b("",!0):(s(),a("div",ue,[t[18]||(t[18]=e("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},[e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-white"}," Utilisation ce mois ")],-1)),e("div",me,[e("div",null,[e("div",ce,[t[15]||(t[15]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Clients",-1)),e("span",xe,o(l.usage.clients.used)+" / "+o(l.usage.clients.limit),1)]),e("div",be,[e("div",{class:"h-full bg-primary-500 rounded-full transition-all",style:P({width:_(l.usage.clients.used,l.usage.clients.limit)+"%"})},null,4)])]),e("div",null,[e("div",he,[t[16]||(t[16]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Factures",-1)),e("span",pe,o(l.usage.invoices_this_month.used)+" / "+o(l.usage.invoices_this_month.limit),1)]),e("div",ve,[e("div",{class:"h-full bg-primary-500 rounded-full transition-all",style:P({width:_(l.usage.invoices_this_month.used,l.usage.invoices_this_month.limit)+"%"})},null,4)])]),e("div",null,[e("div",fe,[t[17]||(t[17]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Devis",-1)),e("span",ge,o(l.usage.quotes_this_month.used)+" / "+o(l.usage.quotes_this_month.limit),1)]),e("div",ye,[e("div",{class:"h-full bg-primary-500 rounded-full transition-all",style:P({width:_(l.usage.quotes_this_month.used,l.usage.quotes_this_month.limit)+"%"})},null,4)])])])])),u.value?b("",!0):(s(),a("div",ke,[e("div",we,[e("div",_e,[t[20]||(t[20]=e("div",{class:"text-white"},[e("h3",{class:"text-2xl font-bold"},"Passez au plan Pro"),e("p",{class:"mt-2 text-primary-100"}," Débloquez l'export FAIA, les relances automatiques et bien plus. "),e("ul",{class:"mt-4 space-y-2"},[e("li",{class:"flex items-center text-sm"},[e("svg",{class:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})]),i(" Clients et factures illimités ")]),e("li",{class:"flex items-center text-sm"},[e("svg",{class:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})]),i(" Export FAIA pour contrôle fiscal ")]),e("li",{class:"flex items-center text-sm"},[e("svg",{class:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})]),i(" Archivage PDF longue durée ")])])],-1)),e("div",Ce,[e("div",Ae,[e("div",Pe,[e("button",{onClick:t[1]||(t[1]=d=>x.value="monthly"),class:A(["px-3 py-1 rounded-lg text-sm font-medium transition-colors",x.value==="monthly"?"bg-white text-primary-600":"text-white/80 hover:text-white"])}," Mensuel ",2),e("button",{onClick:t[2]||(t[2]=d=>x.value="yearly"),class:A(["px-3 py-1 rounded-lg text-sm font-medium transition-colors",x.value==="yearly"?"bg-white text-primary-600":"text-white/80 hover:text-white"])}," Annuel (-17%) ",2)]),e("p",je,o(x.value==="yearly"?w(((S=y.value)==null?void 0:S.monthly_price_when_yearly)||15.83):w(((q=y.value)==null?void 0:q.price_monthly)||19)),1),t[19]||(t[19]=e("p",{class:"text-sm text-primary-100"},"/mois HT",-1))]),e("button",{onClick:V,disabled:n(f).processing,class:"inline-flex items-center px-6 py-3 bg-white text-primary-600 font-semibold rounded-xl hover:bg-primary-50 transition-colors disabled:opacity-50"},[n(f).processing?(s(),a("span",ze,"Chargement...")):(s(),a("span",Me,"Passer à Pro"))],8,Fe)])])])])),u.value&&((L=l.invoices)!=null&&L.length)?(s(),a("div",Be,[t[21]||(t[21]=e("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},[e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-white"}," Historique des factures ")],-1)),e("div",De,[(s(!0),a(g,null,R(l.invoices,d=>(s(),a("div",{key:d.id,class:"px-6 py-4 flex items-center justify-between"},[e("div",null,[e("p",Se,o(d.date),1),e("p",qe,o(d.total),1)]),e("a",{href:d.url,target:"_blank",class:"text-primary-600 hover:text-primary-800 text-sm font-medium"}," Télécharger PDF ",8,Le)]))),128))])])):b("",!0)]),(s(),I(U,{to:"body"},[h.value?(s(),a("div",Ee,[e("div",Ve,[e("div",{class:"fixed inset-0 bg-slate-900/50",onClick:t[3]||(t[3]=d=>h.value=!1)}),e("div",$e,[t[23]||(t[23]=e("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white"}," Annuler votre abonnement ? ",-1)),t[24]||(t[24]=e("p",{class:"mt-2 text-slate-600 dark:text-slate-400"}," Vous conserverez l'accès Pro jusqu'à la fin de votre période de facturation. Après cela, vous passerez automatiquement au plan Starter gratuit. ",-1)),e("div",Te,[m(G,{onClick:t[4]||(t[4]=d=>h.value=!1)},{default:c(()=>[...t[22]||(t[22]=[i(" Garder Pro ",-1)])]),_:1}),e("button",{onClick:$,disabled:n(k).processing,class:"inline-flex items-center px-4 py-2 bg-pink-600 hover:bg-pink-700 text-white font-medium rounded-xl transition-colors disabled:opacity-50"},[n(k).processing?(s(),a("span",Ge,"Annulation...")):(s(),a("span",Oe,"Confirmer l'annulation"))],8,Ne)])])])])):b("",!0)]))]}),_:1})],64))}};export{Ke as default};
