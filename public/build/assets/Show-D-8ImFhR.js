import{c as a,g as p,o,r as w,y as E,u as K,a as z,b as n,h as fe,i as T,d as t,m as ke,x,t as i,l as le,C as oe,F as f,j as _,e as U,w as be,f as k,v as C,k as H,L as ae,B as q,p as L}from"./app-DleR-Qun.js";import{_ as ye}from"./AppLayout-t84WyH_1.js";import{u as _e}from"./useTranslations-B4v3y7Ry.js";import{d as ie}from"./vuedraggable.umd-B7sbKYWs.js";import"./DropdownLink-CkTqw5AL.js";const we=["innerHTML"],Ce={__name:"RichTextDisplay",props:{content:{type:String,default:""}},setup(u){return(m,v)=>u.content?(o(),a("div",{key:0,class:"rich-text-display prose prose-sm dark:prose-invert max-w-none",innerHTML:u.content},null,8,we)):p("",!0)}},je={class:"flex items-center gap-4"},Se={class:"flex items-center gap-3"},Me={class:"text-xl font-semibold text-slate-900 dark:text-white"},ze={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},Te={class:"lg:col-span-2 space-y-6"},Ve={class:"rounded-2xl bg-white p-6 border border-slate-200 dark:bg-slate-800 dark:border-slate-700"},$e={class:"flex items-start justify-between"},Be={class:"flex flex-wrap items-center gap-4 text-sm"},Le={key:0,class:"text-slate-500 dark:text-slate-400"},De={class:"mt-6"},Ae={class:"flex items-center justify-between text-sm mb-2"},Ee={class:"text-slate-600 dark:text-slate-400"},Ue={class:"font-medium text-slate-900 dark:text-white"},He={class:"h-2 w-full overflow-hidden rounded-full bg-slate-200 dark:bg-slate-600"},Pe={class:"rounded-2xl bg-white p-6 border border-slate-200 dark:bg-slate-800 dark:border-slate-700"},Oe={class:"flex items-center justify-between mb-4"},Fe={class:"text-lg font-medium text-slate-900 dark:text-white"},Ke={class:"flex items-center gap-3"},qe={key:0,class:"flex items-center gap-2"},Ne=["value"],Re=["value"],Ge={class:"inline-flex rounded-lg bg-slate-100 p-0.5 dark:bg-slate-700"},Je={key:0,class:"mb-4 rounded-xl bg-slate-50 p-4 dark:bg-slate-700/50"},Qe=["placeholder"],We={class:"flex items-center gap-3"},Xe=["value"],Ye=["disabled"],Ze={key:1,class:"space-y-1"},Ie={key:0,class:"py-8 text-center text-slate-500 dark:text-slate-400"},et={class:"task-item"},tt={key:0,class:"drag-handle shrink-0 cursor-move rounded p-0.5 text-slate-300 hover:text-slate-500 dark:text-slate-600 dark:hover:text-slate-400"},rt=["onClick"],st={key:2,class:"w-5 shrink-0"},lt=["onClick"],ot={key:0,class:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor"},at={class:"flex-1 min-w-0"},it={key:0,class:"flex items-center gap-2"},dt={key:1,class:"inline-flex items-center gap-1 rounded-full bg-slate-100 px-2 py-0.5 text-xs text-slate-600 dark:bg-slate-700 dark:text-slate-400"},nt={key:1,class:"flex items-center gap-2"},ut=["value"],ct=["onClick"],pt={key:3,class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},xt=["onClick"],gt=["onClick"],vt=["onClick"],ht={key:0,class:"ml-7 space-y-1 border-l-2 border-slate-200 pl-4 dark:border-slate-600"},mt=["onClick"],ft={key:0,class:"h-2.5 w-2.5",viewBox:"0 0 20 20",fill:"currentColor"},kt={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},bt=["onClick"],yt=["onClick"],_t=["value"],wt=["onClick"],Ct={key:0,class:"flex items-center gap-2 rounded-lg bg-slate-100 p-2 dark:bg-slate-700/50"},jt=["onKeyup"],St=["value"],Mt=["onClick","disabled"],zt={key:2},Tt={class:"mb-4 flex items-center gap-2"},Vt=["value"],$t=["value"],Bt={class:"flex gap-4 overflow-x-auto pb-4"},Lt={class:"mb-2 flex items-center justify-between"},Dt={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},At={class:"text-xs text-slate-400"},Et={class:"flex items-start gap-2"},Ut=["onClick"],Ht={key:0,class:"h-2.5 w-2.5",viewBox:"0 0 20 20",fill:"currentColor"},Pt={class:"mt-2 flex flex-wrap items-center gap-2"},Ot={key:1,class:"inline-flex items-center gap-1 rounded-full bg-slate-100 px-1.5 py-0.5 text-xs text-slate-600 dark:bg-slate-700 dark:text-slate-400"},Ft={class:"space-y-6"},Kt={class:"rounded-2xl bg-white p-6 border border-slate-200 dark:bg-slate-800 dark:border-slate-700"},qt={class:"space-y-4"},Nt={class:"text-sm text-slate-500 dark:text-slate-400"},Rt={class:"text-xl font-semibold text-slate-900 dark:text-white"},Gt={key:0,class:"text-sm font-normal text-slate-400"},Jt={class:"text-sm text-slate-500 dark:text-slate-400"},Qt={class:"text-xl font-semibold text-slate-900 dark:text-white"},Wt={key:0},Xt={class:"text-slate-900 dark:text-white"},Yt={key:0,class:"rounded-2xl bg-white p-6 border border-slate-200 dark:bg-slate-800 dark:border-slate-700"},Zt={class:"space-y-3"},It={class:"text-slate-900 dark:text-white"},er={class:"text-xs text-slate-400"},tr={class:"text-slate-600 dark:text-slate-400"},ir={__name:"Show",props:{project:{type:Object,required:!0},taskView:{type:String,default:"list"},taskSort:{type:String,default:"manual"},statuses:{type:Object,required:!0},taskStatuses:{type:Object,required:!0},taskPriorities:{type:Object,required:!0}},setup(u){const{t:m}=_e(),v=u,j=w(v.taskView),h=w(v.taskSort),V=w(!1),S=w(null),$=w(null),B=w(new Set);E(()=>v.taskView,l=>{j.value=l});const D=w([...v.project.tasks]);E(()=>v.project.tasks,l=>{D.value=[...l]},{deep:!0});const de=q(()=>{const l=[...D.value];switch(h.value){case"priority":{const e={high:1,normal:2,low:3};return l.sort((r,s)=>{const d=(e[r.priority]||2)-(e[s.priority]||2);return d!==0?d:(r.sort_order||0)-(s.sort_order||0)})}case"due_date":return l.sort((e,r)=>{if(!e.due_date&&!r.due_date)return(e.sort_order||0)-(r.sort_order||0);if(!e.due_date)return 1;if(!r.due_date)return-1;const s=new Date(e.due_date)-new Date(r.due_date);return s!==0?s:(e.sort_order||0)-(r.sort_order||0)});case"title":return l.sort((e,r)=>{const s=(e.title||"").localeCompare(r.title||"","fr");return s!==0?s:(e.sort_order||0)-(r.sort_order||0)});default:return l.sort((e,r)=>(e.sort_order||0)-(r.sort_order||0))}}),ne=l=>{if(!l.children||l.children.length===0)return[];const e=[...l.children];switch(h.value){case"priority":{const r={high:1,normal:2,low:3};return e.sort((s,d)=>{const c=(r[s.priority]||2)-(r[d.priority]||2);return c!==0?c:(s.sort_order||0)-(d.sort_order||0)})}case"due_date":return e.sort((r,s)=>{if(!r.due_date&&!s.due_date)return(r.sort_order||0)-(s.sort_order||0);if(!r.due_date)return 1;if(!s.due_date)return-1;const d=new Date(r.due_date)-new Date(s.due_date);return d!==0?d:(r.sort_order||0)-(s.sort_order||0)});case"title":return e.sort((r,s)=>{const d=(r.title||"").localeCompare(s.title||"","fr");return d!==0?d:(r.sort_order||0)-(s.sort_order||0)});default:return e.sort((r,s)=>(r.sort_order||0)-(s.sort_order||0))}},P=q({get(){return de.value},set(l){D.value=l}}),y=K({title:"",description:"",status:"backlog",priority:"normal",due_date:"",estimated_hours:""}),g=K({title:"",description:"",status:"",priority:"",due_date:"",estimated_hours:""}),b=K({title:"",priority:"normal",due_date:""}),N=l=>l?typeof l=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(l)?l:typeof l=="string"&&l.includes("T")?l.split("T")[0]:typeof l=="string"?l.substring(0,10):"":"",A=l=>{if(!l)return"";const e=N(l);if(!e)return"";const[r,s,d]=e.split("-");return`${d}/${s}/${r}`},R=l=>{L.get(route("projects.show",v.project.id),{task_view:l,sort:h.value},{preserveScroll:!0})},G=l=>{h.value=l},ue=l=>{B.value.has(l)?B.value.delete(l):B.value.add(l)},J=l=>B.value.has(l),ce=l=>{$.value=l,b.reset(),B.value.add(l)},Q=()=>{$.value=null,b.reset()},W=l=>{b.post(route("tasks.subtasks.store",l.id),{preserveScroll:!0,onSuccess:()=>{b.reset(),$.value=null}})},pe=()=>{y.post(route("tasks.store",v.project.id),{preserveScroll:!0,onSuccess:()=>{y.reset(),V.value=!1}})},O=l=>{L.post(route("tasks.toggle",l.id),{},{preserveScroll:!0})},X=l=>{S.value=l.id,g.title=l.title,g.description=l.description||"",g.status=l.status,g.priority=l.priority,g.due_date=N(l.due_date),g.estimated_hours=l.estimated_hours||""},Y=l=>{g.put(route("tasks.update",l.id),{preserveScroll:!0,onSuccess:()=>{S.value=null}})},Z=()=>{S.value=null},I=l=>{const r=l.children&&l.children.length>0?`Êtes-vous sûr de vouloir supprimer cette tâche et ses ${l.children.length} sous-tâche(s) ?`:"Êtes-vous sûr de vouloir supprimer cette tâche ?";confirm(r)&&L.delete(route("tasks.destroy",l.id),{preserveScroll:!0})},xe=l=>{const e={backlog:"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300",next:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",in_progress:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",waiting_for:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",done:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400"};return e[l]||e.backlog},F=l=>{const e={low:"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400",normal:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",high:"bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-400"};return e[l]||e.normal},ee=l=>{if(!l)return"0h";const e=Math.floor(l/3600),r=Math.floor(l%3600/60);return r===0?`${e}h`:`${e}h${r.toString().padStart(2,"0")}`},ge=q(()=>v.project.tasks_count?Math.round(v.project.completed_tasks_count/v.project.tasks_count*100):0),M=w({}),ve=l=>{const e=[...l];switch(h.value){case"priority":{const r={high:1,normal:2,low:3};return e.sort((s,d)=>{const c=(r[s.priority]||2)-(r[d.priority]||2);return c!==0?c:(s.sort_order||0)-(d.sort_order||0)})}case"due_date":return e.sort((r,s)=>{if(!r.due_date&&!s.due_date)return(r.sort_order||0)-(s.sort_order||0);if(!r.due_date)return 1;if(!s.due_date)return-1;const d=new Date(r.due_date)-new Date(s.due_date);return d!==0?d:(r.sort_order||0)-(s.sort_order||0)});case"title":return e.sort((r,s)=>{const d=(r.title||"").localeCompare(s.title||"","fr");return d!==0?d:(r.sort_order||0)-(s.sort_order||0)});default:return e.sort((r,s)=>(r.sort_order||0)-(s.sort_order||0))}},te=()=>{const l={};Object.keys(v.taskStatuses).forEach(e=>{const r=v.project.tasks.filter(s=>s.status===e);l[e]=ve(r)}),M.value=l};E(()=>v.project.tasks,te,{immediate:!0,deep:!0}),E(()=>h.value,te);const re=[{value:"manual",label:"Manuel"},{value:"priority",label:"Priorité"},{value:"due_date",label:"Échéance"},{value:"title",label:"Nom"}],he=()=>{const l=[];let e=0;D.value.forEach(r=>{l.push({id:r.id,sort_order:e++,parent_id:null}),r.children&&r.children.forEach(s=>{l.push({id:s.id,sort_order:e++,parent_id:r.id})})}),L.post(route("tasks.reorder-list",v.project.id),{tasks:l},{preserveScroll:!0})},me=()=>{const l=[];let e=0;Object.keys(M.value).forEach(r=>{M.value[r].forEach(s=>{l.push({id:s.id,sort_order:e++,status:r})})}),L.post(route("tasks.reorder",v.project.id),{tasks:l},{preserveScroll:!0})};return(l,e)=>(o(),a(f,null,[z(n(fe),{title:u.project.title},null,8,["title"]),z(ye,null,{header:T(()=>[t("div",je,[z(n(le),{href:l.route("projects.index"),class:"rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-700 dark:hover:text-slate-300"},{default:T(()=>[...e[18]||(e[18]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"]),t("div",Se,[u.project.color?(o(),a("div",{key:0,class:"h-4 w-4 rounded-full",style:oe({backgroundColor:u.project.color})},null,4)):p("",!0),t("h1",Me,i(u.project.title),1)])])]),default:T(()=>[t("div",ze,[t("div",Te,[t("div",Ve,[t("div",$e,[t("div",null,[u.project.description?(o(),ke(Ce,{key:0,content:u.project.description,class:"mb-4"},null,8,["content"])):p("",!0),t("div",Be,[t("span",{class:x([xe(u.project.status),"inline-flex items-center rounded-xl px-3 py-1 text-sm font-medium"])},i(u.statuses[u.project.status]),3),u.project.client?(o(),a("span",Le," Client: "+i(u.project.client.name),1)):p("",!0),u.project.due_date?(o(),a("span",{key:1,class:x(u.project.is_overdue?"text-pink-600 dark:text-pink-400":"text-slate-500 dark:text-slate-400")},i(n(m)("due_date"))+": "+i(A(u.project.due_date)),3)):p("",!0)])]),z(n(le),{href:l.route("projects.edit",u.project.id),class:"rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-700 dark:hover:text-slate-300"},{default:T(()=>[...e[19]||(e[19]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"})],-1)])]),_:1},8,["href"])]),t("div",De,[t("div",Ae,[t("span",Ee,i(n(m)("completion")),1),t("span",Ue,i(u.project.completed_tasks_count||0)+"/"+i(u.project.tasks_count||0)+" "+i(n(m)("tasks_completed")),1)]),t("div",He,[t("div",{class:"h-full rounded-full bg-primary-500 transition-all",style:oe({width:`${ge.value}%`})},null,4)])])]),t("div",Pe,[t("div",Oe,[t("h2",Fe,i(n(m)("tasks")),1),t("div",Ke,[j.value==="list"?(o(),a("div",qe,[e[20]||(e[20]=t("span",{class:"text-xs text-slate-500 dark:text-slate-400"},"Tri :",-1)),t("select",{value:h.value,onChange:e[0]||(e[0]=r=>G(r.target.value)),class:"rounded-lg border-0 py-1 pl-2 pr-7 text-xs text-slate-700 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-700 dark:text-slate-300 dark:ring-slate-600"},[(o(),a(f,null,_(re,r=>t("option",{key:r.value,value:r.value},i(r.label),9,Re)),64))],40,Ne)])):p("",!0),t("div",Ge,[t("button",{onClick:e[1]||(e[1]=r=>R("list")),class:x(["rounded-md px-3 py-1 text-sm font-medium transition-colors",j.value==="list"?"bg-white text-slate-900 shadow dark:bg-slate-600 dark:text-white":"text-slate-600 dark:text-slate-400"])}," Liste ",2),t("button",{onClick:e[2]||(e[2]=r=>R("kanban")),class:x(["rounded-md px-3 py-1 text-sm font-medium transition-colors",j.value==="kanban"?"bg-white text-slate-900 shadow dark:bg-slate-600 dark:text-white":"text-slate-600 dark:text-slate-400"])}," Kanban ",2)]),t("button",{onClick:e[3]||(e[3]=r=>V.value=!V.value),class:"inline-flex items-center rounded-lg bg-primary-500 px-3 py-1.5 text-sm font-medium text-white hover:bg-primary-600"},[e[21]||(e[21]=t("svg",{class:"mr-1 h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1)),U(" "+i(n(m)("add_task")),1)])])]),V.value?(o(),a("div",Je,[t("form",{onSubmit:be(pe,["prevent"]),class:"space-y-3"},[k(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>n(y).title=r),type:"text",placeholder:n(m)("task")+"...",class:"block w-full rounded-lg border-0 py-2 px-3 text-slate-900 ring-1 ring-inset ring-slate-200 placeholder:text-slate-400 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-600 sm:text-sm",required:""},null,8,Qe),[[C,n(y).title]]),t("div",We,[k(t("select",{"onUpdate:modelValue":e[5]||(e[5]=r=>n(y).priority=r),class:"rounded-lg border-0 py-1.5 pl-3 pr-8 text-sm text-slate-900 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-600"},[(o(!0),a(f,null,_(u.taskPriorities,(r,s)=>(o(),a("option",{key:s,value:s},i(r),9,Xe))),128))],512),[[H,n(y).priority]]),k(t("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>n(y).due_date=r),type:"date",class:"rounded-lg border-0 py-1.5 px-3 text-sm text-slate-900 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-600"},null,512),[[C,n(y).due_date]]),e[22]||(e[22]=t("div",{class:"flex-1"},null,-1)),t("button",{type:"button",onClick:e[7]||(e[7]=r=>V.value=!1),class:"text-sm text-slate-500 hover:text-slate-700 dark:text-slate-400"},i(n(m)("cancel")),1),t("button",{type:"submit",disabled:n(y).processing,class:"rounded-lg bg-primary-500 px-3 py-1.5 text-sm font-medium text-white hover:bg-primary-600 disabled:opacity-50"},i(n(m)("add")),9,Ye)])],32)])):p("",!0),j.value==="list"?(o(),a("div",Ze,[P.value.length===0?(o(),a("div",Ie,i(n(m)("no_tasks")),1)):p("",!0),z(n(ie),{modelValue:P.value,"onUpdate:modelValue":e[16]||(e[16]=r=>P.value=r),"item-key":"id",handle:".drag-handle",disabled:h.value!=="manual",onEnd:he,class:"space-y-1"},{item:T(({element:r})=>[t("div",et,[t("div",{class:x(["group flex items-center gap-2 rounded-xl p-3 transition-colors",r.is_completed?"bg-slate-50 dark:bg-slate-700/30":"hover:bg-slate-50 dark:hover:bg-slate-700/50"])},[h.value==="manual"?(o(),a("div",tt,[...e[23]||(e[23]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])])):p("",!0),r.children&&r.children.length>0?(o(),a("button",{key:1,onClick:s=>ue(r.id),class:"shrink-0 rounded p-0.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300"},[(o(),a("svg",{class:x(["h-4 w-4 transition-transform",J(r.id)?"rotate-90":""]),viewBox:"0 0 20 20",fill:"currentColor"},[...e[24]||(e[24]=[t("path",{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z","clip-rule":"evenodd"},null,-1)])],2))],8,rt)):h.value!=="manual"?(o(),a("div",st)):p("",!0),t("button",{onClick:s=>O(r),class:x(["flex h-5 w-5 shrink-0 items-center justify-center rounded border-2 transition-colors",r.is_completed?"border-emerald-500 bg-emerald-500 text-white":"border-slate-300 hover:border-primary-500 dark:border-slate-600"])},[r.is_completed?(o(),a("svg",ot,[...e[25]||(e[25]=[t("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"},null,-1)])])):p("",!0)],10,lt),t("div",at,[S.value!==r.id?(o(),a("div",it,[t("span",{class:x(["text-sm",r.is_completed?"text-slate-400 line-through":"text-slate-900 dark:text-white"])},i(r.title),3),t("span",{class:x([F(r.priority),"inline-flex items-center rounded px-1.5 py-0.5 text-xs font-medium"])},i(u.taskPriorities[r.priority]),3),r.due_date?(o(),a("span",{key:0,class:x([r.is_overdue?"text-pink-500":"text-slate-400","text-xs"])},i(A(r.due_date)),3)):p("",!0),r.children&&r.children.length>0?(o(),a("span",dt,[e[26]||(e[26]=t("svg",{class:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10zm0 5.25a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z","clip-rule":"evenodd"})],-1)),U(" "+i(r.children.filter(s=>s.is_completed).length)+"/"+i(r.children.length),1)])):p("",!0)])):(o(),a("div",nt,[k(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>n(g).title=s),type:"text",class:"flex-1 rounded-lg border-0 py-1 px-2 text-sm text-slate-900 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-600"},null,512),[[C,n(g).title]]),k(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>n(g).priority=s),class:"rounded-lg border-0 py-1 pl-2 pr-6 text-xs text-slate-900 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-600"},[(o(!0),a(f,null,_(u.taskPriorities,(s,d)=>(o(),a("option",{key:d,value:d},i(s),9,ut))),128))],512),[[H,n(g).priority]]),k(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>n(g).due_date=s),type:"date",class:"rounded-lg border-0 py-1 px-2 text-xs text-slate-900 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-600"},null,512),[[C,n(g).due_date]]),t("button",{onClick:s=>Y(r),class:"text-emerald-500 hover:text-emerald-600"},[...e[27]||(e[27]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})],-1)])],8,ct),t("button",{onClick:Z,class:"text-slate-400 hover:text-slate-600"},[...e[28]||(e[28]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})],-1)])])]))]),S.value!==r.id?(o(),a("div",pt,[t("button",{onClick:s=>ce(r.id),class:"rounded p-1 text-slate-400 hover:bg-slate-200 hover:text-slate-600 dark:hover:bg-slate-600",title:"Ajouter une sous-tâche"},[...e[29]||(e[29]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1)])],8,xt),t("button",{onClick:s=>X(r),class:"rounded p-1 text-slate-400 hover:bg-slate-200 hover:text-slate-600 dark:hover:bg-slate-600"},[...e[30]||(e[30]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"})],-1)])],8,gt),t("button",{onClick:s=>I(r),class:"rounded p-1 text-slate-400 hover:bg-red-100 hover:text-red-600 dark:hover:bg-red-900/30"},[...e[31]||(e[31]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.519.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z","clip-rule":"evenodd"})],-1)])],8,vt)])):p("",!0)],2),r.children&&r.children.length>0&&J(r.id)||$.value===r.id?(o(),a("div",ht,[(o(!0),a(f,null,_(ne(r),s=>(o(),a("div",{key:s.id,class:x(["group flex items-center gap-2 rounded-lg p-2 transition-colors",s.is_completed?"bg-slate-50 dark:bg-slate-700/30":"hover:bg-slate-50 dark:hover:bg-slate-700/50"])},[t("button",{onClick:d=>O(s),class:x(["flex h-4 w-4 shrink-0 items-center justify-center rounded border-2 transition-colors",s.is_completed?"border-emerald-500 bg-emerald-500 text-white":"border-slate-300 hover:border-primary-500 dark:border-slate-600"])},[s.is_completed?(o(),a("svg",ft,[...e[32]||(e[32]=[t("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"},null,-1)])])):p("",!0)],10,mt),S.value!==s.id?(o(),a(f,{key:0},[t("span",{class:x(["flex-1 text-sm",s.is_completed?"text-slate-400 line-through":"text-slate-700 dark:text-slate-300"])},i(s.title),3),t("span",{class:x([F(s.priority),"inline-flex items-center rounded px-1 py-0.5 text-xs font-medium"])},i(u.taskPriorities[s.priority]),3),s.due_date?(o(),a("span",{key:0,class:x([s.is_overdue?"text-pink-500":"text-slate-400","text-xs"])},i(A(s.due_date)),3)):p("",!0),t("div",kt,[t("button",{onClick:d=>X(s),class:"rounded p-1 text-slate-400 hover:bg-slate-200 hover:text-slate-600 dark:hover:bg-slate-600"},[...e[33]||(e[33]=[t("svg",{class:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"})],-1)])],8,bt),t("button",{onClick:d=>I(s),class:"rounded p-1 text-slate-400 hover:bg-red-100 hover:text-red-600 dark:hover:bg-red-900/30"},[...e[34]||(e[34]=[t("svg",{class:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.519.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z","clip-rule":"evenodd"})],-1)])],8,yt)])],64)):(o(),a(f,{key:1},[k(t("input",{"onUpdate:modelValue":e[11]||(e[11]=d=>n(g).title=d),type:"text",class:"flex-1 rounded-lg border-0 py-1 px-2 text-sm text-slate-900 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-600"},null,512),[[C,n(g).title]]),k(t("select",{"onUpdate:modelValue":e[12]||(e[12]=d=>n(g).priority=d),class:"rounded-lg border-0 py-1 pl-2 pr-6 text-xs text-slate-900 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-600"},[(o(!0),a(f,null,_(u.taskPriorities,(d,c)=>(o(),a("option",{key:c,value:c},i(d),9,_t))),128))],512),[[H,n(g).priority]]),k(t("input",{"onUpdate:modelValue":e[13]||(e[13]=d=>n(g).due_date=d),type:"date",class:"rounded-lg border-0 py-1 px-2 text-xs text-slate-900 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-600"},null,512),[[C,n(g).due_date]]),t("button",{onClick:d=>Y(s),class:"text-emerald-500 hover:text-emerald-600"},[...e[35]||(e[35]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})],-1)])],8,wt),t("button",{onClick:Z,class:"text-slate-400 hover:text-slate-600"},[...e[36]||(e[36]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})],-1)])])],64))],2))),128)),$.value===r.id?(o(),a("div",Ct,[k(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>n(b).title=s),type:"text",placeholder:"Nouvelle sous-tâche...",class:"flex-1 rounded-lg border-0 py-1 px-2 text-sm text-slate-900 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-600",onKeyup:[ae(s=>W(r),["enter"]),ae(Q,["escape"])]},null,40,jt),[[C,n(b).title]]),k(t("select",{"onUpdate:modelValue":e[15]||(e[15]=s=>n(b).priority=s),class:"rounded-lg border-0 py-1 pl-2 pr-6 text-xs text-slate-900 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-800 dark:text-white dark:ring-slate-600"},[(o(!0),a(f,null,_(u.taskPriorities,(s,d)=>(o(),a("option",{key:d,value:d},i(s),9,St))),128))],512),[[H,n(b).priority]]),t("button",{onClick:s=>W(r),disabled:n(b).processing||!n(b).title,class:"rounded-lg bg-primary-500 px-2 py-1 text-xs font-medium text-white hover:bg-primary-600 disabled:opacity-50"},"Ajouter",8,Mt),t("button",{onClick:Q,class:"text-slate-400 hover:text-slate-600"},[...e[37]||(e[37]=[t("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})],-1)])])])):p("",!0)])):p("",!0)])]),_:1},8,["modelValue","disabled"])])):j.value==="kanban"?(o(),a("div",zt,[t("div",Tt,[e[38]||(e[38]=t("span",{class:"text-xs text-slate-500 dark:text-slate-400"},"Tri :",-1)),t("select",{value:h.value,onChange:e[17]||(e[17]=r=>G(r.target.value)),class:"rounded-lg border-0 py-1 pl-2 pr-7 text-xs text-slate-700 ring-1 ring-inset ring-slate-200 focus:ring-2 focus:ring-primary-500 dark:bg-slate-700 dark:text-slate-300 dark:ring-slate-600"},[(o(),a(f,null,_(re,r=>t("option",{key:r.value,value:r.value},i(r.label),9,$t)),64))],40,Vt)]),t("div",Bt,[(o(!0),a(f,null,_(u.taskStatuses,(r,s)=>{var d;return o(),a("div",{key:s,class:"flex-shrink-0 w-64"},[t("div",Lt,[t("h3",Dt,i(r),1),t("span",At,i(((d=M.value[s])==null?void 0:d.length)||0),1)]),z(n(ie),{modelValue:M.value[s],"onUpdate:modelValue":c=>M.value[s]=c,group:"tasks","item-key":"id",disabled:h.value!=="manual",onEnd:me,class:"min-h-[100px] space-y-2 rounded-xl bg-slate-100 p-2 dark:bg-slate-700/50"},{item:T(({element:c})=>[t("div",{class:x(["rounded-lg bg-white p-3 shadow-sm dark:bg-slate-800",h.value==="manual"?"cursor-move":"",c.is_completed?"opacity-60":""])},[t("div",Et,[t("button",{onClick:se=>O(c),class:x(["mt-0.5 flex h-4 w-4 shrink-0 items-center justify-center rounded border transition-colors",c.is_completed?"border-emerald-500 bg-emerald-500 text-white":"border-slate-300 dark:border-slate-600"])},[c.is_completed?(o(),a("svg",Ht,[...e[39]||(e[39]=[t("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"},null,-1)])])):p("",!0)],10,Ut),t("span",{class:x(["text-sm flex-1",c.is_completed?"line-through text-slate-400":"text-slate-900 dark:text-white"])},i(c.title),3)]),t("div",Pt,[t("span",{class:x([F(c.priority),"inline-flex items-center rounded px-1.5 py-0.5 text-xs font-medium"])},i(u.taskPriorities[c.priority]),3),c.due_date?(o(),a("span",{key:0,class:x([c.is_overdue?"text-pink-500":"text-slate-400","text-xs"])},i(A(c.due_date)),3)):p("",!0),c.children&&c.children.length>0?(o(),a("span",Ot,[e[40]||(e[40]=t("svg",{class:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10zm0 5.25a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z","clip-rule":"evenodd"})],-1)),U(" "+i(c.children.filter(se=>se.is_completed).length)+"/"+i(c.children.length),1)])):p("",!0)])],2)]),_:1},8,["modelValue","onUpdate:modelValue","disabled"])])}),128))])])):p("",!0)])]),t("div",Ft,[t("div",Kt,[e[42]||(e[42]=t("h3",{class:"text-lg font-medium text-slate-900 dark:text-white mb-4"},"Statistiques",-1)),t("div",qt,[t("div",null,[t("div",Nt,i(n(m)("time_spent")),1),t("div",Rt,[U(i(ee(u.project.time_entries_sum_duration_seconds))+" ",1),u.project.budget_hours?(o(),a("span",Gt," / "+i(u.project.budget_hours)+"h ",1)):p("",!0)])]),t("div",null,[t("div",Jt,i(n(m)("tasks")),1),t("div",Qt,i(u.project.completed_tasks_count||0)+" / "+i(u.project.tasks_count||0),1)]),u.project.client?(o(),a("div",Wt,[e[41]||(e[41]=t("div",{class:"text-sm text-slate-500 dark:text-slate-400"},"Client",-1)),t("div",Xt,i(u.project.client.name),1)])):p("",!0)])]),u.project.time_entries&&u.project.time_entries.length>0?(o(),a("div",Yt,[e[43]||(e[43]=t("h3",{class:"text-lg font-medium text-slate-900 dark:text-white mb-4"},"Temps récent",-1)),t("div",Zt,[(o(!0),a(f,null,_(u.project.time_entries,r=>{var s;return o(),a("div",{key:r.id,class:"flex items-center justify-between text-sm"},[t("div",null,[t("div",It,i(((s=r.task)==null?void 0:s.title)||r.description||"Sans description"),1),t("div",er,i(new Date(r.started_at).toLocaleDateString("fr-FR")),1)]),t("div",tr,i(ee(r.duration_seconds)),1)])}),128))])])):p("",!0)])])]),_:1})],64))}};export{ir as default};
