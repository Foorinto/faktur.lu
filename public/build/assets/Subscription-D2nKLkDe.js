import{_ as U}from"./AppLayout-YeWmh-Qe.js";import{_ as H}from"./SecondaryButton-Bdco2HM4.js";import{u as A,c as r,a as x,b as l,h as J,i as p,d as e,l as v,e as n,o as s,t as i,g as u,x as P,F as g,A as j,j as K,m as Q,O as W,D as X,B as F,r as G}from"./app-DeMmr3dH.js";import"./DropdownLink-DQy6jH4Z.js";import"./useTranslations-gT2Sr0D3.js";const Y={class:"mb-6 border-b border-slate-200 dark:border-slate-700"},Z={class:"flex space-x-8","aria-label":"Settings tabs"},ee={key:0,class:"mb-6 p-4 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-xl"},te={class:"text-sm text-emerald-700 dark:text-emerald-300"},se={key:1,class:"mb-6 p-4 bg-pink-50 dark:bg-pink-900/20 border border-pink-200 dark:border-pink-800 rounded-xl"},re={class:"text-sm text-pink-700 dark:text-pink-300"},le={key:2,class:"mb-6 p-4 bg-pink-50 dark:bg-pink-900/20 border border-pink-200 dark:border-pink-800 rounded-xl"},ae={class:"text-sm text-pink-700 dark:text-pink-300"},oe={class:"space-y-6"},ie={class:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},ne={class:"p-6"},de={class:"flex items-center justify-between"},ue={class:"flex items-center space-x-4"},ce={key:0,class:"h-7 w-7 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},me={key:1,class:"h-7 w-7 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},xe={class:"text-xl font-bold text-slate-900 dark:text-white"},pe={class:"text-slate-500 dark:text-slate-400"},be={key:0,class:"flex items-center space-x-3"},he=["href"],ve={key:1,class:"text-right"},fe={class:"text-sm text-pink-600 dark:text-pink-400"},ke=["disabled"],ge={key:0,class:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl"},ye={class:"text-sm text-amber-800 dark:text-amber-200"},we={key:0,class:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},_e={class:"p-6 space-y-6"},Ce={class:"flex justify-between text-sm mb-2"},Ae={class:"font-medium text-slate-900 dark:text-white"},Pe={class:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden"},je={class:"flex justify-between text-sm mb-2"},Fe={class:"font-medium text-slate-900 dark:text-white"},ze={class:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden"},Me={class:"flex justify-between text-sm mb-2"},De={class:"font-medium text-slate-900 dark:text-white"},Be={class:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden"},Se={key:1,class:"bg-gradient-to-br from-primary-500 to-primary-700 rounded-2xl shadow-lg overflow-hidden"},qe={class:"p-8"},Le={class:"flex items-center justify-between"},Ee={class:"text-center text-white"},Ve={class:"mb-4"},$e={class:"flex items-center justify-center space-x-3 mb-4"},Te={class:"text-4xl font-bold"},Ne=["disabled"],Ge={key:0},Oe={key:1},Re={key:2,class:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"},Ie={class:"divide-y divide-slate-200 dark:divide-slate-700"},Ue={class:"font-medium text-slate-900 dark:text-white"},He={class:"text-sm text-slate-500"},Je=["href"],Ke={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Qe={class:"flex min-h-full items-center justify-center p-4"},We={class:"relative bg-white dark:bg-slate-800 rounded-2xl shadow-xl max-w-md w-full p-6"},Xe={class:"mt-6 flex justify-end space-x-3"},Ye=["disabled"],Ze={key:0},et={key:1},ot={__name:"Subscription",props:{plans:Array,currentPlan:String,subscription:Object,usage:Object,invoices:Array,onTrial:Boolean,trialEndsAt:String},setup(a){const f=X(),k=a,b=G("monthly"),h=G(!1),y=F(()=>k.plans.find(o=>o.name==="pro")),c=F(()=>k.currentPlan==="pro"),z=F(()=>{var o;return((o=k.subscription)==null?void 0:o.ends_at)&&new Date(k.subscription.ends_at)>new Date}),m=A({plan:"pro",billing_period:"monthly"}),w=A({}),M=A({}),O=()=>{m.billing_period=b.value,m.post(route("subscription.checkout"))},R=()=>{w.post(route("subscription.cancel"),{onSuccess:()=>{h.value=!1}})},I=()=>{M.post(route("subscription.resume"))},_=o=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:2}).format(o),D=o=>o?new Date(o).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"",C=(o,t)=>t?Math.min(100,Math.round(o/t*100)):0;return(o,t)=>(s(),r(g,null,[x(l(J),{title:"Abonnement"}),x(U,null,{header:p(()=>[...t[5]||(t[5]=[e("h1",{class:"text-xl font-semibold text-slate-900 dark:text-white"}," Abonnement ",-1)])]),default:p(()=>{var B,S,q,L,E,V,$,T,N;return[e("div",Y,[e("nav",Z,[x(l(v),{href:o.route("settings.business.edit"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:p(()=>[...t[6]||(t[6]=[n(" Entreprise ",-1)])]),_:1},8,["href"]),x(l(v),{href:o.route("settings.email"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:p(()=>[...t[7]||(t[7]=[n(" Email ",-1)])]),_:1},8,["href"]),x(l(v),{href:o.route("settings.email.provider"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:p(()=>[...t[8]||(t[8]=[n(" Fournisseur Email ",-1)])]),_:1},8,["href"]),x(l(v),{href:o.route("settings.accountant"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:p(()=>[...t[9]||(t[9]=[n(" Accès Comptable ",-1)])]),_:1},8,["href"]),x(l(v),{href:o.route("subscription.index"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-primary-500 text-primary-600 dark:text-primary-400"},{default:p(()=>[...t[10]||(t[10]=[n(" Abonnement ",-1)])]),_:1},8,["href"])])]),(B=l(f).props.flash)!=null&&B.success?(s(),r("div",ee,[e("p",te,i(l(f).props.flash.success),1)])):u("",!0),(S=l(f).props.flash)!=null&&S.error?(s(),r("div",se,[e("p",re,i(l(f).props.flash.error),1)])):u("",!0),(q=l(m).errors)!=null&&q.plan||(L=l(m).errors)!=null&&L.billing_period?(s(),r("div",le,[e("p",ae,i(l(m).errors.plan||l(m).errors.billing_period),1)])):u("",!0),e("div",oe,[e("div",ie,[t[14]||(t[14]=e("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},[e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-white"}," Votre plan actuel ")],-1)),e("div",ne,[e("div",de,[e("div",ue,[e("div",{class:P(["h-14 w-14 rounded-2xl flex items-center justify-center",c.value?"bg-primary-100 dark:bg-primary-900/30":"bg-slate-100 dark:bg-slate-700"])},[c.value?(s(),r("svg",ce,[...t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"},null,-1)])])):(s(),r("svg",me,[...t[12]||(t[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))],2),e("div",null,[e("h3",xe," Plan "+i(c.value?"Pro":"Starter"),1),e("p",pe,[c.value?(s(),r(g,{key:0},[n(i(_(((E=y.value)==null?void 0:E.price_monthly)||7))+"/mois ",1)],64)):(s(),r(g,{key:1},[n(" Gratuit ")],64))])])]),c.value&&!z.value?(s(),r("div",be,[e("a",{href:o.route("subscription.portal"),class:"inline-flex items-center px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-xl text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}," Gérer le paiement ",8,he),e("button",{onClick:t[0]||(t[0]=d=>h.value=!0),class:"text-sm text-pink-600 hover:text-pink-800 dark:text-pink-400"}," Annuler ")])):z.value?(s(),r("div",ve,[e("p",fe," Annulé - Accès jusqu'au "+i(D((V=a.subscription)==null?void 0:V.ends_at)),1),e("button",{onClick:I,disabled:l(M).processing,class:"mt-2 text-sm text-primary-600 hover:text-primary-800 font-medium"}," Réactiver l'abonnement ",8,ke)])):u("",!0)]),a.onTrial?(s(),r("div",ge,[e("p",ye,[t[13]||(t[13]=e("svg",{class:"inline h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),n(" Période d'essai - se termine le "+i(D(a.trialEndsAt)),1)])])):u("",!0)])]),c.value?u("",!0):(s(),r("div",we,[t[18]||(t[18]=e("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},[e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-white"}," Utilisation ce mois ")],-1)),e("div",_e,[e("div",null,[e("div",Ce,[t[15]||(t[15]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Clients",-1)),e("span",Ae,i(a.usage.clients.used)+" / "+i(a.usage.clients.limit),1)]),e("div",Pe,[e("div",{class:"h-full bg-primary-500 rounded-full transition-all",style:j({width:C(a.usage.clients.used,a.usage.clients.limit)+"%"})},null,4)])]),e("div",null,[e("div",je,[t[16]||(t[16]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Factures",-1)),e("span",Fe,i(a.usage.invoices_this_month.used)+" / "+i(a.usage.invoices_this_month.limit),1)]),e("div",ze,[e("div",{class:"h-full bg-primary-500 rounded-full transition-all",style:j({width:C(a.usage.invoices_this_month.used,a.usage.invoices_this_month.limit)+"%"})},null,4)])]),e("div",null,[e("div",Me,[t[17]||(t[17]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Devis",-1)),e("span",De,i(a.usage.quotes_this_month.used)+" / "+i(a.usage.quotes_this_month.limit),1)]),e("div",Be,[e("div",{class:"h-full bg-primary-500 rounded-full transition-all",style:j({width:C(a.usage.quotes_this_month.used,a.usage.quotes_this_month.limit)+"%"})},null,4)])])])])),c.value?u("",!0):(s(),r("div",Se,[e("div",qe,[e("div",Le,[t[20]||(t[20]=e("div",{class:"text-white"},[e("h3",{class:"text-2xl font-bold"},"Passez au plan Pro"),e("p",{class:"mt-2 text-primary-100"}," Débloquez l'export FAIA, les relances automatiques et bien plus. "),e("ul",{class:"mt-4 space-y-2"},[e("li",{class:"flex items-center text-sm"},[e("svg",{class:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})]),n(" Clients et factures illimités ")]),e("li",{class:"flex items-center text-sm"},[e("svg",{class:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})]),n(" Export FAIA pour contrôle fiscal ")]),e("li",{class:"flex items-center text-sm"},[e("svg",{class:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})]),n(" Archivage PDF longue durée ")])])],-1)),e("div",Ee,[e("div",Ve,[e("div",$e,[e("button",{onClick:t[1]||(t[1]=d=>b.value="monthly"),class:P(["px-3 py-1 rounded-lg text-sm font-medium transition-colors",b.value==="monthly"?"bg-white text-primary-600":"text-white/80 hover:text-white"])}," Mensuel ",2),e("button",{onClick:t[2]||(t[2]=d=>b.value="yearly"),class:P(["px-3 py-1 rounded-lg text-sm font-medium transition-colors",b.value==="yearly"?"bg-white text-primary-600":"text-white/80 hover:text-white"])}," Annuel (-17%) ",2)]),e("p",Te,i(b.value==="yearly"?_((($=y.value)==null?void 0:$.monthly_price_when_yearly)||5.83):_(((T=y.value)==null?void 0:T.price_monthly)||7)),1),t[19]||(t[19]=e("p",{class:"text-sm text-primary-100"},"/mois HT",-1))]),e("button",{onClick:O,disabled:l(m).processing,class:"inline-flex items-center px-6 py-3 bg-white text-primary-600 font-semibold rounded-xl hover:bg-primary-50 transition-colors disabled:opacity-50"},[l(m).processing?(s(),r("span",Ge,"Chargement...")):(s(),r("span",Oe,"Passer à Pro"))],8,Ne)])])])])),c.value&&((N=a.invoices)!=null&&N.length)?(s(),r("div",Re,[t[21]||(t[21]=e("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},[e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-white"}," Historique des factures ")],-1)),e("div",Ie,[(s(!0),r(g,null,K(a.invoices,d=>(s(),r("div",{key:d.id,class:"px-6 py-4 flex items-center justify-between"},[e("div",null,[e("p",Ue,i(d.date),1),e("p",He,i(d.total),1)]),e("a",{href:d.url,target:"_blank",class:"text-primary-600 hover:text-primary-800 text-sm font-medium"}," Télécharger PDF ",8,Je)]))),128))])])):u("",!0)]),(s(),Q(W,{to:"body"},[h.value?(s(),r("div",Ke,[e("div",Qe,[e("div",{class:"fixed inset-0 bg-slate-900/50",onClick:t[3]||(t[3]=d=>h.value=!1)}),e("div",We,[t[23]||(t[23]=e("h3",{class:"text-lg font-semibold text-slate-900 dark:text-white"}," Annuler votre abonnement ? ",-1)),t[24]||(t[24]=e("p",{class:"mt-2 text-slate-600 dark:text-slate-400"}," Vous conserverez l'accès Pro jusqu'à la fin de votre période de facturation. Après cela, vous passerez automatiquement au plan Starter gratuit. ",-1)),e("div",Xe,[x(H,{onClick:t[4]||(t[4]=d=>h.value=!1)},{default:p(()=>[...t[22]||(t[22]=[n(" Garder Pro ",-1)])]),_:1}),e("button",{onClick:R,disabled:l(w).processing,class:"inline-flex items-center px-4 py-2 bg-pink-600 hover:bg-pink-700 text-white font-medium rounded-xl transition-colors disabled:opacity-50"},[l(w).processing?(s(),r("span",Ze,"Annulation...")):(s(),r("span",et,"Confirmer l'annulation"))],8,Ye)])])])])):u("",!0)]))]}),_:1})],64))}};export{ot as default};
