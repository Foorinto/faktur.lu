import{u as C,c as n,a as d,b as t,h as M,i as _,d as e,w as B,t as l,f as c,v as p,o as i,F as h,j as v,k as f,s as q,e as k,g as A,l as w,B as V}from"./app-Bw40qWnz.js";import{_ as N}from"./AppLayout-DY_rKOab.js";import{_ as u,a as g}from"./InputError-Ds8nJv-q.js";import{P as R}from"./PrimaryButton-CfOxTcr6.js";import{u as S}from"./useTranslations-BmhVlpgi.js";import"./ApplicationLogo-oNrlBF6v.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-DHpUyQjj.js";const T={class:"flex items-center space-x-4"},D={class:"text-xl font-semibold text-gray-900 dark:text-white"},E={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},L={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},$={class:"text-lg font-medium text-gray-900 dark:text-white"},H={class:"px-6 py-4"},I={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},P=["placeholder"],z={class:"sm:col-span-2"},O={value:""},G=["value"],J={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},K={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Q={class:"text-lg font-medium text-gray-900 dark:text-white"},W={class:"px-6 py-4"},X={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},Y={class:"relative mt-1"},Z=["value"],ee={class:"mt-1 rounded-md bg-gray-50 dark:bg-gray-700 px-4 py-3 text-sm"},te={class:"flex justify-between"},re={class:"text-gray-500 dark:text-gray-400"},ae={class:"font-medium text-gray-900 dark:text-white"},se={class:"flex justify-between mt-1"},oe={class:"text-gray-500 dark:text-gray-400"},de={class:"font-medium text-gray-900 dark:text-white"},le={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},ne={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},ie={class:"text-lg font-medium text-gray-900 dark:text-white"},ce={class:"px-6 py-4"},ue={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},ge={value:""},me=["value"],_e=["placeholder"],pe={class:"sm:col-span-2"},he=["placeholder"],ye={class:"sm:col-span-2"},ve={class:"flex items-center"},fe={for:"is_deductible",class:"ml-2 block text-sm text-gray-900 dark:text-white"},be={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},xe={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},ke={class:"text-lg font-medium text-gray-900 dark:text-white"},we={class:"px-6 py-4"},Ve={class:"flex items-center justify-center w-full"},Fe={for:"attachment",class:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:hover:bg-gray-600"},Ue={class:"flex flex-col items-center justify-center pt-5 pb-6"},je={class:"mb-2 text-sm text-gray-500 dark:text-gray-400"},Ce={class:"font-semibold"},Me={class:"text-xs text-gray-500 dark:text-gray-400"},Be={key:0,class:"mt-3 text-sm text-gray-600 dark:text-gray-400"},qe={class:"flex justify-end space-x-3"},Ae={key:0},Ne={key:1},Ie={__name:"Create",props:{categories:Array,vatRates:Array,paymentMethods:Array},setup(y){const{t:a}=S(),r=C({date:new Date().toISOString().split("T")[0],provider_name:"",category:"",amount_ht:"",vat_rate:17,description:"",is_deductible:!0,payment_method:"",reference:"",attachment:null}),b=V(()=>!r.amount_ht||!r.vat_rate?0:(parseFloat(r.amount_ht)*parseFloat(r.vat_rate)/100).toFixed(2)),F=V(()=>r.amount_ht?(parseFloat(r.amount_ht)+parseFloat(b.value)).toFixed(2):0),x=m=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(m),U=m=>{r.attachment=m.target.files[0]},j=()=>{r.post(route("expenses.store"),{forceFormData:!0})};return(m,o)=>(i(),n(h,null,[d(t(M),{title:t(a)("new_expense")},null,8,["title"]),d(N,null,{header:_(()=>[e("div",T,[d(t(w),{href:m.route("expenses.index"),class:"text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400"},{default:_(()=>[...o[9]||(o[9]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"]),e("h1",D,l(t(a)("new_expense")),1)])]),default:_(()=>[e("form",{onSubmit:B(j,["prevent"]),class:"space-y-6"},[e("div",E,[e("div",L,[e("h2",$,l(t(a)("information")),1)]),e("div",H,[e("div",I,[e("div",null,[d(u,{for:"date",value:t(a)("date")},null,8,["value"]),c(e("input",{id:"date","onUpdate:modelValue":o[0]||(o[0]=s=>t(r).date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},null,512),[[p,t(r).date]]),d(g,{message:t(r).errors.date,class:"mt-2"},null,8,["message"])]),e("div",null,[d(u,{for:"provider_name",value:t(a)("supplier")},null,8,["value"]),c(e("input",{id:"provider_name","onUpdate:modelValue":o[1]||(o[1]=s=>t(r).provider_name=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:t(a)("example_provider"),required:""},null,8,P),[[p,t(r).provider_name]]),d(g,{message:t(r).errors.provider_name,class:"mt-2"},null,8,["message"])]),e("div",z,[d(u,{for:"category",value:t(a)("category")},null,8,["value"]),c(e("select",{id:"category","onUpdate:modelValue":o[2]||(o[2]=s=>t(r).category=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[e("option",O,l(t(a)("select_category")),1),(i(!0),n(h,null,v(y.categories,s=>(i(),n("option",{key:s.value,value:s.value},l(s.label),9,G))),128))],512),[[f,t(r).category]]),d(g,{message:t(r).errors.category,class:"mt-2"},null,8,["message"])])])])]),e("div",J,[e("div",K,[e("h2",Q,l(t(a)("calculated_amounts")),1)]),e("div",W,[e("div",X,[e("div",null,[d(u,{for:"amount_ht",value:t(a)("amount_ht")},null,8,["value"]),e("div",Y,[c(e("input",{id:"amount_ht","onUpdate:modelValue":o[3]||(o[3]=s=>t(r).amount_ht=s),type:"number",step:"0.01",min:"0.01",class:"block w-full rounded-md border-gray-300 pr-12 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"0.00",required:""},null,512),[[p,t(r).amount_ht]]),o[10]||(o[10]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[e("span",{class:"text-gray-500 dark:text-gray-400"},"EUR")],-1))]),d(g,{message:t(r).errors.amount_ht,class:"mt-2"},null,8,["message"])]),e("div",null,[d(u,{for:"vat_rate",value:t(a)("vat_rate_label")},null,8,["value"]),c(e("select",{id:"vat_rate","onUpdate:modelValue":o[4]||(o[4]=s=>t(r).vat_rate=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[(i(!0),n(h,null,v(y.vatRates,s=>(i(),n("option",{key:s.value,value:s.value},l(s.label),9,Z))),128))],512),[[f,t(r).vat_rate,void 0,{number:!0}]]),d(g,{message:t(r).errors.vat_rate,class:"mt-2"},null,8,["message"])]),e("div",null,[d(u,{value:t(a)("calculated_amounts")},null,8,["value"]),e("div",ee,[e("div",te,[e("span",re,l(t(a)("vat"))+":",1),e("span",ae,l(x(b.value)),1)]),e("div",se,[e("span",oe,l(t(a)("ttc"))+":",1),e("span",de,l(x(F.value)),1)])])])])])]),e("div",le,[e("div",ne,[e("h2",ie,l(t(a)("additional_info")),1)]),e("div",ce,[e("div",ue,[e("div",null,[d(u,{for:"payment_method",value:t(a)("payment_method_optional")},null,8,["value"]),c(e("select",{id:"payment_method","onUpdate:modelValue":o[5]||(o[5]=s=>t(r).payment_method=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},[e("option",ge,l(t(a)("select")),1),(i(!0),n(h,null,v(y.paymentMethods,s=>(i(),n("option",{key:s.value,value:s.value},l(s.label),9,me))),128))],512),[[f,t(r).payment_method]]),d(g,{message:t(r).errors.payment_method,class:"mt-2"},null,8,["message"])]),e("div",null,[d(u,{for:"reference",value:t(a)("invoice_reference_optional")},null,8,["value"]),c(e("input",{id:"reference","onUpdate:modelValue":o[6]||(o[6]=s=>t(r).reference=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:t(a)("example_ref")},null,8,_e),[[p,t(r).reference]]),d(g,{message:t(r).errors.reference,class:"mt-2"},null,8,["message"])]),e("div",pe,[d(u,{for:"description",value:t(a)("description_optional")},null,8,["value"]),c(e("textarea",{id:"description","onUpdate:modelValue":o[7]||(o[7]=s=>t(r).description=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:t(a)("expense_notes")},null,8,he),[[p,t(r).description]]),d(g,{message:t(r).errors.description,class:"mt-2"},null,8,["message"])]),e("div",ye,[e("div",ve,[c(e("input",{id:"is_deductible","onUpdate:modelValue":o[8]||(o[8]=s=>t(r).is_deductible=s),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700"},null,512),[[q,t(r).is_deductible]]),e("label",fe,l(t(a)("expense_deductible")),1)])])])])]),e("div",be,[e("div",xe,[e("h2",ke,l(t(a)("receipt_attachment")),1)]),e("div",we,[e("div",Ve,[e("label",Fe,[e("div",Ue,[o[11]||(o[11]=e("svg",{class:"w-8 h-8 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),e("p",je,[e("span",Ce,l(t(a)("click_to_upload")),1),k(" "+l(t(a)("drag_drop")),1)]),e("p",Me,l(t(a)("file_types_allowed")),1)]),e("input",{id:"attachment",type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png,.webp",onChange:U},null,32)])]),t(r).attachment?(i(),n("div",Be,l(t(a)("file_selected"))+" "+l(t(r).attachment.name),1)):A("",!0),d(g,{message:t(r).errors.attachment,class:"mt-2"},null,8,["message"])])]),e("div",qe,[d(t(w),{href:m.route("expenses.index"),class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},{default:_(()=>[k(l(t(a)("cancel")),1)]),_:1},8,["href"]),d(R,{disabled:t(r).processing},{default:_(()=>[t(r).processing?(i(),n("span",Ae,l(t(a)("saving")),1)):(i(),n("span",Ne,l(t(a)("save")),1))]),_:1},8,["disabled"])])],32)]),_:1})],64))}};export{Ie as default};
