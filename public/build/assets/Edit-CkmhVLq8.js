import{u as q,r as N,c as n,a as l,b as t,h as R,i as h,d as e,w as T,t as d,f as u,v as y,o as i,F as v,j as f,k as b,s as E,g as k,e as F,l as j,B as C}from"./app-B97I2Oxk.js";import{_ as L}from"./AppLayout-BV7HVWRJ.js";import{_ as m,a as g}from"./InputError-DyOQpCKT.js";import{P as D}from"./PrimaryButton-DB5fqt7U.js";import{u as P}from"./useTranslations-C4Y-NByF.js";import"./ApplicationLogo-DwcnZXn5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-C30LA8Zs.js";const S={class:"flex items-center space-x-4"},$={class:"text-xl font-semibold text-gray-900 dark:text-white"},z={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},H={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},I={class:"text-lg font-medium text-gray-900 dark:text-white"},O={class:"px-6 py-4"},G={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},J=["placeholder"],K={class:"sm:col-span-2"},Q={value:""},W=["value"],X={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},Y={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Z={class:"text-lg font-medium text-gray-900 dark:text-white"},ee={class:"px-6 py-4"},te={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},re={class:"relative mt-1"},ae=["value"],se={class:"mt-1 rounded-md bg-gray-50 dark:bg-gray-700 px-4 py-3 text-sm"},oe={class:"flex justify-between"},de={class:"text-gray-500 dark:text-gray-400"},le={class:"font-medium text-gray-900 dark:text-white"},ne={class:"flex justify-between mt-1"},ie={class:"text-gray-500 dark:text-gray-400"},ce={class:"font-medium text-gray-900 dark:text-white"},ue={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},me={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},ge={class:"text-lg font-medium text-gray-900 dark:text-white"},pe={class:"px-6 py-4"},_e={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},he={value:""},ye=["value"],ve=["placeholder"],xe={class:"sm:col-span-2"},fe=["placeholder"],be={class:"sm:col-span-2"},ke={class:"flex items-center"},we={for:"is_deductible",class:"ml-2 block text-sm text-gray-900 dark:text-white"},Ve={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},Fe={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},je={class:"text-lg font-medium text-gray-900 dark:text-white"},Ce={class:"px-6 py-4"},Ue={key:0,class:"mb-4 p-4 rounded-lg bg-gray-50 dark:bg-gray-700 flex items-center justify-between"},Ae={class:"flex items-center"},Me={class:"ml-3"},Be={class:"text-sm font-medium text-gray-900 dark:text-white"},qe=["href"],Ne={key:1,class:"flex items-center justify-center w-full"},Re={for:"attachment",class:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:hover:bg-gray-600"},Te={class:"flex flex-col items-center justify-center pt-5 pb-6"},Ee={class:"mb-2 text-sm text-gray-500 dark:text-gray-400"},Le={class:"font-semibold"},De={class:"text-xs text-gray-500 dark:text-gray-400"},Pe={key:2,class:"mt-3 text-sm text-gray-600 dark:text-gray-400"},Se={class:"flex justify-end space-x-3"},$e={key:0},ze={key:1},Xe={__name:"Edit",props:{expense:Object,categories:Array,vatRates:Array,paymentMethods:Array},setup(p){const{t:a}=P(),c=p,r=q({date:c.expense.date,provider_name:c.expense.provider_name,category:c.expense.category,amount_ht:c.expense.amount_ht,vat_rate:parseFloat(c.expense.vat_rate),description:c.expense.description||"",is_deductible:c.expense.is_deductible,payment_method:c.expense.payment_method||"",reference:c.expense.reference||"",attachment:null,remove_attachment:!1}),x=N(!!c.expense.attachment_url),w=C(()=>!r.amount_ht||!r.vat_rate?0:(parseFloat(r.amount_ht)*parseFloat(r.vat_rate)/100).toFixed(2)),U=C(()=>r.amount_ht?(parseFloat(r.amount_ht)+parseFloat(w.value)).toFixed(2):0),V=_=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(_),A=_=>{r.attachment=_.target.files[0],r.remove_attachment=!1},M=()=>{r.remove_attachment=!0,x.value=!1,r.attachment=null},B=()=>{r.post(route("expenses.update",c.expense.id),{forceFormData:!0,_method:"PUT"})};return(_,o)=>(i(),n(v,null,[l(t(R),{title:t(a)("edit_expense")},null,8,["title"]),l(L,null,{header:h(()=>[e("div",S,[l(t(j),{href:_.route("expenses.index"),class:"text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400"},{default:h(()=>[...o[9]||(o[9]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"]),e("h1",$,d(t(a)("edit_expense")),1)])]),default:h(()=>[e("form",{onSubmit:T(B,["prevent"]),class:"space-y-6"},[e("div",z,[e("div",H,[e("h2",I,d(t(a)("information")),1)]),e("div",O,[e("div",G,[e("div",null,[l(m,{for:"date",value:t(a)("date")},null,8,["value"]),u(e("input",{id:"date","onUpdate:modelValue":o[0]||(o[0]=s=>t(r).date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},null,512),[[y,t(r).date]]),l(g,{message:t(r).errors.date,class:"mt-2"},null,8,["message"])]),e("div",null,[l(m,{for:"provider_name",value:t(a)("supplier")},null,8,["value"]),u(e("input",{id:"provider_name","onUpdate:modelValue":o[1]||(o[1]=s=>t(r).provider_name=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:t(a)("example_provider"),required:""},null,8,J),[[y,t(r).provider_name]]),l(g,{message:t(r).errors.provider_name,class:"mt-2"},null,8,["message"])]),e("div",K,[l(m,{for:"category",value:t(a)("category")},null,8,["value"]),u(e("select",{id:"category","onUpdate:modelValue":o[2]||(o[2]=s=>t(r).category=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[e("option",Q,d(t(a)("select_category")),1),(i(!0),n(v,null,f(p.categories,s=>(i(),n("option",{key:s.value,value:s.value},d(s.label),9,W))),128))],512),[[b,t(r).category]]),l(g,{message:t(r).errors.category,class:"mt-2"},null,8,["message"])])])])]),e("div",X,[e("div",Y,[e("h2",Z,d(t(a)("calculated_amounts")),1)]),e("div",ee,[e("div",te,[e("div",null,[l(m,{for:"amount_ht",value:t(a)("amount_ht")},null,8,["value"]),e("div",re,[u(e("input",{id:"amount_ht","onUpdate:modelValue":o[3]||(o[3]=s=>t(r).amount_ht=s),type:"number",step:"0.01",min:"0.01",class:"block w-full rounded-md border-gray-300 pr-12 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"0.00",required:""},null,512),[[y,t(r).amount_ht]]),o[10]||(o[10]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[e("span",{class:"text-gray-500 dark:text-gray-400"},"EUR")],-1))]),l(g,{message:t(r).errors.amount_ht,class:"mt-2"},null,8,["message"])]),e("div",null,[l(m,{for:"vat_rate",value:t(a)("vat_rate_label")},null,8,["value"]),u(e("select",{id:"vat_rate","onUpdate:modelValue":o[4]||(o[4]=s=>t(r).vat_rate=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[(i(!0),n(v,null,f(p.vatRates,s=>(i(),n("option",{key:s.value,value:s.value},d(s.label),9,ae))),128))],512),[[b,t(r).vat_rate,void 0,{number:!0}]]),l(g,{message:t(r).errors.vat_rate,class:"mt-2"},null,8,["message"])]),e("div",null,[l(m,{value:t(a)("calculated_amounts")},null,8,["value"]),e("div",se,[e("div",oe,[e("span",de,d(t(a)("vat"))+":",1),e("span",le,d(V(w.value)),1)]),e("div",ne,[e("span",ie,d(t(a)("ttc"))+":",1),e("span",ce,d(V(U.value)),1)])])])])])]),e("div",ue,[e("div",me,[e("h2",ge,d(t(a)("additional_info")),1)]),e("div",pe,[e("div",_e,[e("div",null,[l(m,{for:"payment_method",value:t(a)("payment_method_optional")},null,8,["value"]),u(e("select",{id:"payment_method","onUpdate:modelValue":o[5]||(o[5]=s=>t(r).payment_method=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},[e("option",he,d(t(a)("select")),1),(i(!0),n(v,null,f(p.paymentMethods,s=>(i(),n("option",{key:s.value,value:s.value},d(s.label),9,ye))),128))],512),[[b,t(r).payment_method]]),l(g,{message:t(r).errors.payment_method,class:"mt-2"},null,8,["message"])]),e("div",null,[l(m,{for:"reference",value:t(a)("invoice_reference_optional")},null,8,["value"]),u(e("input",{id:"reference","onUpdate:modelValue":o[6]||(o[6]=s=>t(r).reference=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:t(a)("example_ref")},null,8,ve),[[y,t(r).reference]]),l(g,{message:t(r).errors.reference,class:"mt-2"},null,8,["message"])]),e("div",xe,[l(m,{for:"description",value:t(a)("description_optional")},null,8,["value"]),u(e("textarea",{id:"description","onUpdate:modelValue":o[7]||(o[7]=s=>t(r).description=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:t(a)("expense_notes")},null,8,fe),[[y,t(r).description]]),l(g,{message:t(r).errors.description,class:"mt-2"},null,8,["message"])]),e("div",be,[e("div",ke,[u(e("input",{id:"is_deductible","onUpdate:modelValue":o[8]||(o[8]=s=>t(r).is_deductible=s),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700"},null,512),[[E,t(r).is_deductible]]),e("label",we,d(t(a)("expense_deductible")),1)])])])])]),e("div",Ve,[e("div",Fe,[e("h2",je,d(t(a)("receipt_attachment")),1)]),e("div",Ce,[x.value?(i(),n("div",Ue,[e("div",Ae,[o[11]||(o[11]=e("svg",{class:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),e("div",Me,[e("p",Be,d(p.expense.attachment_filename),1),e("a",{href:p.expense.attachment_url,target:"_blank",class:"text-xs text-indigo-600 hover:text-indigo-500 dark:text-indigo-400"},d(t(a)("view_file")),9,qe)])]),e("button",{type:"button",onClick:M,class:"text-red-600 hover:text-red-500 dark:text-red-400"},[...o[12]||(o[12]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.519.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5z","clip-rule":"evenodd"})],-1)])])])):k("",!0),x.value?k("",!0):(i(),n("div",Ne,[e("label",Re,[e("div",Te,[o[13]||(o[13]=e("svg",{class:"w-8 h-8 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),e("p",Ee,[e("span",Le,d(t(a)("click_to_upload")),1),F(" "+d(t(a)("drag_drop")),1)]),e("p",De,d(t(a)("file_types_allowed")),1)]),e("input",{id:"attachment",type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png,.webp",onChange:A},null,32)])])),t(r).attachment?(i(),n("div",Pe,d(t(a)("new_file_selected"))+" "+d(t(r).attachment.name),1)):k("",!0),l(g,{message:t(r).errors.attachment,class:"mt-2"},null,8,["message"])])]),e("div",Se,[l(t(j),{href:_.route("expenses.index"),class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},{default:h(()=>[F(d(t(a)("cancel")),1)]),_:1},8,["href"]),l(D,{disabled:t(r).processing},{default:h(()=>[t(r).processing?(i(),n("span",$e,d(t(a)("saving")),1)):(i(),n("span",ze,d(t(a)("save")),1))]),_:1},8,["disabled"])])],32)]),_:1})],64))}};export{Xe as default};
