import{r as _,p as w,y as V,c as i,a as f,b as m,h as S,i as v,d as t,f as D,k as F,t as a,o as l,F as h,j as y,g as d,l as g,e as $,m as A,x as L}from"./app-DMgr7XNs.js";import{_ as N}from"./AdminLayout-CSfri0ct.js";import{_ as U}from"./TextInput-yqxvOxA3.js";import{d as B}from"./debounce-DjkJEk6R.js";const E={class:"mb-6 rounded-xl bg-slate-800 p-4"},j={class:"flex flex-col gap-4 sm:flex-row sm:items-center"},I={class:"flex-1"},T={class:"sm:w-48"},M={class:"overflow-hidden rounded-xl bg-slate-800"},G={class:"overflow-x-auto"},H={class:"min-w-full divide-y divide-slate-700"},O={class:"bg-slate-700/50"},R={class:"divide-y divide-slate-700"},z={class:"whitespace-nowrap px-6 py-4"},q={class:"font-medium text-white"},J={key:0,class:"text-sm text-slate-400"},K={class:"whitespace-nowrap px-6 py-4 text-slate-300"},P={class:"whitespace-nowrap px-6 py-4"},Q={class:"flex flex-wrap gap-1"},W={key:0,class:"inline-flex rounded-full bg-green-500/20 px-2 py-1 text-xs font-medium text-green-400"},X={key:1,class:"inline-flex rounded-full bg-yellow-500/20 px-2 py-1 text-xs font-medium text-yellow-400"},Y={key:2,class:"inline-flex rounded-full bg-purple-500/20 px-2 py-1 text-xs font-medium text-purple-400"},Z={key:3,class:"inline-flex rounded-full bg-red-500/20 px-2 py-1 text-xs font-medium text-red-400"},tt={key:4,class:"inline-flex rounded-full bg-slate-500/20 px-2 py-1 text-xs font-medium text-slate-400"},et={class:"whitespace-nowrap px-6 py-4 text-slate-300"},st={class:"whitespace-nowrap px-6 py-4 text-slate-300"},at={class:"whitespace-nowrap px-6 py-4 text-slate-300"},lt={class:"whitespace-nowrap px-6 py-4 text-right"},it={key:0},rt={key:0,class:"border-t border-slate-700 px-6 py-4"},ot={class:"flex items-center justify-between"},nt={class:"text-sm text-slate-400"},dt={class:"flex gap-2"},ft={__name:"Index",props:{users:Object,filters:Object},setup(o){const n=o,c=_(n.filters.search),u=_(n.filters.status),b=r=>new Intl.NumberFormat("fr-LU",{style:"currency",currency:"EUR"}).format(r||0),k=r=>new Date(r).toLocaleDateString("fr-LU",{day:"2-digit",month:"2-digit",year:"numeric"}),C=B(()=>{w.get(route("admin.users.index"),{search:c.value,status:u.value,sort:n.filters.sort,direction:n.filters.direction},{preserveState:!0,replace:!0})},300);V([c,u],()=>{C()});const p=r=>{const e=n.filters.sort===r&&n.filters.direction==="asc"?"desc":"asc";w.get(route("admin.users.index"),{search:c.value,status:u.value,sort:r,direction:e},{preserveState:!0,replace:!0})},x=r=>n.filters.sort!==r?"↕":n.filters.direction==="asc"?"↑":"↓";return(r,e)=>(l(),i(h,null,[f(m(S),{title:"Gestion des utilisateurs"}),f(N,null,{header:v(()=>[...e[7]||(e[7]=[t("h1",{class:"text-xl font-semibold text-white"},"Gestion des utilisateurs",-1)])]),default:v(()=>[t("div",E,[t("div",j,[t("div",I,[f(U,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),type:"search",placeholder:"Rechercher par nom, email ou société...",class:"w-full border-slate-600 bg-slate-700 text-white placeholder-slate-400 focus:border-purple-500 focus:ring-purple-500"},null,8,["modelValue"])]),t("div",T,[D(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),class:"w-full rounded-md border-slate-600 bg-slate-700 text-white focus:border-purple-500 focus:ring-purple-500"},[...e[8]||(e[8]=[t("option",{value:""},"Tous les statuts",-1),t("option",{value:"verified"},"Email vérifié",-1),t("option",{value:"unverified"},"Email non vérifié",-1),t("option",{value:"with_2fa"},"Avec 2FA",-1),t("option",{value:"inactive"},"Désactivés",-1),t("option",{value:"deleted"},"Supprimés",-1)])],512),[[F,u.value]])])])]),t("div",M,[t("div",G,[t("table",H,[t("thead",O,[t("tr",null,[t("th",{class:"cursor-pointer px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-300 hover:text-white",onClick:e[2]||(e[2]=s=>p("name"))}," Utilisateur "+a(x("name")),1),t("th",{class:"cursor-pointer px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-300 hover:text-white",onClick:e[3]||(e[3]=s=>p("email"))}," Email "+a(x("email")),1),e[9]||(e[9]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-300"}," Statut ",-1)),t("th",{class:"cursor-pointer px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-300 hover:text-white",onClick:e[4]||(e[4]=s=>p("invoices_count"))}," Factures "+a(x("invoices_count")),1),t("th",{class:"cursor-pointer px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-300 hover:text-white",onClick:e[5]||(e[5]=s=>p("invoices_sum_total_ttc"))}," CA "+a(x("invoices_sum_total_ttc")),1),t("th",{class:"cursor-pointer px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-300 hover:text-white",onClick:e[6]||(e[6]=s=>p("created_at"))}," Inscrit le "+a(x("created_at")),1),e[10]||(e[10]=t("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-slate-300"}," Actions ",-1))])]),t("tbody",R,[(l(!0),i(h,null,y(o.users.data,s=>(l(),i("tr",{key:s.id,class:"hover:bg-slate-700/50"},[t("td",z,[t("div",null,[t("div",q,a(s.name),1),s.company_name?(l(),i("div",J,a(s.company_name),1)):d("",!0)])]),t("td",K,a(s.email),1),t("td",P,[t("div",Q,[s.email_verified_at?(l(),i("span",W," Vérifié ")):(l(),i("span",X," Non vérifié ")),s.two_factor_confirmed_at?(l(),i("span",Y," 2FA ")):d("",!0),s.is_active===!1?(l(),i("span",Z," Désactivé ")):d("",!0),s.deleted_at?(l(),i("span",tt," Supprimé ")):d("",!0)])]),t("td",et,a(s.invoices_count),1),t("td",st,a(b(s.invoices_sum_total_ttc)),1),t("td",at,a(k(s.created_at)),1),t("td",lt,[f(m(g),{href:r.route("admin.users.show",s.id),class:"text-purple-400 hover:text-purple-300"},{default:v(()=>[...e[11]||(e[11]=[$(" Voir détails ",-1)])]),_:1},8,["href"])])]))),128)),o.users.data.length?d("",!0):(l(),i("tr",it,[...e[12]||(e[12]=[t("td",{colspan:"7",class:"px-6 py-8 text-center text-slate-500"}," Aucun utilisateur trouvé ",-1)])]))])])]),o.users.last_page>1?(l(),i("div",rt,[t("div",ot,[t("div",nt,a(o.users.from)+" à "+a(o.users.to)+" sur "+a(o.users.total),1),t("div",dt,[(l(!0),i(h,null,y(o.users.links,s=>(l(),A(m(g),{key:s.label,href:s.url,class:L(["rounded px-3 py-1 text-sm",s.active?"bg-purple-600 text-white":s.url?"bg-slate-700 text-slate-300 hover:bg-slate-600":"bg-slate-800 text-slate-500 cursor-not-allowed"]),innerHTML:s.label,"preserve-state":""},null,8,["href","class","innerHTML"]))),128))])])])):d("",!0)])]),_:1})],64))}};export{ft as default};
