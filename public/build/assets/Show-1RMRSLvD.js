import{r as b,u as K,y as Ne,z as De,A as Re,c as d,a as D,b as l,h as Te,i as $,d as e,t,o as n,g as u,e as x,m as xe,l as R,F as M,j as L,x as z,f as _,J as ve,k as qe,w as be,v as B,s as Ie,B as h,p as Z,K as Q}from"./app-BM4k7HEV.js";import{_ as Oe}from"./AppLayout-S94i9LSh.js";import{u as Xe}from"./useTranslations-BUq1IIhi.js";import"./DropdownLink-4RKVfM9H.js";const Ge={class:"flex items-center justify-between"},Je={class:"flex items-center space-x-4"},Ke={class:"text-xl font-semibold text-slate-900 dark:text-white"},Ze={key:0,class:"text-pink-600 dark:text-pink-400"},Qe={class:"flex items-center space-x-3"},We=["disabled"],Ye=["disabled"],et=["disabled"],tt={key:3,class:"relative inline-block text-left"},st=["title"],lt=["href"],at=["href"],ot=["disabled"],it=["title"],rt={key:0,class:"animate-spin -ml-0.5 mr-1.5 h-4 w-4",fill:"none",viewBox:"0 0 24 24"},nt={key:1,class:"-ml-0.5 mr-1.5 h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},dt={key:2,class:"-ml-0.5 mr-1.5 h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},ct=["disabled"],ut={class:"space-y-6"},mt={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},xt={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},vt={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},bt={class:"text-lg font-medium text-slate-900 dark:text-white"},pt={class:"px-6 py-4"},ht={key:0,class:"text-sm text-slate-700 dark:text-slate-300 space-y-1"},kt={class:"font-semibold"},ft={key:0},_t={key:1},gt={class:"pt-2"},yt={class:"text-slate-500"},wt={key:2},Ct={class:"text-slate-500"},zt={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},Mt={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},jt={class:"text-lg font-medium text-slate-900 dark:text-white"},$t={class:"px-6 py-4"},Lt={key:0,class:"text-sm text-slate-700 dark:text-slate-300 space-y-1"},Bt={class:"font-semibold"},Vt={key:0},St={key:1},Pt={key:2,class:"pt-2"},At={class:"text-slate-500"},Ft={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},Et={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},Ht={class:"text-lg font-medium text-slate-900 dark:text-white"},Ut={class:"px-6 py-4"},Nt={class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},Dt={class:"text-sm font-medium text-slate-500 dark:text-slate-400"},Rt={class:"mt-1 text-sm text-slate-900 dark:text-white"},Tt={class:"text-sm font-medium text-slate-500 dark:text-slate-400"},qt={class:"mt-1 text-sm text-slate-900 dark:text-white"},It={key:0},Ot={class:"text-sm font-medium text-slate-500 dark:text-slate-400"},Xt={class:"mt-1 text-sm text-slate-900 dark:text-white"},Gt={key:1},Jt={class:"text-sm font-medium text-slate-500 dark:text-slate-400"},Kt={class:"mt-1 text-sm text-slate-900 dark:text-white"},Zt={key:2},Qt={class:"text-sm font-medium text-slate-500 dark:text-slate-400"},Wt={class:"mt-1 text-sm text-slate-900 dark:text-white"},Yt={key:3},es={class:"text-sm font-medium text-slate-500 dark:text-slate-400"},ts={class:"mt-1 text-sm text-slate-900 dark:text-white"},ss={class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},ls={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},as={class:"text-lg font-medium text-slate-900 dark:text-white"},os={class:"overflow-x-auto"},is={class:"min-w-full divide-y divide-slate-200 dark:divide-slate-700"},rs={class:"bg-slate-50 dark:bg-slate-700"},ns={class:"py-3.5 pl-6 pr-3 text-left text-sm font-semibold text-slate-900 dark:text-white"},ds={class:"px-3 py-3.5 text-right text-sm font-semibold text-slate-900 dark:text-white"},cs={class:"px-3 py-3.5 text-right text-sm font-semibold text-slate-900 dark:text-white"},us={class:"px-3 py-3.5 text-right text-sm font-semibold text-slate-900 dark:text-white"},ms={class:"py-3.5 pl-3 pr-6 text-right text-sm font-semibold text-slate-900 dark:text-white"},xs={class:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800"},vs={class:"py-4 pl-6 pr-3 text-sm text-slate-900 dark:text-white"},bs={class:"whitespace-nowrap px-3 py-4 text-right text-sm text-slate-500 dark:text-slate-400"},ps={class:"whitespace-nowrap px-3 py-4 text-right text-sm text-slate-500 dark:text-slate-400"},hs={class:"whitespace-nowrap px-3 py-4 text-right text-sm text-slate-500 dark:text-slate-400"},ks={class:"whitespace-nowrap py-4 pl-3 pr-6 text-right text-sm font-medium text-slate-900 dark:text-white"},fs={class:"bg-slate-50 dark:bg-slate-700"},_s={colspan:"4",class:"py-3 pl-6 pr-3 text-right text-sm font-medium text-slate-500 dark:text-slate-400"},gs={class:"whitespace-nowrap py-3 pl-3 pr-6 text-right text-sm font-medium text-slate-900 dark:text-white"},ys={colspan:"4",class:"py-3 pl-6 pr-3 text-right text-sm font-medium text-slate-500 dark:text-slate-400"},ws={class:"whitespace-nowrap py-3 pl-3 pr-6 text-right text-sm font-medium text-slate-900 dark:text-white"},Cs={class:"border-t-2 border-slate-300 dark:border-slate-600"},zs={colspan:"4",class:"py-3 pl-6 pr-3 text-right text-sm font-bold text-slate-900 dark:text-white"},Ms={key:0,class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},js={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},$s={class:"text-lg font-medium text-slate-900 dark:text-white"},Ls={class:"px-6 py-4"},Bs={class:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap"},Vs={key:1,class:"overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:shadow-slate-900/50"},Ss={class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},Ps={class:"text-lg font-medium text-slate-900 dark:text-white"},As={class:"px-6 py-4"},Fs={class:"divide-y divide-slate-200 dark:divide-slate-700"},Es={class:"text-sm text-pink-600 dark:text-pink-400"},Hs={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Us={class:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0"},Ns={class:"inline-block transform overflow-hidden rounded-2xl bg-white text-left align-bottom shadow-xl transition-all dark:bg-slate-800 sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},Ds={class:"px-4 pt-5 pb-4 sm:p-6"},Rs={class:"text-lg font-medium leading-6 text-slate-900 dark:text-white mb-4"},Ts={class:"mb-4"},qs={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},Is={class:"flex space-x-4"},Os={class:"flex items-center"},Xs={class:"ml-2 text-sm text-slate-700 dark:text-slate-300"},Gs={class:"flex items-center"},Js={class:"ml-2 text-sm text-slate-700 dark:text-slate-300"},Ks={class:"mb-4"},Zs={for:"credit_note_reason",class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},Qs=["value"],Ws={key:0,class:"mb-4"},Ys={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},el={class:"border border-slate-200 rounded-xl divide-y divide-slate-200 dark:border-slate-600 dark:divide-slate-600 max-h-48 overflow-y-auto"},tl=["checked","onChange"],sl={class:"ml-3 flex-1 text-sm text-slate-700 dark:text-slate-300"},ll={class:"text-sm text-slate-500 dark:text-slate-400"},al={key:0,class:"mt-2 text-sm text-pink-600 dark:text-pink-400"},ol={class:"bg-slate-50 dark:bg-slate-700 rounded-xl p-3 mb-4"},il={class:"flex justify-between items-center"},rl={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},nl={class:"text-lg font-bold text-pink-600 dark:text-pink-400"},dl={class:"text-sm text-slate-500 dark:text-slate-400"},cl={class:"bg-slate-50 px-4 py-3 dark:bg-slate-700 sm:flex sm:flex-row-reverse sm:px-6"},ul=["disabled"],ml={key:1,class:"fixed inset-0 z-50 overflow-hidden"},xl={class:"flex items-center justify-center min-h-screen p-4"},vl={class:"relative bg-white dark:bg-slate-800 rounded-2xl shadow-xl w-full max-w-5xl max-h-[90vh] flex flex-col"},bl={class:"flex items-center justify-between px-6 py-4 border-b border-slate-200 dark:border-slate-700"},pl={class:"text-lg font-medium text-slate-900 dark:text-white"},hl={key:0,class:"text-pink-600 dark:text-pink-400"},kl={class:"flex items-center space-x-2"},fl={class:"flex items-center border border-slate-200 dark:border-slate-600 rounded-xl overflow-hidden"},_l=["onClick","title"],gl=["href"],yl={class:"flex-1 overflow-auto p-6 bg-slate-100 dark:bg-slate-900"},wl={key:0,class:"flex items-center justify-center h-96"},Cl=["innerHTML"],zl={class:"flex items-center justify-end px-6 py-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/50"},Ml={key:2,class:"fixed inset-0 z-50 overflow-y-auto"},jl={class:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0"},$l={class:"inline-block transform overflow-hidden rounded-2xl bg-white text-left align-bottom shadow-xl transition-all dark:bg-slate-800 sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},Ll={class:"px-4 pt-5 pb-4 sm:p-6"},Bl={class:"text-lg font-medium leading-6 text-slate-900 dark:text-white mb-4"},Vl={class:"mb-4"},Sl={for:"recipient_email",class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},Pl={key:0,class:"mt-1 text-sm text-pink-600"},Al={class:"mb-4"},Fl={for:"subject",class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},El={key:0,class:"mt-1 text-sm text-pink-600"},Hl={class:"mb-4"},Ul={for:"message",class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},Nl=["placeholder"],Dl={key:0,class:"mt-1 text-sm text-pink-600"},Rl={class:"mb-4"},Tl={class:"flex items-center"},ql={class:"ml-2 text-sm text-slate-700 dark:text-slate-300"},Il={class:"bg-sky-50 dark:bg-sky-900/20 rounded-xl p-3"},Ol={class:"text-sm text-sky-700 dark:text-sky-300"},Xl={class:"bg-slate-50 px-4 py-3 dark:bg-slate-700 sm:flex sm:flex-row-reverse sm:px-6"},Gl=["disabled"],Jl={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Kl={key:3,class:"fixed inset-0 z-50 overflow-y-auto"},Zl={class:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0"},Ql={class:"inline-block transform overflow-hidden rounded-2xl bg-white text-left align-bottom shadow-xl transition-all dark:bg-slate-800 sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},Wl={class:"px-4 pt-5 pb-4 sm:p-6"},Yl={class:"text-lg font-medium leading-6 text-slate-900 dark:text-white mb-4"},ea={class:"mb-4"},ta={class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},sa={class:"flex space-x-2"},la={class:"mb-4 bg-orange-50 dark:bg-orange-900/20 rounded-xl p-3"},aa={class:"flex items-center"},oa={class:"text-sm font-medium text-orange-700 dark:text-orange-300"},ia={class:"mb-4"},ra={for:"reminder_email",class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},na={class:"mb-4"},da={for:"reminder_subject",class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},ca={class:"mb-4"},ua={for:"reminder_message",class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},ma={class:"bg-sky-50 dark:bg-sky-900/20 rounded-xl p-3"},xa={class:"text-sm text-sky-700 dark:text-sky-300"},va={class:"bg-slate-50 px-4 py-3 dark:bg-slate-700 sm:flex sm:flex-row-reverse sm:px-6"},ba=["disabled"],pa={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},ha={key:4,class:"fixed inset-0 z-50 overflow-y-auto"},ka={class:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0"},fa={class:"inline-block transform overflow-hidden rounded-2xl bg-white text-left align-bottom shadow-xl transition-all dark:bg-slate-800 sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},_a={class:"px-4 pt-5 pb-4 sm:p-6"},ga={class:"text-lg font-medium leading-6 text-slate-900 dark:text-white mb-4"},ya={key:0,class:"flex items-center justify-center py-8"},wa={key:1,class:"text-center py-8"},Ca={class:"mt-2 text-sm text-slate-500 dark:text-slate-400"},za={key:2,class:"space-y-3 max-h-96 overflow-y-auto"},Ma={class:"flex items-center justify-between mb-2"},ja={class:"text-xs text-slate-500 dark:text-slate-400"},$a={class:"text-sm font-medium text-slate-900 dark:text-white truncate"},La={class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},Ba={key:0,class:"mt-2 flex items-center text-xs text-pink-600 dark:text-pink-400"},Va={class:"bg-slate-50 px-4 py-3 dark:bg-slate-700 sm:flex sm:flex-row-reverse sm:px-6"},Sa=5e3,Ha={__name:"Show",props:{invoice:Object,peppolEnabled:{type:Boolean,default:!1}},setup(o){var re,ne,de;const{t:a}=Xe(),c=o,p=b(!1),F=b(!1),g=b("full"),y=b([]),j=b(!1),T=b(""),q=b(!1),E=b(((re=c.invoice.buyer_snapshot)==null?void 0:re.locale)||"fr"),pe=[{value:"fr",label:"FranÃ§ais",flag:"ðŸ‡«ðŸ‡·"},{value:"de",label:"Deutsch",flag:"ðŸ‡©ðŸ‡ª"},{value:"en",label:"English",flag:"ðŸ‡¬ðŸ‡§"},{value:"lb",label:"LÃ«tzebuergesch",flag:"ðŸ‡±ðŸ‡º"}],he=h(()=>`${route("invoices.pdf.stream",c.invoice.id)}?locale=${E.value}`),W=async()=>{q.value=!0;try{const r=route("invoices.preview-html",c.invoice.id)+`?locale=${E.value}`,s=await Q.get(r);T.value=s.data.html}catch(r){console.error("Error loading preview:",r),T.value=`<p style="color: red; padding: 20px;">${a("error_loading_preview")}</p>`}finally{q.value=!1}},ke=r=>{E.value=r,j.value&&W()},fe=()=>{j.value=!0,W()},w=K({reason:"cancellation",item_ids:null}),V=b(!1),m=K({recipient_email:((ne=c.invoice.buyer_snapshot)==null?void 0:ne.email)||"",subject:`${c.invoice.type==="credit_note"?"Avoir":"Facture"} ${c.invoice.number}`,message:"",send_copy_to_self:!1}),S=b(!1),H=b(1),v=K({level:1,recipient_email:((de=c.invoice.buyer_snapshot)==null?void 0:de.email)||"",subject:"",message:""}),U=b(!1),I=b([]),O=b(!1),Y=h(()=>c.invoice.status!=="draft"),_e=h(()=>["finalized","sent"].includes(c.invoice.status)&&c.invoice.type!=="credit_note"),ee=h(()=>{var r,s,i,C;return c.invoice.status!=="draft"&&((r=c.invoice.seller_snapshot)==null?void 0:r.peppol_endpoint_id)&&((s=c.invoice.seller_snapshot)==null?void 0:s.peppol_endpoint_scheme)&&((i=c.invoice.buyer_snapshot)==null?void 0:i.peppol_endpoint_id)&&((C=c.invoice.buyer_snapshot)==null?void 0:C.peppol_endpoint_scheme)}),ge=h(()=>c.peppolEnabled&&ee.value&&!c.invoice.peppol_transmission),k=h(()=>c.invoice.peppol_transmission),P=b(null),te=h(()=>{const r=k.value;return r&&["pending","processing"].includes(r.status)}),ye=async()=>{if(k.value)try{const r=await Q.get(route("invoices.peppol-status",c.invoice.id));r.data.transmission&&(c.invoice.peppol_transmission=r.data.transmission,["pending","processing"].includes(r.data.transmission.status)||X())}catch(r){console.error("Error polling Peppol status:",r)}},se=()=>{P.value||(P.value=setInterval(ye,Sa))},X=()=>{P.value&&(clearInterval(P.value),P.value=null)};Ne(te,r=>{r?se():X()},{immediate:!0}),De(()=>{te.value&&se()}),Re(()=>{X()});const we=r=>{const s={pending:"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300",processing:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",sent:"bg-amber-100 text-amber-700 dark:bg-amber-900 dark:text-amber-300",delivered:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300",failed:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300"};return s[r]||s.pending},Ce=r=>({pending:"En attente",processing:"En cours",sent:"EnvoyÃ©",delivered:"LivrÃ©",failed:"Ã‰chouÃ©"})[r]||r,le=h(()=>c.invoice.due_at?new Date(c.invoice.due_at)<new Date&&!["paid","cancelled"].includes(c.invoice.status):!1),G=h(()=>{if(!c.invoice.due_at||!le.value)return 0;const r=new Date(c.invoice.due_at);return Math.floor((new Date-r)/(1e3*60*60*24))}),ze=()=>{var r;m.recipient_email=((r=c.invoice.buyer_snapshot)==null?void 0:r.email)||"",m.subject=`${c.invoice.type==="credit_note"?"Avoir":"Facture"} ${c.invoice.number}`,m.message="",m.send_copy_to_self=!1,V.value=!0},Me=()=>{m.post(route("invoices.send-email",c.invoice.id),{preserveScroll:!0,onSuccess:()=>{V.value=!1,m.reset()}})},N=(r=1)=>{var ce,ue,me;H.value=r,v.level=r,v.recipient_email=((ce=c.invoice.buyer_snapshot)==null?void 0:ce.email)||"";const s=((ue=c.invoice.buyer_snapshot)==null?void 0:ue.name)||"Client",i=f(c.invoice.total_ttc,c.invoice.currency),C=A(c.invoice.due_at),J=((me=c.invoice.seller_snapshot)==null?void 0:me.company_name)||"";r===1?(v.subject=`Rappel : Facture ${c.invoice.number} en attente de paiement`,v.message=`Bonjour ${s},

Nous nous permettons de vous rappeler que la facture ${c.invoice.number} d'un montant de ${i} est arrivÃ©e Ã  Ã©chÃ©ance le ${C}.

Nous vous remercions de bien vouloir procÃ©der au rÃ¨glement dans les meilleurs dÃ©lais.

Cordialement,
${J}`):r===2?(v.subject=`Relance : Facture ${c.invoice.number} impayÃ©e`,v.message=`Bonjour ${s},

MalgrÃ© notre prÃ©cÃ©dent rappel, nous constatons que la facture ${c.invoice.number} d'un montant de ${i} reste impayÃ©e.

Le retard de paiement est actuellement de ${G.value} jours.

Nous vous prions de rÃ©gulariser cette situation dans les plus brefs dÃ©lais.

Cordialement,
${J}`):(v.subject=`Mise en demeure : Facture ${c.invoice.number}`,v.message=`Bonjour ${s},

MalgrÃ© nos relances prÃ©cÃ©dentes, la facture ${c.invoice.number} d'un montant de ${i} demeure impayÃ©e depuis ${G.value} jours.

Sans rÃ¨glement de votre part sous 8 jours, nous nous verrons contraints d'engager les procÃ©dures de recouvrement appropriÃ©es.

Cordialement,
${J}`),S.value=!0},je=()=>{v.post(route("invoices.send-reminder",c.invoice.id),{preserveScroll:!0,onSuccess:()=>{S.value=!1,v.reset()}})},$e=async()=>{O.value=!0;try{const r=await Q.get(route("invoices.emails",c.invoice.id));I.value=r.data.emails}catch(r){console.error("Error loading email history:",r)}finally{O.value=!1}},Le=()=>{U.value=!0,$e()},ae=h(()=>({billing_error:a("billing_error"),return:a("return_merchandise"),commercial_discount:a("commercial_discount"),cancellation:a("invoice_cancellation"),other:a("other")})),oe=h(()=>g.value==="partial"?y.value.length>0:!0),Be=h(()=>c.invoice.items?c.invoice.items.filter(r=>y.value.includes(r.id)).reduce((r,s)=>r+parseFloat(s.total_ttc||0),0):0),Ve=r=>{const s={draft:"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300",finalized:"bg-sky-100 text-sky-700 dark:bg-sky-900 dark:text-sky-300",sent:"bg-amber-100 text-amber-700 dark:bg-amber-900 dark:text-amber-300",paid:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300",cancelled:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300"};return s[r]||s.draft},Se=r=>({draft:a("draft"),finalized:a("finalized"),sent:a("sent"),paid:a("paid"),cancelled:a("cancelled")})[r]||r,f=(r,s="EUR")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:s}).format(r),A=r=>r?new Date(r).toLocaleDateString("fr-FR"):"-",Pe=()=>{p.value||(p.value=!0,Z.post(route("invoices.mark-sent",c.invoice.id),{},{preserveScroll:!0,onFinish:()=>p.value=!1}))},Ae=()=>{p.value||(p.value=!0,Z.post(route("invoices.mark-paid",c.invoice.id),{},{preserveScroll:!0,onFinish:()=>p.value=!1}))},Fe=()=>{p.value||(p.value=!0,Z.post(route("invoices.send-peppol",c.invoice.id),{},{preserveScroll:!0,onFinish:()=>p.value=!1}))},Ee=()=>{g.value="full",y.value=[],w.reason="cancellation",w.item_ids=null,F.value=!0},ie=()=>{F.value=!1},He=r=>{const s=y.value.indexOf(r);s===-1?y.value.push(r):y.value.splice(s,1)},Ue=()=>{oe.value&&(g.value==="partial"?w.item_ids=y.value:w.item_ids=null,w.post(route("invoices.credit-note",c.invoice.id),{preserveScroll:!0,onSuccess:()=>{F.value=!1}}))};return(r,s)=>(n(),d(M,null,[D(l(Te),{title:`${l(a)("invoice")} ${o.invoice.number}`},null,8,["title"]),D(Oe,null,{header:$(()=>[e("div",Ge,[e("div",Je,[D(l(R),{href:r.route("invoices.index"),class:"text-slate-400 hover:text-slate-500 dark:text-slate-500 dark:hover:text-slate-400"},{default:$(()=>[...s[23]||(s[23]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"]),e("h1",Ke,[o.invoice.type==="credit_note"?(n(),d("span",Ze,t(l(a)("credit_note")),1)):u("",!0),x(" "+t(o.invoice.number),1)]),e("span",{class:z([Ve(o.invoice.status),"inline-flex items-center rounded-xl px-3 py-1 text-xs font-medium"])},t(Se(o.invoice.status)),3)]),e("div",Qe,[e("button",{type:"button",onClick:fe,class:"inline-flex items-center rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},[s[24]||(s[24]=e("svg",{class:"h-4 w-4 mr-1.5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"}),e("path",{"fill-rule":"evenodd",d:"M.664 10.59a1.651 1.651 0 010-1.186A10.004 10.004 0 0110 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0110 17c-4.257 0-7.893-2.66-9.336-6.41zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1)),x(" "+t(l(a)("preview")),1)]),o.invoice.status==="finalized"?(n(),d("button",{key:0,onClick:Pe,disabled:p.value,class:"inline-flex items-center rounded-xl bg-amber-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-amber-600 disabled:opacity-50"},[s[25]||(s[25]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M3 4a2 2 0 00-2 2v1.161l8.441 4.221a1.25 1.25 0 001.118 0L19 7.162V6a2 2 0 00-2-2H3z"}),e("path",{d:"M19 8.839l-7.77 3.885a2.75 2.75 0 01-2.46 0L1 8.839V14a2 2 0 002 2h14a2 2 0 002-2V8.839z"})],-1)),x(" "+t(l(a)("mark_as_sent")),1)],8,We)):u("",!0),o.invoice.status==="sent"?(n(),d("button",{key:1,onClick:Ae,disabled:p.value,class:"inline-flex items-center rounded-xl bg-emerald-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-600 disabled:opacity-50"},[s[26]||(s[26]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"})],-1)),x(" "+t(l(a)("mark_as_paid")),1)],8,Ye)):u("",!0),Y.value?(n(),d("button",{key:2,onClick:ze,disabled:p.value,class:"inline-flex items-center rounded-xl bg-primary-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-600 disabled:opacity-50"},[s[27]||(s[27]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M3 4a2 2 0 00-2 2v1.161l8.441 4.221a1.25 1.25 0 001.118 0L19 7.162V6a2 2 0 00-2-2H3z"}),e("path",{d:"M19 8.839l-7.77 3.885a2.75 2.75 0 01-2.46 0L1 8.839V14a2 2 0 002 2h14a2 2 0 002-2V8.839z"})],-1)),x(" "+t(l(a)("send_by_email")),1)],8,et)):u("",!0),_e.value&&le.value?(n(),d("div",tt,[e("button",{type:"button",onClick:s[0]||(s[0]=i=>N(1)),class:"inline-flex items-center rounded-xl bg-orange-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-600"},[s[28]||(s[28]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 2a6 6 0 00-6 6c0 1.887-.454 3.665-1.257 5.234a.75.75 0 00.515 1.076 32.91 32.91 0 003.256.508 3.5 3.5 0 006.972 0 32.903 32.903 0 003.256-.508.75.75 0 00.515-1.076A11.448 11.448 0 0116 8a6 6 0 00-6-6zM8.05 14.943a33.54 33.54 0 003.9 0 2 2 0 01-3.9 0z","clip-rule":"evenodd"})],-1)),x(" "+t(l(a)("send_reminder")),1)])])):u("",!0),Y.value?(n(),d("button",{key:4,onClick:Le,type:"button",class:"inline-flex items-center rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",title:l(a)("email_history")},[...s[29]||(s[29]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.75-13a.75.75 0 00-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 000-1.5h-3.25V5z","clip-rule":"evenodd"})],-1)])],8,st)):u("",!0),ee.value?(n(),d("a",{key:5,href:r.route("invoices.peppol",o.invoice.id),class:"inline-flex items-center rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",title:"Export Peppol BIS 3.0"},[...s[30]||(s[30]=[e("svg",{class:"h-4 w-4 mr-1.5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm2.25 8.5a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5zm0 3a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z","clip-rule":"evenodd"})],-1),x(" Peppol XML ",-1)])],8,lt)):u("",!0),o.invoice.status!=="draft"?(n(),d("a",{key:6,href:r.route("invoices.facturx",o.invoice.id),class:"inline-flex items-center rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",title:"TÃ©lÃ©charger Factur-X / ZUGFeRD (PDF hybride)"},[...s[31]||(s[31]=[e("svg",{class:"h-4 w-4 mr-1.5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm4.75 11.97a.75.75 0 001.5 0v-2.69l.72.72a.75.75 0 101.06-1.06l-2-2a.75.75 0 00-1.06 0l-2 2a.75.75 0 001.06 1.06l.72-.72v2.69z","clip-rule":"evenodd"})],-1),x(" Factur-X ",-1)])],8,at)):u("",!0),ge.value?(n(),d("button",{key:7,onClick:Fe,disabled:p.value,class:"inline-flex items-center rounded-xl bg-blue-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-600 disabled:opacity-50",title:"Envoyer via le rÃ©seau Peppol"},[...s[32]||(s[32]=[e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M3.105 2.289a.75.75 0 00-.826.95l1.414 4.925A1.5 1.5 0 005.135 9.25h6.115a.75.75 0 010 1.5H5.135a1.5 1.5 0 00-1.442 1.086l-1.414 4.926a.75.75 0 00.826.95 28.896 28.896 0 0015.293-7.154.75.75 0 000-1.115A28.897 28.897 0 003.105 2.289z"})],-1),x(" Envoyer Peppol ",-1)])],8,ot)):u("",!0),k.value?(n(),d("span",{key:8,class:z([we(k.value.status),"inline-flex items-center rounded-xl px-3 py-2 text-sm font-medium"]),title:k.value.error_message||""},[k.value.status==="processing"?(n(),d("svg",rt,[...s[33]||(s[33]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):k.value.status==="sent"||k.value.status==="delivered"?(n(),d("svg",nt,[...s[34]||(s[34]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"},null,-1)])])):k.value.status==="failed"?(n(),d("svg",dt,[...s[35]||(s[35]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"},null,-1)])])):u("",!0),x(" Peppol: "+t(Ce(k.value.status)),1)],10,it)):u("",!0),o.invoice.type==="invoice"&&["finalized","sent","paid"].includes(o.invoice.status)&&!o.invoice.credit_note?(n(),d("button",{key:9,onClick:Ee,disabled:p.value,class:"inline-flex items-center rounded-xl border border-pink-300 bg-white px-3 py-2 text-sm font-medium text-pink-700 shadow-sm hover:bg-pink-50 dark:border-pink-600 dark:bg-slate-700 dark:text-pink-400 dark:hover:bg-slate-600"},[s[36]||(s[36]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2.121 2.121 0 013 3l-4.9 4.9a2.121 2.121 0 01-1.5.621h-1a.5.5 0 01-.5-.5v-1a2.121 2.121 0 01.621-1.5z","clip-rule":"evenodd"})],-1)),x(" "+t(l(a)("credit_note")),1)],8,ct)):u("",!0)])])]),default:$(()=>[e("div",ut,[e("div",mt,[e("div",xt,[e("div",vt,[e("h2",bt,t(l(a)("issuer")),1)]),e("div",pt,[o.invoice.seller_snapshot?(n(),d("div",ht,[e("p",kt,t(o.invoice.seller_snapshot.company_name),1),o.invoice.seller_snapshot.legal_name?(n(),d("p",ft,t(o.invoice.seller_snapshot.legal_name),1)):u("",!0),e("p",null,t(o.invoice.seller_snapshot.address_line1),1),o.invoice.seller_snapshot.address_line2?(n(),d("p",_t,t(o.invoice.seller_snapshot.address_line2),1)):u("",!0),e("p",null,t(o.invoice.seller_snapshot.postal_code)+" "+t(o.invoice.seller_snapshot.city),1),e("p",null,t(o.invoice.seller_snapshot.country),1),e("p",gt,[e("span",yt,t(l(a)("matricule"))+":",1),x(" "+t(o.invoice.seller_snapshot.matricule),1)]),o.invoice.seller_snapshot.vat_number?(n(),d("p",wt,[e("span",Ct,t(l(a)("vat_number_short"))+":",1),x(" "+t(o.invoice.seller_snapshot.vat_number),1)])):u("",!0)])):u("",!0)])]),e("div",zt,[e("div",Mt,[e("h2",jt,t(l(a)("client")),1)]),e("div",$t,[o.invoice.buyer_snapshot?(n(),d("div",Lt,[e("p",Bt,t(o.invoice.buyer_snapshot.name),1),o.invoice.buyer_snapshot.company_name?(n(),d("p",Vt,t(o.invoice.buyer_snapshot.company_name),1)):u("",!0),e("p",null,t(o.invoice.buyer_snapshot.address_line1),1),o.invoice.buyer_snapshot.address_line2?(n(),d("p",St,t(o.invoice.buyer_snapshot.address_line2),1)):u("",!0),e("p",null,t(o.invoice.buyer_snapshot.postal_code)+" "+t(o.invoice.buyer_snapshot.city),1),e("p",null,t(o.invoice.buyer_snapshot.country),1),o.invoice.buyer_snapshot.vat_number?(n(),d("p",Pt,[e("span",At,t(l(a)("vat_number_short"))+":",1),x(" "+t(o.invoice.buyer_snapshot.vat_number),1)])):u("",!0)])):u("",!0)])])]),e("div",Ft,[e("div",Et,[e("h2",Ht,t(l(a)("details")),1)]),e("div",Ut,[e("dl",Nt,[e("div",null,[e("dt",Dt,t(l(a)("issue_date")),1),e("dd",Rt,t(A(o.invoice.issued_at)),1)]),e("div",null,[e("dt",Tt,t(l(a)("due_date")),1),e("dd",qt,t(A(o.invoice.due_at)),1)]),o.invoice.sent_at?(n(),d("div",It,[e("dt",Ot,t(l(a)("sent_on")),1),e("dd",Xt,t(A(o.invoice.sent_at)),1)])):u("",!0),o.invoice.paid_at?(n(),d("div",Gt,[e("dt",Jt,t(l(a)("paid_on")),1),e("dd",Kt,t(A(o.invoice.paid_at)),1)])):u("",!0),o.invoice.credit_note_for?(n(),d("div",Zt,[e("dt",Qt,t(l(a)("credit_note_for")),1),e("dd",Wt,[o.invoice.original_invoice?(n(),xe(l(R),{key:0,href:r.route("invoices.show",o.invoice.credit_note_for),class:"text-primary-600 hover:text-primary-500 dark:text-primary-400"},{default:$(()=>[x(t(l(a)("invoice"))+" "+t(o.invoice.original_invoice.number),1)]),_:1},8,["href"])):(n(),xe(l(R),{key:1,href:r.route("invoices.show",o.invoice.credit_note_for),class:"text-primary-600 hover:text-primary-500 dark:text-primary-400"},{default:$(()=>[x(t(l(a)("see_original_invoice")),1)]),_:1},8,["href"]))])])):u("",!0),o.invoice.credit_note_reason?(n(),d("div",Yt,[e("dt",es,t(l(a)("reason")),1),e("dd",ts,t(ae.value[o.invoice.credit_note_reason]||o.invoice.credit_note_reason),1)])):u("",!0)])])]),e("div",ss,[e("div",ls,[e("h2",as,t(l(a)("invoice_lines")),1)]),e("div",os,[e("table",is,[e("thead",rs,[e("tr",null,[e("th",ns,t(l(a)("description")),1),e("th",ds,t(l(a)("qty")),1),e("th",cs,t(l(a)("price_ht")),1),e("th",us,t(l(a)("vat")),1),e("th",ms,t(l(a)("total_ht")),1)])]),e("tbody",xs,[(n(!0),d(M,null,L(o.invoice.items,i=>(n(),d("tr",{key:i.id},[e("td",vs,t(i.description),1),e("td",bs,t(i.quantity),1),e("td",ps,t(f(i.unit_price,o.invoice.currency)),1),e("td",hs,t(i.vat_rate)+"% ",1),e("td",ks,t(f(i.total_ht,o.invoice.currency)),1)]))),128))]),e("tfoot",fs,[e("tr",null,[e("td",_s,t(l(a)("total_ht")),1),e("td",gs,t(f(o.invoice.total_ht,o.invoice.currency)),1)]),e("tr",null,[e("td",ys,t(l(a)("total_vat")),1),e("td",ws,t(f(o.invoice.total_vat,o.invoice.currency)),1)]),e("tr",Cs,[e("td",zs,t(l(a)("total_ttc")),1),e("td",{class:z(["whitespace-nowrap py-3 pl-3 pr-6 text-right text-sm font-bold",o.invoice.type==="credit_note"?"text-pink-600 dark:text-pink-400":"text-slate-900 dark:text-white"])},t(f(o.invoice.total_ttc,o.invoice.currency)),3)])])])])]),o.invoice.notes?(n(),d("div",Ms,[e("div",js,[e("h2",$s,t(l(a)("notes")),1)]),e("div",Ls,[e("p",Bs,t(o.invoice.notes),1)])])):u("",!0),o.invoice.credit_notes&&o.invoice.credit_notes.length>0?(n(),d("div",Vs,[e("div",Ss,[e("h2",Ps,t(l(a)("related_credit_notes")),1)]),e("div",As,[e("ul",Fs,[(n(!0),d(M,null,L(o.invoice.credit_notes,i=>(n(),d("li",{key:i.id,class:"py-3 flex justify-between items-center"},[D(l(R),{href:r.route("invoices.show",i.id),class:"text-primary-600 hover:text-primary-500 dark:text-primary-400"},{default:$(()=>[x(t(i.number),1)]),_:2},1032,["href"]),e("span",Es,t(f(i.total_ttc,i.currency)),1)]))),128))])])])):u("",!0)]),F.value?(n(),d("div",Hs,[e("div",Us,[e("div",{class:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm transition-opacity",onClick:ie}),e("div",Ns,[e("div",Ds,[e("h3",Rs,t(l(a)("create_credit_note_for").replace(":number",o.invoice.number)),1),e("div",Ts,[e("label",qs,t(l(a)("credit_note_type")),1),e("div",Is,[e("label",Os,[_(e("input",{type:"radio","onUpdate:modelValue":s[1]||(s[1]=i=>g.value=i),value:"full",class:"h-4 w-4 text-primary-500 border-slate-300 focus:ring-primary-500"},null,512),[[ve,g.value]]),e("span",Xs,t(l(a)("full_credit_note")),1)]),e("label",Gs,[_(e("input",{type:"radio","onUpdate:modelValue":s[2]||(s[2]=i=>g.value=i),value:"partial",class:"h-4 w-4 text-primary-500 border-slate-300 focus:ring-primary-500"},null,512),[[ve,g.value]]),e("span",Js,t(l(a)("partial_credit_note")),1)])])]),e("div",Ks,[e("label",Zs,t(l(a)("credit_note_reason")),1),_(e("select",{id:"credit_note_reason","onUpdate:modelValue":s[3]||(s[3]=i=>l(w).reason=i),class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},[(n(!0),d(M,null,L(ae.value,(i,C)=>(n(),d("option",{key:C,value:C},t(i),9,Qs))),128))],512),[[qe,l(w).reason]])]),g.value==="partial"?(n(),d("div",Ws,[e("label",Ys,t(l(a)("lines_to_cancel")),1),e("div",el,[(n(!0),d(M,null,L(o.invoice.items,i=>(n(),d("label",{key:i.id,class:"flex items-center px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer"},[e("input",{type:"checkbox",checked:y.value.includes(i.id),onChange:C=>He(i.id),class:"h-4 w-4 text-primary-500 border-slate-300 rounded focus:ring-primary-500"},null,40,tl),e("span",sl,t(i.title||i.description),1),e("span",ll,t(f(i.total_ttc,o.invoice.currency)),1)]))),128))]),y.value.length===0?(n(),d("p",al,t(l(a)("select_at_least_one_line")),1)):u("",!0)])):u("",!0),e("div",ol,[e("div",il,[e("span",rl,t(l(a)("credit_note_amount"))+" : ",1),e("span",nl,t(g.value==="partial"?f(-Be.value,o.invoice.currency):f(-o.invoice.total_ttc,o.invoice.currency)),1)])]),e("p",dl,t(l(a)("credit_note_draft_info")),1)]),e("div",cl,[e("button",{type:"button",onClick:Ue,disabled:!oe.value||l(w).processing,class:"inline-flex w-full justify-center rounded-xl bg-pink-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-pink-500 disabled:opacity-50 sm:ml-3 sm:w-auto"},t(l(w).processing?l(a)("creating"):l(a)("create_credit_note")),9,ul),e("button",{type:"button",onClick:ie,class:"mt-3 inline-flex w-full justify-center rounded-xl bg-white px-3 py-2 text-sm font-semibold text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 hover:bg-slate-50 dark:bg-slate-600 dark:text-white dark:ring-slate-500 sm:mt-0 sm:w-auto"},t(l(a)("cancel")),1)])])])])):u("",!0),j.value?(n(),d("div",ml,[e("div",xl,[e("div",{class:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm transition-opacity",onClick:s[4]||(s[4]=i=>j.value=!1)}),e("div",vl,[e("div",bl,[e("h3",pl,[o.invoice.type==="credit_note"?(n(),d("span",hl,t(l(a)("credit_note")),1)):u("",!0),x(" "+t(o.invoice.number),1)]),e("div",kl,[e("div",fl,[(n(),d(M,null,L(pe,i=>e("button",{key:i.value,type:"button",onClick:C=>ke(i.value),title:i.label,class:z(["px-2 py-1.5 text-base transition-colors",E.value===i.value?"bg-primary-100 dark:bg-primary-900":"bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600"])},t(i.flag),11,_l)),64))]),e("a",{href:he.value,target:"_blank",class:"inline-flex items-center rounded-xl border border-slate-200 bg-white px-3 py-1.5 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-300"},[...s[37]||(s[37]=[e("svg",{class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10.75 2.75a.75.75 0 00-1.5 0v8.614L6.295 8.235a.75.75 0 10-1.09 1.03l4.25 4.5a.75.75 0 001.09 0l4.25-4.5a.75.75 0 00-1.09-1.03l-2.955 3.129V2.75z"}),e("path",{d:"M3.5 12.75a.75.75 0 00-1.5 0v2.5A2.75 2.75 0 004.75 18h10.5A2.75 2.75 0 0018 15.25v-2.5a.75.75 0 00-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5z"})],-1),x(" PDF ",-1)])],8,gl),e("button",{type:"button",onClick:s[5]||(s[5]=i=>j.value=!1),class:"text-slate-400 hover:text-slate-500 dark:hover:text-slate-300"},[...s[38]||(s[38]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",yl,[q.value?(n(),d("div",wl,[...s[39]||(s[39]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"},null,-1)])])):(n(),d("div",{key:1,class:"bg-white shadow-lg mx-auto",style:{width:"210mm","min-height":"297mm",transform:"scale(1)","transform-origin":"top center"},innerHTML:T.value},null,8,Cl))]),e("div",zl,[e("button",{type:"button",onClick:s[6]||(s[6]=i=>j.value=!1),class:"inline-flex items-center rounded-xl bg-white px-3 py-2 text-sm font-semibold text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 hover:bg-slate-50 dark:bg-slate-600 dark:text-white dark:ring-slate-500"},t(l(a)("close")),1)])])])])):u("",!0),V.value?(n(),d("div",Ml,[e("div",jl,[e("div",{class:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm transition-opacity",onClick:s[7]||(s[7]=i=>V.value=!1)}),e("div",$l,[e("form",{onSubmit:be(Me,["prevent"])},[e("div",Ll,[e("h3",Bl,t(l(a)("send_invoice_by_email")),1),e("div",Vl,[e("label",Sl,t(l(a)("recipient_email"))+" * ",1),_(e("input",{type:"email",id:"recipient_email","onUpdate:modelValue":s[8]||(s[8]=i=>l(m).recipient_email=i),required:"",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},null,512),[[B,l(m).recipient_email]]),l(m).errors.recipient_email?(n(),d("p",Pl,t(l(m).errors.recipient_email),1)):u("",!0)]),e("div",Al,[e("label",Fl,t(l(a)("subject"))+" * ",1),_(e("input",{type:"text",id:"subject","onUpdate:modelValue":s[9]||(s[9]=i=>l(m).subject=i),required:"",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},null,512),[[B,l(m).subject]]),l(m).errors.subject?(n(),d("p",El,t(l(m).errors.subject),1)):u("",!0)]),e("div",Hl,[e("label",Ul,t(l(a)("custom_message")),1),_(e("textarea",{id:"message","onUpdate:modelValue":s[10]||(s[10]=i=>l(m).message=i),rows:"4",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:l(a)("leave_empty_for_default")},null,8,Nl),[[B,l(m).message]]),l(m).errors.message?(n(),d("p",Dl,t(l(m).errors.message),1)):u("",!0)]),e("div",Rl,[e("label",Tl,[_(e("input",{type:"checkbox","onUpdate:modelValue":s[11]||(s[11]=i=>l(m).send_copy_to_self=i),class:"h-4 w-4 text-primary-500 border-slate-300 rounded focus:ring-primary-500"},null,512),[[Ie,l(m).send_copy_to_self]]),e("span",ql,t(l(a)("send_copy_to_self")),1)])]),e("div",Il,[e("p",Ol,t(l(a)("invoice_pdf_attached")),1)])]),e("div",Xl,[e("button",{type:"submit",disabled:l(m).processing,class:"inline-flex w-full justify-center rounded-xl bg-primary-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-600 disabled:opacity-50 sm:ml-3 sm:w-auto"},[l(m).processing?(n(),d("svg",Jl,[...s[40]||(s[40]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):u("",!0),x(" "+t(l(m).processing?l(a)("sending"):l(a)("send")),1)],8,Gl),e("button",{type:"button",onClick:s[12]||(s[12]=i=>V.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-xl bg-white px-3 py-2 text-sm font-semibold text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 hover:bg-slate-50 dark:bg-slate-600 dark:text-white dark:ring-slate-500 sm:mt-0 sm:w-auto"},t(l(a)("cancel")),1)])],32)])])])):u("",!0),S.value?(n(),d("div",Kl,[e("div",Zl,[e("div",{class:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm transition-opacity",onClick:s[13]||(s[13]=i=>S.value=!1)}),e("div",Ql,[e("form",{onSubmit:be(je,["prevent"])},[e("div",Wl,[e("h3",Yl,t(l(a)("send_payment_reminder")),1),e("div",ea,[e("label",ta,t(l(a)("reminder_level")),1),e("div",sa,[e("button",{type:"button",onClick:s[14]||(s[14]=i=>N(1)),class:z([H.value===1?"bg-orange-100 border-orange-500 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300":"bg-white border-slate-200 text-slate-700 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300","flex-1 py-2 px-3 rounded-xl border text-sm font-medium"])},t(l(a)("level"))+" 1 - "+t(l(a)("reminder")),3),e("button",{type:"button",onClick:s[15]||(s[15]=i=>N(2)),class:z([H.value===2?"bg-orange-100 border-orange-500 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300":"bg-white border-slate-200 text-slate-700 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300","flex-1 py-2 px-3 rounded-xl border text-sm font-medium"])},t(l(a)("level"))+" 2 - "+t(l(a)("follow_up")),3),e("button",{type:"button",onClick:s[16]||(s[16]=i=>N(3)),class:z([H.value===3?"bg-pink-100 border-pink-500 text-pink-700 dark:bg-pink-900/30 dark:text-pink-300":"bg-white border-slate-200 text-slate-700 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300","flex-1 py-2 px-3 rounded-xl border text-sm font-medium"])},t(l(a)("level"))+" 3 - "+t(l(a)("formal_notice")),3)])]),e("div",la,[e("div",aa,[s[41]||(s[41]=e("svg",{class:"h-5 w-5 text-orange-600 dark:text-orange-400 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)),e("span",oa,t(l(a)("payment_overdue_by").replace(":days",G.value)),1)])]),e("div",ia,[e("label",ra,t(l(a)("recipient_email"))+" * ",1),_(e("input",{type:"email",id:"reminder_email","onUpdate:modelValue":s[17]||(s[17]=i=>l(v).recipient_email=i),required:"",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},null,512),[[B,l(v).recipient_email]])]),e("div",na,[e("label",da,t(l(a)("subject"))+" * ",1),_(e("input",{type:"text",id:"reminder_subject","onUpdate:modelValue":s[18]||(s[18]=i=>l(v).subject=i),required:"",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},null,512),[[B,l(v).subject]])]),e("div",ca,[e("label",ua,t(l(a)("message"))+" * ",1),_(e("textarea",{id:"reminder_message","onUpdate:modelValue":s[19]||(s[19]=i=>l(v).message=i),rows:"6",required:"",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"},null,512),[[B,l(v).message]])]),e("div",ma,[e("p",xa,t(l(a)("invoice_pdf_attached")),1)])]),e("div",va,[e("button",{type:"submit",disabled:l(v).processing,class:"inline-flex w-full justify-center rounded-xl bg-orange-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-600 disabled:opacity-50 sm:ml-3 sm:w-auto"},[l(v).processing?(n(),d("svg",pa,[...s[42]||(s[42]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):u("",!0),x(" "+t(l(v).processing?l(a)("sending"):l(a)("send_reminder")),1)],8,ba),e("button",{type:"button",onClick:s[20]||(s[20]=i=>S.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-xl bg-white px-3 py-2 text-sm font-semibold text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 hover:bg-slate-50 dark:bg-slate-600 dark:text-white dark:ring-slate-500 sm:mt-0 sm:w-auto"},t(l(a)("cancel")),1)])],32)])])])):u("",!0),U.value?(n(),d("div",ha,[e("div",ka,[e("div",{class:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm transition-opacity",onClick:s[21]||(s[21]=i=>U.value=!1)}),e("div",fa,[e("div",_a,[e("h3",ga,t(l(a)("email_history")),1),O.value?(n(),d("div",ya,[...s[43]||(s[43]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"},null,-1)])])):I.value.length===0?(n(),d("div",wa,[s[44]||(s[44]=e("svg",{class:"mx-auto h-12 w-12 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),e("p",Ca,t(l(a)("no_emails_sent")),1)])):(n(),d("div",za,[(n(!0),d(M,null,L(I.value,i=>(n(),d("div",{key:i.id,class:z(["border rounded-xl p-3 dark:border-slate-600",i.status==="failed"?"border-pink-300 bg-pink-50 dark:border-pink-600 dark:bg-pink-900/20":"border-slate-200 dark:border-slate-600"])},[e("div",Ma,[e("span",{class:z(["inline-flex items-center rounded-xl px-2.5 py-0.5 text-xs font-medium",i.is_reminder?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300":"bg-sky-100 text-sky-800 dark:bg-sky-900 dark:text-sky-300"])},t(i.type_label),3),e("span",ja,t(i.sent_at),1)]),e("p",$a,t(i.subject),1),e("p",La,t(l(a)("to"))+": "+t(i.recipient_email),1),i.status==="failed"?(n(),d("div",Ba,[s[45]||(s[45]=e("svg",{class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})],-1)),x(" "+t(l(a)("sending_failed")),1)])):u("",!0)],2))),128))]))]),e("div",Va,[e("button",{type:"button",onClick:s[22]||(s[22]=i=>U.value=!1),class:"inline-flex w-full justify-center rounded-xl bg-white px-3 py-2 text-sm font-semibold text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 hover:bg-slate-50 dark:bg-slate-600 dark:text-white dark:ring-slate-500 sm:w-auto"},t(l(a)("close")),1)])])])])):u("",!0)]),_:1})],64))}};export{Ha as default};
