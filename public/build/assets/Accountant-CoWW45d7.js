import{u as I,c as a,a as m,b as l,h as j,i as x,d as e,l as b,e as n,o as r,F as v,j as k,t as o,g as u,m as E,O as S,w as $,f as y,v as w,r as D,p as f}from"./app-3FUkuP4b.js";import{_ as V}from"./AppLayout-C7YdKF98.js";import"./DropdownLink-iIGhN6Bc.js";import"./useTranslations-CzvQwZ7O.js";const B={class:"mb-6 border-b border-slate-200 dark:border-slate-700"},F={class:"flex space-x-8","aria-label":"Settings tabs"},M={class:"space-y-6"},N={class:"flex items-center justify-between"},z={class:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-200 dark:border-slate-700 dark:shadow-slate-900/50 overflow-hidden"},T={key:0,class:"px-6 py-8 text-center text-slate-500 dark:text-slate-400"},q={key:1,class:"divide-y divide-slate-200 dark:divide-slate-700"},R={class:"flex items-center justify-between"},H={class:"text-sm font-medium text-slate-900 dark:text-white"},P={class:"text-sm text-slate-500 dark:text-slate-400"},U={class:"mt-1 flex items-center space-x-4 text-xs text-slate-400"},J={key:0},L=["onClick"],O={key:0,class:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-200 dark:border-slate-700 dark:shadow-slate-900/50 overflow-hidden"},G={class:"divide-y divide-slate-200 dark:divide-slate-700"},K={class:"flex items-center justify-between"},Q={class:"text-sm font-medium text-slate-900 dark:text-white"},W={key:0,class:"text-sm text-slate-500 dark:text-slate-400"},X={class:"text-xs text-slate-400 mt-1"},Y={class:"flex items-center space-x-2"},Z=["onClick"],ee=["onClick"],te={key:1,class:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-200 dark:border-slate-700 dark:shadow-slate-900/50 overflow-hidden"},se={class:"divide-y divide-slate-200 dark:divide-slate-700"},re={class:"flex items-center justify-between"},ae={class:"text-sm text-slate-900 dark:text-white"},le={class:"font-medium"},oe={class:"font-medium"},de={class:"text-xs text-slate-500 dark:text-slate-400"},ie={class:"text-xs text-slate-400"},ne={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},me={class:"flex min-h-full items-center justify-center p-4"},xe={class:"relative bg-white dark:bg-slate-800 rounded-2xl shadow-xl max-w-md w-full p-6"},ue={key:0,class:"mt-1 text-sm text-pink-600"},ce={class:"flex justify-end space-x-3 pt-4"},pe=["disabled"],be={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},ye={__name:"Accountant",props:{accountants:Array,pendingInvitations:Array,recentDownloads:Array},setup(c){const p=D(!1),i=I({email:"",name:""}),g=()=>{i.post(route("settings.accountant.invite"),{preserveScroll:!0,onSuccess:()=>{p.value=!1,i.reset()}})},_=d=>{f.post(route("settings.accountant.resend",d),{},{preserveScroll:!0})},C=d=>{confirm("Annuler cette invitation ?")&&f.delete(route("settings.accountant.cancel",d),{preserveScroll:!0})},A=(d,t)=>{confirm(`Révoquer l'accès de ${t} ? Cette action est irréversible.`)&&f.delete(route("settings.accountant.revoke",d),{preserveScroll:!0})};return(d,t)=>(r(),a(v,null,[m(l(j),{title:"Accès Comptable"}),m(V,null,{header:x(()=>[...t[5]||(t[5]=[e("h1",{class:"text-xl font-semibold text-slate-900 dark:text-white"}," Paramètres ",-1)])]),default:x(()=>[e("div",B,[e("nav",F,[m(l(b),{href:d.route("settings.business.edit"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:x(()=>[...t[6]||(t[6]=[n(" Entreprise ",-1)])]),_:1},8,["href"]),m(l(b),{href:d.route("settings.email"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:x(()=>[...t[7]||(t[7]=[n(" Email ",-1)])]),_:1},8,["href"]),m(l(b),{href:d.route("settings.email.provider"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:x(()=>[...t[8]||(t[8]=[n(" Fournisseur Email ",-1)])]),_:1},8,["href"]),m(l(b),{href:d.route("settings.accountant"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-primary-500 text-primary-600 dark:text-primary-400"},{default:x(()=>[...t[9]||(t[9]=[n(" Accès Comptable ",-1)])]),_:1},8,["href"]),m(l(b),{href:d.route("subscription.index"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"},{default:x(()=>[...t[10]||(t[10]=[n(" Abonnement ",-1)])]),_:1},8,["href"])])]),e("div",M,[e("div",N,[t[12]||(t[12]=e("div",null,[e("h2",{class:"text-lg font-medium text-slate-900 dark:text-white"},"Accès Comptable"),e("p",{class:"mt-1 text-sm text-slate-500 dark:text-slate-400"}," Invitez votre comptable à accéder à vos exports comptables. ")],-1)),e("button",{onClick:t[0]||(t[0]=s=>p.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-500"},[...t[11]||(t[11]=[e("svg",{class:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),n(" Inviter un comptable ",-1)])])]),e("div",z,[t[13]||(t[13]=e("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},[e("h3",{class:"text-base font-medium text-slate-900 dark:text-white"},"Comptables actifs")],-1)),c.accountants.length===0?(r(),a("div",T," Aucun comptable n'a accès à vos données. ")):(r(),a("ul",q,[(r(!0),a(v,null,k(c.accountants,s=>(r(),a("li",{key:s.id,class:"px-6 py-4"},[e("div",R,[e("div",null,[e("p",H,o(s.name),1),e("p",P,o(s.email),1),e("div",U,[e("span",null,"Accès depuis : "+o(s.granted_at),1),s.last_download?(r(),a("span",J,"Dernier téléchargement : "+o(s.last_download),1)):u("",!0)])]),e("button",{onClick:h=>A(s.id,s.name),class:"text-sm text-pink-600 hover:text-pink-800 dark:text-pink-400 dark:hover:text-pink-300"}," Révoquer ",8,L)])]))),128))]))]),c.pendingInvitations.length>0?(r(),a("div",O,[t[14]||(t[14]=e("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},[e("h3",{class:"text-base font-medium text-slate-900 dark:text-white"},"Invitations en attente")],-1)),e("ul",G,[(r(!0),a(v,null,k(c.pendingInvitations,s=>(r(),a("li",{key:s.id,class:"px-6 py-4"},[e("div",K,[e("div",null,[e("p",Q,o(s.email),1),s.name?(r(),a("p",W,o(s.name),1)):u("",!0),e("p",X," Envoyée le "+o(s.created_at)+" - Expire le "+o(s.expires_at),1)]),e("div",Y,[e("button",{onClick:h=>_(s.id),class:"text-sm text-primary-600 hover:text-primary-800 dark:text-primary-400"}," Renvoyer ",8,Z),e("button",{onClick:h=>C(s.id),class:"text-sm text-slate-500 hover:text-slate-700 dark:text-slate-400"}," Annuler ",8,ee)])])]))),128))])])):u("",!0),c.recentDownloads.length>0?(r(),a("div",te,[t[16]||(t[16]=e("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-700"},[e("h3",{class:"text-base font-medium text-slate-900 dark:text-white"},"Téléchargements récents")],-1)),e("ul",se,[(r(!0),a(v,null,k(c.recentDownloads,s=>(r(),a("li",{key:s.id,class:"px-6 py-4"},[e("div",re,[e("div",null,[e("p",ae,[e("span",le,o(s.accountant_name),1),t[15]||(t[15]=n(" a téléchargé ",-1)),e("span",oe,o(s.export_type_label),1)]),e("p",de," Période : "+o(s.period),1)]),e("span",ie,o(s.downloaded_at),1)])]))),128))])])):u("",!0)]),(r(),E(S,{to:"body"},[p.value?(r(),a("div",ne,[e("div",me,[e("div",{class:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm transition-opacity",onClick:t[1]||(t[1]=s=>p.value=!1)}),e("div",xe,[t[21]||(t[21]=e("h3",{class:"text-lg font-medium text-slate-900 dark:text-white mb-4"}," Inviter un comptable ",-1)),e("form",{onSubmit:$(g,["prevent"]),class:"space-y-4"},[e("div",null,[t[17]||(t[17]=e("label",{for:"invite_email",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"}," Email du comptable * ",-1)),y(e("input",{id:"invite_email","onUpdate:modelValue":t[2]||(t[2]=s=>l(i).email=s),type:"email",required:"",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"comptable@fiduciaire.lu"},null,512),[[w,l(i).email]]),l(i).errors.email?(r(),a("p",ue,o(l(i).errors.email),1)):u("",!0)]),e("div",null,[t[18]||(t[18]=e("label",{for:"invite_name",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"}," Nom (optionnel) ",-1)),y(e("input",{id:"invite_name","onUpdate:modelValue":t[3]||(t[3]=s=>l(i).name=s),type:"text",class:"mt-1 block w-full rounded-xl border-slate-200 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",placeholder:"Jean Dupont"},null,512),[[w,l(i).name]])]),e("div",ce,[e("button",{type:"button",onClick:t[4]||(t[4]=s=>p.value=!1),class:"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 hover:text-slate-900"}," Annuler "),e("button",{type:"submit",disabled:l(i).processing,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-500 disabled:opacity-50"},[l(i).processing?(r(),a("svg",be,[...t[19]||(t[19]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):u("",!0),t[20]||(t[20]=n(" Envoyer l'invitation ",-1))],8,pe)])],32)])])])):u("",!0)]))]),_:1})],64))}};export{ye as default};
